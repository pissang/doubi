/**
 * @license RequireJS text 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

// Copyright 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

  * Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation 
    and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE 
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */

// (c) 2010-2013 Thomas Fuchs

// Zepto.js may be freely distributed under the MIT license.

/*!
 * ZRender, a lightweight canvas library with a MVC architecture, data-driven 
 * and provides an event model like DOM.
 *  
 * Copyright (c) 2013, Baidu Inc.
 * All rights reserved.
 * 
 * LICENSE
 * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
 */

define("zrender/tool/vector",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(t,n){var r=new e(2);return r[0]=t||0,r[1]=n||0,r},copy:function(e,t){e[0]=t[0],e[1]=t[1]},set:function(e,t,n){e[0]=t,e[1]=n},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},length:function(e){return Math.sqrt(this.lengthSquare(e))},lengthSquare:function(e){return e[0]*e[0]+e[1]*e[1]},mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},normalize:function(e,n){var r=t.length(n);return r===0?(e[0]=0,e[1]=0):(e[0]=n[0]/r,e[1]=n[1]/r),e},distance:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},negate:function(e,t){e[0]=-t[0],e[1]=-t[1]},middle:function(e,t,n){return e[0]=(t[0]+n[0])/2,e[1]=(t[1]+n[1])/2,e},applyTransform:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}};return t.len=t.length,t.dist=t.distance,t}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);c.onXhr&&c.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("js/asciiLogo.txt",[],function(){return"███████╗ ██████╗██╗  ██╗ █████╗ ██████╗ ████████╗███████╗\n██╔════╝██╔════╝██║  ██║██╔══██╗██╔══██╗╚══██╔══╝██╔════╝\n█████╗  ██║     ███████║███████║██████╔╝   ██║   ███████╗\n██╔══╝  ██║     ██╔══██║██╔══██║██╔══██╗   ██║   ╚════██║\n███████╗╚██████╗██║  ██║██║  ██║██║  ██║   ██║   ███████║\n╚══════╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝   ╚══════╝"}),define("data/relation1.json",[],function(){return'{\n  "nodes": [\n    {\n      "name": "林萧",\n      "radius": 65,\n      "image": "imgs/roles/林萧.jpg",\n      "action": "role/林萧"\n    },\n    {\n      "name": "顾里",\n      "radius": 63,\n      "image": "imgs/roles/顾里.jpg",\n      "action": "role/顾里"\n    },\n    {\n      "name": "南湘",\n      "radius": 61,\n      "image": "imgs/roles/南湘.jpg",\n      "action": "role/南湘"\n    },\n    {\n      "name": "唐宛如",\n      "radius": 59,\n      "image": "imgs/roles/唐宛如.jpg",\n      "action": "role/唐宛如"\n    },\n    {\n      "name": "顾源",\n      "radius": 52,\n      "image": "imgs/roles/顾源.jpg",\n      "action": "role/顾源"\n    },\n    {\n      "name": "周崇光",\n      "radius": 50,\n      "image": "imgs/roles/周崇光.jpg",\n      "action": "role/周崇光"\n    },\n    {\n      "name": "宫洺",\n      "radius": 48,\n      "image": "imgs/roles/宫洺.jpg",\n      "action": "role/宫洺"\n    },\n    {\n      "name": "席城",\n      "radius": 46,\n      "image": "imgs/roles/席城.jpg",\n      "action": "role/席城"\n    },\n    {\n      "name": "顾准",\n      "radius": 44,\n      "image": "imgs/roles/顾准.jpg",\n      "action": "role/顾准"\n    },\n    {\n      "name": "Neil",\n      "radius": 42,\n      "image": "imgs/roles/Neil.jpg",\n      "action": "role/Neil"\n    },\n    {\n      "name": "卫海",\n      "radius": 40,\n      "image": "imgs/roles/卫海.jpg",\n      "action": "role/卫海"\n    },\n    {\n      "name": "Kitty",\n      "radius": 38,\n      "image": "imgs/roles/Kitty.jpg",\n      "action": "role/Kitty"\n    },\n    {\n      "name": "叶传萍",\n      "radius": 36,\n      "image": "imgs/roles/叶传萍.jpg",\n      "action": "role/叶传萍"\n    }\n  ],\n  "edges": [\n    {\n      "source": "顾里",\n      "target": "林萧",\n      "label": "闺蜜"\n    },\n    {\n      "source": "南湘",\n      "target": "林萧",\n      "label": "闺蜜"\n    },\n    {\n      "source": "唐宛如",\n      "target": "林萧",\n      "label": "闺蜜"\n    },\n    {\n      "source": "顾源",\n      "target": "林萧",\n      "label": "好友"\n    },\n    {\n      "source": "周崇光",\n      "target": "林萧",\n      "label": "恋人"\n    },\n    {\n      "source": "宫洺",\n      "target": "林萧",\n      "label": "上下级"\n    },\n    {\n      "source": "顾准",\n      "target": "林萧",\n      "label": "闺蜜弟弟"\n    },\n    {\n      "source": "Neil",\n      "target": "林萧",\n      "label": "好友"\n    },\n    {\n      "source": "Kitty",\n      "target": "林萧",\n      "label": "同事"\n    },\n    {\n      "source": "林萧",\n      "target": "顾里",\n      "label": "闺蜜"\n    },\n    {\n      "source": "南湘",\n      "target": "顾里",\n      "label": "闺蜜"\n    },\n    {\n      "source": "唐宛如",\n      "target": "顾里",\n      "label": "闺蜜"\n    },\n    {\n      "source": "顾源",\n      "target": "顾里",\n      "label": "恋人"\n    },\n    {\n      "source": "宫洺",\n      "target": "顾里",\n      "label": "商业对手"\n    },\n    {\n      "source": "席城",\n      "target": "顾里",\n      "label": "肮脏的秘密"\n    },\n    {\n      "source": "顾准",\n      "target": "顾里",\n      "label": "亲姐弟"\n    },\n    {\n      "source": "Neil",\n      "target": "顾里",\n      "label": "表姐弟"\n    },\n    {\n      "source": "Kitty",\n      "target": "顾里",\n      "label": "同事"\n    },\n    {\n      "source": "叶传萍",\n      "target": "顾里",\n      "label": "婆媳"\n    },\n    {\n      "source": "林萧",\n      "target": "南湘",\n      "label": "闺蜜"\n    },\n    {\n      "source": "顾里",\n      "target": "南湘",\n      "label": "闺蜜"\n    },\n    {\n      "source": "唐宛如",\n      "target": "南湘",\n      "label": "闺蜜"\n    },\n    {\n      "source": "顾源",\n      "target": "南湘",\n      "label": "好友"\n    },\n    {\n      "source": "宫洺",\n      "target": "南湘",\n      "label": "卑鄙的交易"\n    },\n    {\n      "source": "席城",\n      "target": "南湘",\n      "label": "初恋"\n    },\n    {\n      "source": "顾准",\n      "target": "南湘",\n      "label": "男友"\n    },\n    {\n      "source": "Neil",\n      "target": "南湘",\n      "label": "好友"\n    },\n    {\n      "source": "卫海",\n      "target": "南湘",\n      "label": "前男友"\n    },\n    {\n      "source": "Kitty",\n      "target": "南湘",\n      "label": "同事"\n    },\n    {\n      "source": "林萧",\n      "target": "唐宛如",\n      "label": "闺蜜"\n    },\n    {\n      "source": "顾里",\n      "target": "唐宛如",\n      "label": "闺蜜"\n    },\n    {\n      "source": "南湘",\n      "target": "唐宛如",\n      "label": "闺蜜"\n    },\n    {\n      "source": "顾源",\n      "target": "唐宛如",\n      "label": "好友"\n    },\n    {\n      "source": "Neil",\n      "target": "唐宛如",\n      "label": "好友"\n    },\n    {\n      "source": "卫海",\n      "target": "唐宛如",\n      "label": "暗恋"\n    },\n    {\n      "source": "林萧",\n      "target": "顾源",\n      "label": "好友"\n    },\n    {\n      "source": "顾里",\n      "target": "顾源",\n      "label": "恋人"\n    },\n    {\n      "source": "南湘",\n      "target": "顾源",\n      "label": "好友"\n    },\n    {\n      "source": "唐宛如",\n      "target": "顾源",\n      "label": "好友"\n    },\n    {\n      "source": "Neil",\n      "target": "顾准",\n      "label": "小金毛和牛头梗"\n    },\n    {\n      "source": "宫洺",\n      "target": "顾源",\n      "label": "朋友"\n    },\n    {\n      "source": "宫洺",\n      "target": "Kitty",\n      "label": "上下级"\n    },\n    {\n      "source": "席城",\n      "target": "顾源",\n      "label": "敌人"\n    },\n    {\n      "source": "Neil",\n      "target": "顾源",\n      "label": "好友"\n    },\n    {\n      "source": "卫海",\n      "target": "顾源",\n      "label": "好友"\n    },\n    {\n      "source": "叶传萍",\n      "target": "顾源",\n      "label": "母亲"\n    },\n    {\n      "source": "林萧",\n      "target": "周崇光",\n      "label": "恋人"\n    },\n    {\n      "source": "南湘",\n      "target": "周崇光",\n      "label": "一般"\n    },\n    {\n      "source": "宫洺",\n      "target": "周崇光",\n      "label": "兄弟"\n    },\n    {\n      "source": "林萧",\n      "target": "宫洺",\n      "label": "上下级"\n    },\n    {\n      "source": "顾里",\n      "target": "宫洺",\n      "label": "商业对手"\n    },\n    {\n      "source": "南湘",\n      "target": "宫洺",\n      "label": "卑鄙的交易"\n    },\n    {\n      "source": "周崇光",\n      "target": "宫洺",\n      "label": "兄弟"\n    },\n    {\n      "source": "顾里",\n      "target": "席城",\n      "label": "肮脏的秘密"\n    },\n    {\n      "source": "南湘",\n      "target": "席城",\n      "label": "前男友"\n    },\n    {\n      "source": "顾源",\n      "target": "席城",\n      "label": "敌人"\n    },\n    {\n      "source": "顾里",\n      "target": "顾准",\n      "label": "姐弟"\n    },\n    {\n      "source": "南湘",\n      "target": "顾准",\n      "label": "情侣"\n    },\n    {\n      "source": "林萧",\n      "target": "Neil",\n      "label": "好友"\n    },\n    {\n      "source": "顾里",\n      "target": "Neil",\n      "label": "表姐弟"\n    },\n    {\n      "source": "南湘",\n      "target": "Neil",\n      "label": "好友"\n    },\n    {\n      "source": "顾源",\n      "target": "Neil",\n      "label": "好友"\n    },\n    {\n      "source": "南湘",\n      "target": "卫海",\n      "label": "前男友"\n    },\n    {\n      "source": "唐宛如",\n      "target": "卫海",\n      "label": "暗恋"\n    },\n    {\n      "source": "顾源",\n      "target": "卫海",\n      "label": "朋友"\n    },\n    {\n      "source": "林萧",\n      "target": "Kitty",\n      "label": "同事"\n    },\n    {\n      "source": "顾里",\n      "target": "Kitty",\n      "label": "同事"\n    },\n    {\n      "source": "南湘",\n      "target": "Kitty",\n      "label": "同事"\n    },\n    {\n      "source": "顾里",\n      "target": "叶传萍",\n      "label": "婆媳"\n    },\n    {\n      "source": "顾源",\n      "target": "叶传萍",\n      "label": "母亲"\n    }\n  ]\n}'}),define("data/relation2",["require"],function(e){var t={"林萧":{actor:"杨幂",life:"imgs/actors/林萧-杨幂-生活照.jpg",still:"imgs/actors/林萧-剧照.jpg"},"宫洺":{actor:"锦荣",life:"imgs/actors/宫洺-锦荣-生活照.jpg",still:"imgs/actors/宫洺-剧照.jpg"},"顾源":{actor:"柯震东",life:"imgs/actors/顾源-柯震东-生活照.jpg",still:"imgs/actors/顾源-剧照.jpg"},"南湘":{actor:"郭碧婷",life:"imgs/actors/南湘-郭碧婷-生活照.jpg",still:"imgs/actors/南湘-剧照.jpg"},"唐宛如":{actor:"谢依霖",life:"imgs/actors/唐宛如-谢依霖-生活照.jpg",still:"imgs/actors/唐宛如-剧照.jpg"},"席城":{actor:"姜潮",life:"imgs/actors/席城-姜潮-生活照.jpg",still:"imgs/actors/席城-剧照.jpg"},"叶传萍":{actor:"王琳",life:"imgs/actors/叶传萍-王琳-生活照.jpg",still:"imgs/actors/叶传萍-剧照.jpg"},"周崇光":{actor:"陈学冬",life:"imgs/actors/周崇光-陈学冬-生活照.jpg",still:"imgs/actors/周崇光-剧照.jpg"},Kitty:{actor:"商侃",life:"imgs/actors/Kitty-商侃-生活照.jpg",still:"imgs/actors/Kitty-剧照.jpg"},Neil:{actor:"李贤宰",life:"imgs/actors/Neil-李贤宰-生活照.jpg",still:"imgs/actors/Neil-剧照.jpg"},"顾准":{actor:"任佑明",life:"imgs/actors/顾准-任佑明-生活照.jpg",still:"imgs/actors/顾准-剧照.jpg"},"顾里":{actor:"郭采洁",life:"imgs/actors/顾里-郭采洁-生活照.jpg",still:"imgs/actors/顾里-剧照.jpg"},"卫海":{actor:"杜天皓",life:"imgs/actors/卫海-杜天皓-生活照.jpg",still:"imgs/actors/卫海-剧照.jpg"}},n=function(e){return{nodes:[{name:e.roleName,image:e.roleImage,radius:100},{name:"剧照",title:"",image:e.still,radius:55,action:"detail/"+e.roleName+"/剧照"},{name:e.actor,image:e.life,radius:60,action:"actor/"+e.actor},{name:"郭敬明",image:"imgs/郭敬明.jpg",radius:55,action:"actor/郭敬明"},{name:"角色概况",title:"角色\n概况",radius:40,action:"detail/"+e.roleName+"/角色"},{name:"微博",title:"",image:"imgs/weibo.jpg",radius:40,action:"detail/"+e.actor+"/微博热议"},{name:"小时代",title:"返回",image:"imgs/logo-back.png",action:"back",radius:50,position:[300,150],fixed:!0}],edges:[{source:e.roleName,target:"剧照",label:"剧照"},{source:e.roleName,target:"角色概况",label:"角色简介"},{source:e.roleName,target:e.actor,label:"扮演者"},{source:e.roleName,target:"郭敬明",label:"小说作者"},{source:e.roleName,target:"微博",label:"微博热议"},{source:e.roleName,target:"小时代",label:"小说角色"}]}};return{get:function(e,r){var i=t[e];if(i)return n({actor:i.actor,still:i.still,life:i.life,roleName:r.name,roleImage:r.image})}}}),define("data/relation3.json",[],function(){return'{\n  "杨幂": {\n    "nodes": [\n      {\n        "name": "杨幂",\n        "radius": 80\n      },\n      {\n        "name": "宫",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/杨幂/宫.jpg",\n        "action": "detail/杨幂/作品/宫"\n      },\n      {\n        "name": "刘恺威",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/杨幂/刘恺威.jpg",\n        "action": "detail/杨幂/人脉/刘恺威"\n      },\n      {\n        "name": "分手大师",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/杨幂/分手大师.jpg",\n        "action": "detail/杨幂/作品/分手大师"\n      },\n      {\n        "name": "周笔畅",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/杨幂/周笔畅.jpg",\n        "action": "detail/杨幂/人脉/周笔畅"\n      },\n      {\n        "name": "仙剑奇侠传3",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/杨幂/仙剑奇侠传3.jpg",\n        "action": "detail/杨幂/作品/仙剑奇侠传3"\n      },\n      {\n        "name": "唐嫣",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/杨幂/唐嫣.jpg",\n        "action": "detail/杨幂/人脉/唐嫣"\n      },\n      {\n        "name": "亲幂关系Close to Me",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/杨幂/亲幂关系Close to Me.jpg",\n        "action": "detail/杨幂/作品/亲幂关系Close to Me"\n      }\n    ],\n    "edges": [\n      {\n        "source": "杨幂",\n        "target": "宫",\n        "label": "电视剧"\n      },\n      {\n        "source": "杨幂",\n        "target": "刘恺威",\n        "label": "丈夫"\n      },\n      {\n        "source": "杨幂",\n        "target": "分手大师",\n        "label": "电影"\n      },\n      {\n        "source": "杨幂",\n        "target": "周笔畅",\n        "label": "好友"\n      },\n      {\n        "source": "杨幂",\n        "target": "仙剑奇侠传3",\n        "label": "电视剧"\n      },\n      {\n        "source": "杨幂",\n        "target": "唐嫣",\n        "label": "密友"\n      },\n      {\n        "source": "杨幂",\n        "target": "亲幂关系Close to Me",\n        "label": "专辑名"\n      }\n    ]\n  },\n  "郭采洁": {\n    "nodes": [\n      {\n        "name": "郭采洁",\n        "radius": 80\n      },\n      {\n        "name": "无敌珊宝妹",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/郭采洁/无敌珊宝妹.jpg",\n        "action": "detail/郭采洁/作品/无敌珊宝妹"\n      },\n      {\n        "name": "杨佑宁",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/郭采洁/杨佑宁.jpg",\n        "action": "detail/郭采洁/人脉/杨佑宁"\n      },\n      {\n        "name": "一页台北",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/郭采洁/一页台北.jpg",\n        "action": "detail/郭采洁/作品/一页台北"\n      },\n      {\n        "name": "陈怡蓉",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/郭采洁/陈怡蓉.jpg",\n        "action": "detail/郭采洁/人脉/陈怡蓉"\n      },\n      {\n        "name": "隐形超人",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/郭采洁/隐形超人.jpg",\n        "action": "detail/郭采洁/作品/隐形超人"\n      },\n      {\n        "name": "郑元畅",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/郭采洁/郑元畅.jpg",\n        "action": "detail/郭采洁/人脉/郑元畅"\n      },\n      {\n        "name": "向前走向爱走",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/郭采洁/向前走向爱走.jpg",\n        "action": "detail/郭采洁/作品/向前走向爱走"\n      }\n    ],\n    "edges": [\n      {\n        "source": "郭采洁",\n        "target": "无敌珊宝妹",\n        "label": "电视剧"\n      },\n      {\n        "source": "郭采洁",\n        "target": "杨佑宁",\n        "label": "男友"\n      },\n      {\n        "source": "郭采洁",\n        "target": "一页台北",\n        "label": "电影"\n      },\n      {\n        "source": "郭采洁",\n        "target": "陈怡蓉",\n        "label": "搭档"\n      },\n      {\n        "source": "郭采洁",\n        "target": "隐形超人",\n        "label": "专辑名"\n      },\n      {\n        "source": "郭采洁",\n        "target": "郑元畅",\n        "label": "搭档"\n      },\n      {\n        "source": "郭采洁",\n        "target": "向前走向爱走",\n        "label": "电视剧"\n      }\n    ]\n  },\n  "郭碧婷": {\n    "nodes": [\n      {\n        "name": "郭碧婷",\n        "radius": 80\n      },\n      {\n        "name": "金色年华",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/郭碧婷/金色年华.jpg",\n        "action": "detail/郭碧婷/作品/金色年华"\n      },\n      {\n        "name": "杨子姗",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/郭碧婷/杨子姗.jpg",\n        "action": "detail/郭碧婷/人脉/杨子姗"\n      },\n      {\n        "name": "假如没有你",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/郭碧婷/假如没有你.jpg",\n        "action": "detail/郭碧婷/作品/假如没有你"\n      },\n      {\n        "name": "林孝谦",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/郭碧婷/林孝谦.jpg",\n        "action": "detail/郭碧婷/人脉/林孝谦"\n      },\n      {\n        "name": "一线钟情",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/郭碧婷/一线钟情.jpg",\n        "action": "detail/郭碧婷/作品/一线钟情"\n      },\n      {\n        "name": "陈匡怡",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/郭碧婷/陈匡怡.jpg",\n        "action": "detail/郭碧婷/人脉/陈匡怡"\n      },\n      {\n        "name": "街角的小王子",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/郭碧婷/街角的小王子.jpg",\n        "action": "detail/郭碧婷/作品/街角的小王子"\n      }\n    ],\n    "edges": [\n      {\n        "source": "郭碧婷",\n        "target": "金色年华",\n        "label": "电视剧"\n      },\n      {\n        "source": "郭碧婷",\n        "target": "杨子姗",\n        "label": "好友"\n      },\n      {\n        "source": "郭碧婷",\n        "target": "假如没有你",\n        "label": "电影"\n      },\n      {\n        "source": "郭碧婷",\n        "target": "林孝谦",\n        "label": "好友"\n      },\n      {\n        "source": "郭碧婷",\n        "target": "一线钟情",\n        "label": "爱情微剧"\n      },\n      {\n        "source": "郭碧婷",\n        "target": "陈匡怡",\n        "label": "好友"\n      },\n      {\n        "source": "郭碧婷",\n        "target": "街角的小王子",\n        "label": "电影"\n      }\n    ]\n  },\n  "谢依霖": {\n    "nodes": [\n      {\n        "name": "谢依霖",\n        "radius": 80\n      },\n      {\n        "name": "我为相亲狂",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/谢依霖/我为相亲狂.jpg",\n        "action": "detail/谢依霖/作品/我为相亲狂"\n      },\n      {\n        "name": "陈学冬",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/谢依霖/陈学冬.jpg",\n        "action": "detail/谢依霖/人脉/陈学冬"\n      },\n      {\n        "name": "我的男男男男朋友",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/谢依霖/我的男男男男朋友.jpg",\n        "action": "detail/谢依霖/作品/我的男男男男朋友"\n      },\n      {\n        "name": "撒娇女人最好命",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/谢依霖/撒娇女人最好命.jpg",\n        "action": "detail/谢依霖/作品/撒娇女人最好命"\n      },\n      {\n        "name": "钱多多炼爱记",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/谢依霖/钱多多炼爱记.jpg",\n        "action": "detail/谢依霖/作品/钱多多炼爱记"\n      }\n    ],\n    "edges": [\n      {\n        "source": "谢依霖",\n        "target": "我为相亲狂",\n        "label": "电影"\n      },\n      {\n        "source": "谢依霖",\n        "target": "陈学冬",\n        "label": "好友"\n      },\n      {\n        "source": "谢依霖",\n        "target": "我的男男男男朋友",\n        "label": "电影"\n      },\n      {\n        "source": "谢依霖",\n        "target": "撒娇女人最好命",\n        "label": "电影"\n      },\n      {\n        "source": "谢依霖",\n        "target": "钱多多炼爱记",\n        "label": "电视剧"\n      }\n    ]\n  },\n  "柯震东": {\n    "nodes": [\n      {\n        "name": "柯震东",\n        "radius": 80\n      },\n      {\n        "name": "那些年我们一起追的女孩",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/柯震东/那些年我们一起追的女孩.jpg",\n        "action": "detail/柯震东/作品/那些年我们一起追的女孩"\n      },\n      {\n        "name": "萧亚轩",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/柯震东/萧亚轩.jpg",\n        "action": "detail/柯震东/人脉/萧亚轩"\n      },\n      {\n        "name": "这一刻，爱吧",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/柯震东/这一刻，爱吧.jpg",\n        "action": "detail/柯震东/作品/这一刻，爱吧"\n      },\n      {\n        "name": "白百合",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/柯震东/白百合.jpg",\n        "action": "detail/柯震东/人脉/白百合"\n      },\n      {\n        "name": "在一起",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/柯震东/在一起.jpg",\n        "action": "detail/柯震东/作品/在一起"\n      },\n      {\n        "name": "郭书瑶",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/柯震东/郭书瑶.jpg",\n        "action": "detail/柯震东/人脉/郭书瑶"\n      },\n      {\n        "name": "有话直说",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/柯震东/有话直说.jpg",\n        "action": "detail/柯震东/作品/有话直说"\n      }\n    ],\n    "edges": [\n      {\n        "source": "柯震东",\n        "target": "那些年我们一起追的女孩",\n        "label": "电影"\n      },\n      {\n        "source": "柯震东",\n        "target": "萧亚轩",\n        "label": "旧爱"\n      },\n      {\n        "source": "柯震东",\n        "target": "这一刻，爱吧",\n        "label": "电影"\n      },\n      {\n        "source": "柯震东",\n        "target": "白百合",\n        "label": "搭档"\n      },\n      {\n        "source": "柯震东",\n        "target": "在一起",\n        "label": "电影"\n      },\n      {\n        "source": "柯震东",\n        "target": "郭书瑶",\n        "label": "搭档"\n      },\n      {\n        "source": "柯震东",\n        "target": "有话直说",\n        "label": "专辑名"\n      }\n    ]\n  },\n  "陈学冬": {\n    "nodes": [\n      {\n        "name": "陈学冬",\n        "radius": 80\n      },\n      {\n        "name": "小时代",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/陈学冬/小时代.jpg",\n        "action": "detail/陈学冬/作品/小时代"\n      },\n      {\n        "name": "谢依霖",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/陈学冬/谢依霖.jpg",\n        "action": "detail/陈学冬/人脉/谢依霖"\n      },\n      {\n        "name": "小时代·青木时代",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/陈学冬/小时代·青木时代.jpg",\n        "action": "detail/陈学冬/作品/小时代·青木时代"\n      },\n      {\n        "name": "李晨",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/陈学冬/李晨.jpg",\n        "action": "detail/陈学冬/人脉/李晨"\n      },\n      {\n        "name": "小时代·刺金时代",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/陈学冬/小时代·刺金时代.jpg",\n        "action": "detail/陈学冬/作品/小时代·刺金时代"\n      },\n      {\n        "name": "李悦铭",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/陈学冬/李悦铭.jpg",\n        "action": "detail/陈学冬/人脉/李悦铭"\n      },\n      {\n        "name": "小时代之折纸时代",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/陈学冬/小时代之折纸时代.jpg",\n        "action": "detail/陈学冬/作品/小时代之折纸时代"\n      }\n    ],\n    "edges": [\n      {\n        "source": "陈学冬",\n        "target": "小时代",\n        "label": "电影"\n      },\n      {\n        "source": "陈学冬",\n        "target": "谢依霖",\n        "label": "好友"\n      },\n      {\n        "source": "陈学冬",\n        "target": "小时代·青木时代",\n        "label": "电影"\n      },\n      {\n        "source": "陈学冬",\n        "target": "李晨",\n        "label": "好友"\n      },\n      {\n        "source": "陈学冬",\n        "target": "小时代·刺金时代",\n        "label": "电影"\n      },\n      {\n        "source": "陈学冬",\n        "target": "李悦铭",\n        "label": "好友"\n      },\n      {\n        "source": "陈学冬",\n        "target": "小时代之折纸时代",\n        "label": "电视剧"\n      }\n    ]\n  },\n  "锦荣": {\n    "nodes": [\n      {\n        "name": "锦荣",\n        "radius": 80\n      },\n      {\n        "name": "宝岛双雄",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/锦荣/宝岛双雄.jpg",\n        "action": "detail/锦荣/作品/宝岛双雄"\n      },\n      {\n        "name": "蔡依林",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/锦荣/蔡依林.jpg",\n        "action": "detail/锦荣/人脉/蔡依林"\n      },\n      {\n        "name": "对不起，我爱你",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/锦荣/对不起，我爱你.jpg",\n        "action": "detail/锦荣/作品/对不起，我爱你"\n      },\n      {\n        "name": "温心",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/锦荣/温心.jpg",\n        "action": "detail/锦荣/人脉/温心"\n      },\n      {\n        "name": "粉红女郎电影",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/锦荣/粉红女郎电影.jpg",\n        "action": "detail/锦荣/作品/粉红女郎电影"\n      },\n      {\n        "name": "夏雨",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/锦荣/夏雨.jpg",\n        "action": "detail/锦荣/人脉/夏雨"\n      },\n      {\n        "name": "玩爱之徒",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/锦荣/玩爱之徒.jpg",\n        "action": "detail/锦荣/作品/玩爱之徒"\n      }\n    ],\n    "edges": [\n      {\n        "source": "锦荣",\n        "target": "宝岛双雄",\n        "label": "电影"\n      },\n      {\n        "source": "锦荣",\n        "target": "蔡依林",\n        "label": "绯闻女友"\n      },\n      {\n        "source": "锦荣",\n        "target": "对不起，我爱你",\n        "label": "电影"\n      },\n      {\n        "source": "锦荣",\n        "target": "温心",\n        "label": "搭档"\n      },\n      {\n        "source": "锦荣",\n        "target": "粉红女郎电影",\n        "label": "电影"\n      },\n      {\n        "source": "锦荣",\n        "target": "夏雨",\n        "label": "搭档"\n      },\n      {\n        "source": "锦荣",\n        "target": "玩爱之徒",\n        "label": "单曲"\n      }\n    ]\n  },\n  "姜潮": {\n    "nodes": [\n      {\n        "name": "姜潮",\n        "radius": 80\n      },\n      {\n        "name": "落跑甜心",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/姜潮/落跑甜心.jpg",\n        "action": "detail/姜潮/作品/落跑甜心"\n      },\n      {\n        "name": "谈莉娜",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/姜潮/谈莉娜.jpg",\n        "action": "detail/姜潮/人脉/谈莉娜"\n      },\n      {\n        "name": "夏日甜心",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/姜潮/夏日甜心.jpg",\n        "action": "detail/姜潮/作品/夏日甜心"\n      },\n      {\n        "name": "莫熙儿",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/姜潮/莫熙儿.jpg",\n        "action": "detail/姜潮/人脉/莫熙儿"\n      },\n      {\n        "name": "青春荷尔蒙",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/姜潮/青春荷尔蒙.jpg",\n        "action": "detail/姜潮/作品/青春荷尔蒙"\n      },\n      {\n        "name": "付梦妮",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/姜潮/付梦妮.jpg",\n        "action": "detail/姜潮/人脉/付梦妮"\n      },\n      {\n        "name": "成都一夜",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/姜潮/成都一夜.jpg",\n        "action": "detail/姜潮/作品/成都一夜"\n      }\n    ],\n    "edges": [\n      {\n        "source": "姜潮",\n        "target": "落跑甜心",\n        "label": "电视剧"\n      },\n      {\n        "source": "姜潮",\n        "target": "谈莉娜",\n        "label": "搭档"\n      },\n      {\n        "source": "姜潮",\n        "target": "夏日甜心",\n        "label": "电视剧"\n      },\n      {\n        "source": "姜潮",\n        "target": "莫熙儿",\n        "label": "搭档"\n      },\n      {\n        "source": "姜潮",\n        "target": "青春荷尔蒙",\n        "label": "电影"\n      },\n      {\n        "source": "姜潮",\n        "target": "付梦妮",\n        "label": "搭档"\n      },\n      {\n        "source": "姜潮",\n        "target": "成都一夜",\n        "label": "微电影"\n      }\n    ]\n  },\n  "任佑明": {\n    "nodes": [\n      {\n        "name": "任佑明",\n        "radius": 80\n      },\n      {\n        "name": "寂寞寂寞就好",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/任佑明/寂寞寂寞就好.jpg",\n        "action": "detail/任佑明/作品/寂寞寂寞就好"\n      },\n      {\n        "name": "萧亚轩",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/任佑明/萧亚轩.jpg",\n        "action": "detail/任佑明/人脉/萧亚轩"\n      },\n      {\n        "name": "潘朵拉",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/任佑明/潘朵拉.jpg",\n        "action": "detail/任佑明/作品/潘朵拉"\n      },\n      {\n        "name": "张韶涵",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/任佑明/张韶涵.jpg",\n        "action": "detail/任佑明/人脉/张韶涵"\n      },\n      {\n        "name": "愚人的国度",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/任佑明/愚人的国度.jpg",\n        "action": "detail/任佑明/作品/愚人的国度"\n      },\n      {\n        "name": "孙燕姿",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/任佑明/孙燕姿.jpg",\n        "action": "detail/任佑明/人脉/孙燕姿"\n      },\n      {\n        "name": "白白的",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/任佑明/白白的.jpg",\n        "action": "detail/任佑明/作品/白白的"\n      }\n    ],\n    "edges": [\n      {\n        "source": "任佑明",\n        "target": "寂寞寂寞就好",\n        "label": "MV"\n      },\n      {\n        "source": "任佑明",\n        "target": "萧亚轩",\n        "label": "搭档"\n      },\n      {\n        "source": "任佑明",\n        "target": "潘朵拉",\n        "label": "MV"\n      },\n      {\n        "source": "任佑明",\n        "target": "张韶涵",\n        "label": "搭档"\n      },\n      {\n        "source": "任佑明",\n        "target": "愚人的国度",\n        "label": "MV"\n      },\n      {\n        "source": "任佑明",\n        "target": "孙燕姿",\n        "label": "搭档"\n      },\n      {\n        "source": "任佑明",\n        "target": "白白的",\n        "label": "MV"\n      }\n    ]\n  },\n  "李贤宰": {\n    "nodes": [\n      {\n        "name": "李贤宰",\n        "radius": 80\n      },\n      {\n        "name": "Be Mate",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/李贤宰/Be Mate.jpg",\n        "action": "detail/李贤宰/作品/Be Mate"\n      },\n      {\n        "name": "金泰亨",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/李贤宰/金泰亨.jpg",\n        "action": "detail/李贤宰/人脉/金泰亨"\n      },\n      {\n        "name": "闭嘴！花美男乐队",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/李贤宰/闭嘴！花美男乐队.jpg",\n        "action": "detail/李贤宰/作品/闭嘴！花美男乐队"\n      },\n      {\n        "name": "郭熙成",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/李贤宰/郭熙成.jpg",\n        "action": "detail/李贤宰/人脉/郭熙成"\n      },\n      {\n        "name": "职场之神",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/李贤宰/职场之神.jpg",\n        "action": "detail/李贤宰/作品/职场之神"\n      },\n      {\n        "name": "林宪日",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/李贤宰/林宪日.jpg",\n        "action": "detail/李贤宰/人脉/林宪日"\n      },\n      {\n        "name": "With Mate",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/李贤宰/With Mate.jpg",\n        "action": "detail/李贤宰/作品/With Mate"\n      }\n    ],\n    "edges": [\n      {\n        "source": "李贤宰",\n        "target": "Be Mate",\n        "label": "专辑名"\n      },\n      {\n        "source": "李贤宰",\n        "target": "金泰亨",\n        "label": "搭档"\n      },\n      {\n        "source": "李贤宰",\n        "target": "闭嘴！花美男乐队",\n        "label": "电视剧"\n      },\n      {\n        "source": "李贤宰",\n        "target": "郭熙成",\n        "label": "搭档"\n      },\n      {\n        "source": "李贤宰",\n        "target": "职场之神",\n        "label": "电视剧"\n      },\n      {\n        "source": "李贤宰",\n        "target": "林宪日",\n        "label": "搭档"\n      },\n      {\n        "source": "李贤宰",\n        "target": "With Mate",\n        "label": "专辑名"\n      },\n      {\n        "source": "李贤宰",\n        "target": " ",\n        "label": ""\n      }\n    ]\n  },\n  "商侃": {\n    "nodes": [\n      {\n        "name": "商侃",\n        "radius": 80\n      },\n      {\n        "name": "美丽的事",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/商侃/美丽的事.jpg",\n        "action": "detail/商侃/作品/美丽的事"\n      }\n    ],\n    "edges": [\n      {\n        "source": "商侃",\n        "target": "美丽的事",\n        "label": "电视剧"\n      }\n    ]\n  },\n  "王琳": {\n    "nodes": [\n      {\n        "name": "王琳",\n        "radius": 80\n      },\n      {\n        "name": "情深深雨蒙蒙",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/王琳/情深深雨蒙蒙.jpg",\n        "action": "detail/王琳/作品/情深深雨蒙蒙"\n      },\n      {\n        "name": "赵薇",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/王琳/赵薇.jpg",\n        "action": "detail/王琳/人脉/赵薇"\n      },\n      {\n        "name": "宫锁连城",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/王琳/宫锁连城.jpg",\n        "action": "detail/王琳/作品/宫锁连城"\n      },\n      {\n        "name": "林心如",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/王琳/林心如.jpg",\n        "action": "detail/王琳/人脉/林心如"\n      },\n      {\n        "name": "倾世皇妃",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/王琳/倾世皇妃.jpg",\n        "action": "detail/王琳/作品/倾世皇妃"\n      },\n      {\n        "name": "白冰",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/王琳/白冰.jpg",\n        "action": "detail/王琳/人脉/白冰"\n      },\n      {\n        "name": "美人无泪",\n        "radius": 35,\n        "image": "imgs/小时代演员作品图/王琳/美人无泪.jpg",\n        "action": "detail/王琳/作品/美人无泪"\n      }\n    ],\n    "edges": [\n      {\n        "source": "王琳",\n        "target": "情深深雨蒙蒙",\n        "label": "电视剧"\n      },\n      {\n        "source": "王琳",\n        "target": "赵薇",\n        "label": "搭档"\n      },\n      {\n        "source": "王琳",\n        "target": "宫锁连城",\n        "label": "电视剧"\n      },\n      {\n        "source": "王琳",\n        "target": "林心如",\n        "label": "搭档"\n      },\n      {\n        "source": "王琳",\n        "target": "倾世皇妃",\n        "label": "电视剧"\n      },\n      {\n        "source": "王琳",\n        "target": "白冰",\n        "label": "搭档"\n      },\n      {\n        "source": "王琳",\n        "target": "美人无泪",\n        "label": "电视剧"\n      }\n    ]\n  },\n  "郭敬明": {\n    "nodes": [\n      {\n        "name": "郭敬明",\n        "radius": 80\n      },\n      {\n        "name": "小时代",\n        "radius": 50,\n        "image": "imgs/小时代演员作品图/郭敬明/小时代.jpg",\n        "action": "detail/郭敬明/作品/小时代"\n      },\n      {\n        "name": "韩寒",\n        "radius": 50,\n        "image": "imgs/小时代人脉图/郭敬明/韩寒.jpg",\n        "action": "detail/郭敬明/人脉/韩寒"\n      },\n      {\n        "name": "小时代-青木时代",\n        "radius": 45,\n        "image": "imgs/小时代演员作品图/郭敬明/小时代-青木时代.jpg",\n        "action": "detail/郭敬明/作品/小时代-青木时代"\n      },\n      {\n        "name": "郭采洁",\n        "radius": 45,\n        "image": "imgs/小时代人脉图/郭敬明/郭采洁.jpg",\n        "action": "detail/郭敬明/人脉/郭采洁"\n      },\n      {\n        "name": "小时代-刺金时代",\n        "radius": 40,\n        "image": "imgs/小时代演员作品图/郭敬明/小时代-刺金时代.jpg",\n        "action": "detail/郭敬明/作品/小时代-刺金时代"\n      },\n      {\n        "name": "杨幂",\n        "radius": 40,\n        "image": "imgs/小时代人脉图/郭敬明/杨幂.jpg",\n        "action": "detail/郭敬明/人脉/杨幂"\n      }\n    ],\n    "edges": [\n      {\n        "source": "郭敬明",\n        "target": "小时代",\n        "label": "电影"\n      },\n      {\n        "source": "郭敬明",\n        "target": "韩寒",\n        "label": "竞争对手"\n      },\n      {\n        "source": "郭敬明",\n        "target": "小时代-青木时代",\n        "label": "电影"\n      },\n      {\n        "source": "郭敬明",\n        "target": "郭采洁",\n        "label": "好友"\n      },\n      {\n        "source": "郭敬明",\n        "target": "小时代-刺金时代",\n        "label": "电影"\n      },\n      {\n        "source": "郭敬明",\n        "target": "杨幂",\n        "label": "好友"\n      }\n    ]\n  }\n}'}),define("zrender/lib/excanvas",["require"],function(e){return document.createElement("canvas").getContext?G_vmlCanvasManager=!1:function(){function f(){return this.context_||(this.context_=new I(this))}function c(e,t,n){var r=l.call(arguments,2);return function(){return e.apply(t,r.concat(l.call(arguments)))}}function h(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function p(e,t,n){e.namespaces[t]||e.namespaces.add(t,n,"#default#VML")}function d(e){p(e,"g_vml_","urn:schemas-microsoft-com:vml"),p(e,"g_o_","urn:schemas-microsoft-com:office:office");if(!e.styleSheets.ex_canvas_){var t=e.createStyleSheet();t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function m(e){var t=e.srcElement;switch(e.propertyName){case"width":t.getContext().clearRect(),t.style.width=t.attributes.width.nodeValue+"px",t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect(),t.style.height=t.attributes.height.nodeValue+"px",t.firstChild.style.height=t.clientHeight+"px"}}function g(e){var t=e.srcElement;t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function E(){return[[1,0,0],[0,1,0],[0,0,1]]}function S(e,t){var n=E();for(var r=0;r<3;r++)for(var i=0;i<3;i++){var s=0;for(var o=0;o<3;o++)s+=e[r][o]*t[o][i];n[r][i]=s}return n}function x(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_,t.lineScale_=e.lineScale_}function N(e){var t=e.indexOf("(",3),n=e.indexOf(")",t+1),r=e.substring(t+1,n).split(",");if(r.length!=4||e.charAt(3)!="a")r[3]=1;return r}function C(e){return parseFloat(e)/100}function k(e,t,n){return Math.min(n,Math.max(t,e))}function L(e){var t,n,r,i,s,o;i=parseFloat(e[0])/360%360,i<0&&i++,s=k(C(e[1]),0,1),o=k(C(e[2]),0,1);if(s==0)t=n=r=o;else{var u=o<.5?o*(1+s):o+s-o*s,a=2*o-u;t=A(a,u,i+1/3),n=A(a,u,i),r=A(a,u,i-1/3)}return"#"+y[Math.floor(t*255)]+y[Math.floor(n*255)]+y[Math.floor(r*255)]}function A(e,t,n){return n<0&&n++,n>1&&n--,6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function M(e){if(e in O)return O[e];var t,n=1;e=String(e);if(e.charAt(0)=="#")t=e;else if(/^rgb/.test(e)){var r=N(e),t="#",i;for(var s=0;s<3;s++)r[s].indexOf("%")!=-1?i=Math.floor(C(r[s])*255):i=+r[s],t+=y[k(i,0,255)];n=+r[3]}else if(/^hsl/.test(e)){var r=N(e);t=L(r),n=r[3]}else t=T[e]||e;return O[e]={color:t,alpha:n}}function P(e){if(D[e])return D[e];var t=document.createElement("div"),n=t.style,r;try{n.font=e,r=n.fontFamily.split(",")[0]}catch(i){}return D[e]={style:n.fontStyle||_.style,variant:n.fontVariant||_.variant,weight:n.fontWeight||_.weight,size:n.fontSize||_.size,family:r||_.family}}function H(e,t){var n={};for(var r in e)n[r]=e[r];var i=parseFloat(t.currentStyle.fontSize),s=parseFloat(e.size);return typeof e.size=="number"?n.size=e.size:e.size.indexOf("px")!=-1?n.size=s:e.size.indexOf("em")!=-1?n.size=i*s:e.size.indexOf("%")!=-1?n.size=i/100*s:e.size.indexOf("pt")!=-1?n.size=s/.75:n.size=i,n}function B(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+"px '"+e.family+"'"}function F(e){return j[e]||"square"}function I(e){this.m_=E(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=o*1,this.globalAlpha=1,this.font="12px 微软雅黑",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=e;var t="width:"+e.clientWidth+"px;height:"+e.clientHeight+"px;overflow:hidden;position:absolute",n=e.ownerDocument.createElement("div");n.style.cssText=t,e.appendChild(n);var r=n.cloneNode(!1);r.style.backgroundColor="#fff",r.style.filter="alpha(opacity=0)",e.appendChild(r),this.element_=n,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function R(e,t,n,r){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:n.x,cp2y:n.y,x:r.x,y:r.y}),e.currentX_=r.x,e.currentY_=r.y}function U(e,t){var n=M(e.strokeStyle),r=n.color,i=n.alpha*e.globalAlpha,s=e.lineScale_*e.lineWidth;s<1&&(i*=s),t.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',e.lineJoin,'"',' miterlimit="',e.miterLimit,'"',' endcap="',F(e.lineCap),'"',' weight="',s,'px"',' color="',r,'" />')}function z(t,n,r,i){var s=t.fillStyle,u=t.arcScaleX_,a=t.arcScaleY_,f=i.x-r.x,l=i.y-r.y;if(s instanceof $){var c=0,h={x:0,y:0},p=0,d=1;if(s.type_=="gradient"){var v=s.x0_/u,m=s.y0_/a,g=s.x1_/u,y=s.y1_/a,b=W(t,v,m),w=W(t,g,y),E=w.x-b.x,S=w.y-b.y;c=Math.atan2(E,S)*180/Math.PI,c<0&&(c+=360),c<1e-6&&(c=0)}else{var b=W(t,s.x0_,s.y0_);h={x:(b.x-r.x)/f,y:(b.y-r.y)/l},f/=u*o,l/=a*o;var x=e.max(f,l);p=2*s.r0_/x,d=2*s.r1_/x-p}var T=s.colors_;T.sort(function(e,t){return e.offset-t.offset});var N=T.length,C=T[0].color,k=T[N-1].color,L=T[0].alpha*t.globalAlpha,A=T[N-1].alpha*t.globalAlpha,O=[];for(var _=0;_<N;_++){var D=T[_];O.push(D.offset*d+p+" "+D.color)}n.push('<g_vml_:fill type="',s.type_,'"',' method="none" focus="100%"',' color="',C,'"',' color2="',k,'"',' colors="',O.join(","),'"',' opacity="',A,'"',' g_o_:opacity2="',L,'"',' angle="',c,'"',' focusposition="',h.x,",",h.y,'" />')}else if(s instanceof J){if(f&&l){var P=-r.x,H=-r.y;n.push("<g_vml_:fill",' position="',P/f*u*u,",",H/l*a*a,'"',' type="tile"',' src="',s.src_,'" />')}}else{var B=M(t.fillStyle),j=B.color,F=B.alpha*t.globalAlpha;n.push('<g_vml_:fill color="',j,'" opacity="',F,'" />')}}function W(e,t,n){var r=e.m_;return{x:o*(t*r[0][0]+n*r[1][0]+r[2][0])-u,y:o*(t*r[0][1]+n*r[1][1]+r[2][1])-u}}function X(e){return isFinite(e[0][0])&&isFinite(e[0][1])&&isFinite(e[1][0])&&isFinite(e[1][1])&&isFinite(e[2][0])&&isFinite(e[2][1])}function V(e,t,n){if(!X(t))return;e.m_=t;if(n){var r=t[0][0]*t[1][1]-t[0][1]*t[1][0];e.lineScale_=s(i(r))}}function $(e){this.type_=e,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function J(e,t){Q(e);switch(t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:K("SYNTAX_ERR")}this.src_=e.src,this.width_=e.width,this.height_=e.height}function K(e){throw new G(e)}function Q(e){(!e||e.nodeType!=1||e.tagName!="IMG")&&K("TYPE_MISMATCH_ERR"),e.readyState!="complete"&&K("INVALID_STATE_ERR")}function G(e){this.code=this[e],this.message=e+": DOM Exception "+this.code}var e=Math,t=e.round,n=e.sin,r=e.cos,i=e.abs,s=e.sqrt,o=10,u=o/2,a=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],l=Array.prototype.slice;d(document);var v={init:function(e){var t=e||document;t.createElement("canvas"),t.attachEvent("onreadystatechange",c(this.init_,this,t))},init_:function(e){var t=e.getElementsByTagName("canvas");for(var n=0;n<t.length;n++)this.initElement(t[n])},initElement:function(e){if(!e.getContext){e.getContext=f,d(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",m),e.attachEvent("onresize",g);var t=e.attributes;t.width&&t.width.specified?e.style.width=t.width.nodeValue+"px":e.width=e.clientWidth,t.height&&t.height.specified?e.style.height=t.height.nodeValue+"px":e.height=e.clientHeight}return e}};v.init();var y=[];for(var b=0;b<16;b++)for(var w=0;w<16;w++)y[b*16+w]=b.toString(16)+w.toString(16);var T={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},O={},_={style:"normal",variant:"normal",weight:"normal",size:12,family:"微软雅黑"},D={},j={butt:"flat",round:"round"},q=I.prototype;q.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},q.beginPath=function(){this.currentPath_=[]},q.moveTo=function(e,t){var n=W(this,e,t);this.currentPath_.push({type:"moveTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},q.lineTo=function(e,t){var n=W(this,e,t);this.currentPath_.push({type:"lineTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},q.bezierCurveTo=function(e,t,n,r,i,s){var o=W(this,i,s),u=W(this,e,t),a=W(this,n,r);R(this,u,a,o)},q.quadraticCurveTo=function(e,t,n,r){var i=W(this,e,t),s=W(this,n,r),o={x:this.currentX_+2/3*(i.x-this.currentX_),y:this.currentY_+2/3*(i.y-this.currentY_)},u={x:o.x+(s.x-this.currentX_)/3,y:o.y+(s.y-this.currentY_)/3};R(this,o,u,s)},q.arc=function(e,t,i,s,a,f){i*=o;var l=f?"at":"wa",c=e+r(s)*i-u,h=t+n(s)*i-u,p=e+r(a)*i-u,d=t+n(a)*i-u;c==p&&!f&&(c+=.125);var v=W(this,e,t),m=W(this,c,h),g=W(this,p,d);this.currentPath_.push({type:l,x:v.x,y:v.y,radius:i,xStart:m.x,yStart:m.y,xEnd:g.x,yEnd:g.y})},q.rect=function(e,t,n,r){this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath()},q.strokeRect=function(e,t,n,r){var i=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath(),this.stroke(),this.currentPath_=i},q.fillRect=function(e,t,n,r){var i=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath(),this.fill(),this.currentPath_=i},q.createLinearGradient=function(e,t,n,r){var i=new $("gradient");return i.x0_=e,i.y0_=t,i.x1_=n,i.y1_=r,i},q.createRadialGradient=function(e,t,n,r,i,s){var o=new $("gradientradial");return o.x0_=e,o.y0_=t,o.r0_=n,o.x1_=r,o.y1_=i,o.r1_=s,o},q.drawImage=function(n,r){var i,s,u,a,f,l,c,h,p=n.runtimeStyle.width,d=n.runtimeStyle.height;n.runtimeStyle.width="auto",n.runtimeStyle.height="auto";var v=n.width,m=n.height;n.runtimeStyle.width=p,n.runtimeStyle.height=d;if(arguments.length==3)i=arguments[1],s=arguments[2],f=l=0,c=u=v,h=a=m;else if(arguments.length==5)i=arguments[1],s=arguments[2],u=arguments[3],a=arguments[4],f=l=0,c=v,h=m;else{if(arguments.length!=9)throw Error("Invalid number of arguments");f=arguments[1],l=arguments[2],c=arguments[3],h=arguments[4],i=arguments[5],s=arguments[6],u=arguments[7],a=arguments[8]}var g=W(this,i,s),y=c/2,b=h/2,w=[],E=10,S=10,x=scaleY=1;w.push(" <g_vml_:group",' coordsize="',o*E,",",o*S,'"',' coordorigin="0,0"',' style="width:',E,"px;height:",S,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var T=[];x=Math.sqrt(this.m_[0][0]*this.m_[0][0]+this.m_[0][1]*this.m_[0][1]),scaleY=Math.sqrt(this.m_[1][0]*this.m_[1][0]+this.m_[1][1]*this.m_[1][1]),T.push("M11=",this.m_[0][0]/x,",","M12=",this.m_[1][0]/scaleY,",","M21=",this.m_[0][1]/x,",","M22=",this.m_[1][1]/scaleY,",","Dx=",t(g.x/o),",","Dy=",t(g.y/o),"");var N=g,C=W(this,i+u,s),k=W(this,i,s+a),L=W(this,i+u,s+a);N.x=e.max(N.x,C.x,k.x,L.x),N.y=e.max(N.y,C.y,k.y,L.y),w.push("padding:0 ",t(N.x/o),"px ",t(N.y/o),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",T.join(""),", sizingmethod='clip');")}else w.push("top:",t(g.y/o),"px;left:",t(g.x/o),"px;");w.push(' ">'),(f||l)&&w.push('<div style="overflow: hidden; width:',Math.ceil((u+f*u/c)*x),"px;"," height:",Math.ceil((a+l*a/h)*scaleY),"px;"," filter:progid:DxImageTransform.Microsoft.Matrix(Dx=",-f*u/c*x,",Dy=",-l*a/h*scaleY,');">'),w.push('<div style="width:',Math.round(x*v*u/c),"px;"," height:",Math.round(scaleY*m*a/h),"px;"," filter:"),this.globalAlpha<1&&w.push(" progid:DXImageTransform.Microsoft.Alpha(opacity="+this.globalAlpha*100+")"),w.push(" progid:DXImageTransform.Microsoft.AlphaImageLoader(src=",n.src,',sizingMethod=scale)">'),(f||l)&&w.push("</div>"),w.push("</div></div>"),this.element_.insertAdjacentHTML("BeforeEnd",w.join(""))},q.stroke=function(e){var n=[],r=!1,i=10,s=10;n.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',i,"px;height:",s,'px;"',' coordorigin="0,0"',' coordsize="',o*i,",",o*s,'"',' stroked="',!e,'"',' path="');var u=!1,a={x:null,y:null},f={x:null,y:null};for(var l=0;l<this.currentPath_.length;l++){var c=this.currentPath_[l],h;switch(c.type){case"moveTo":h=c,n.push(" m ",t(c.x),",",t(c.y));break;case"lineTo":n.push(" l ",t(c.x),",",t(c.y));break;case"close":n.push(" x "),c=null;break;case"bezierCurveTo":n.push(" c ",t(c.cp1x),",",t(c.cp1y),",",t(c.cp2x),",",t(c.cp2y),",",t(c.x),",",t(c.y));break;case"at":case"wa":n.push(" ",c.type," ",t(c.x-this.arcScaleX_*c.radius),",",t(c.y-this.arcScaleY_*c.radius)," ",t(c.x+this.arcScaleX_*c.radius),",",t(c.y+this.arcScaleY_*c.radius)," ",t(c.xStart),",",t(c.yStart)," ",t(c.xEnd),",",t(c.yEnd))}if(c){if(a.x==null||c.x<a.x)a.x=c.x;if(f.x==null||c.x>f.x)f.x=c.x;if(a.y==null||c.y<a.y)a.y=c.y;if(f.y==null||c.y>f.y)f.y=c.y}}n.push(' ">'),e?z(this,n,a,f):U(this,n),n.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",n.join(""))},q.fill=function(){this.stroke(!0)},q.closePath=function(){this.currentPath_.push({type:"close"})},q.save=function(){var e={};x(this,e),this.aStack_.push(e),this.mStack_.push(this.m_),this.m_=S(E(),this.m_)},q.restore=function(){this.aStack_.length&&(x(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},q.translate=function(e,t){var n=[[1,0,0],[0,1,0],[e,t,1]];V(this,S(n,this.m_),!1)},q.rotate=function(e){var t=r(e),i=n(e),s=[[t,i,0],[-i,t,0],[0,0,1]];V(this,S(s,this.m_),!1)},q.scale=function(e,t){this.arcScaleX_*=e,this.arcScaleY_*=t;var n=[[e,0,0],[0,t,0],[0,0,1]];V(this,S(n,this.m_),!0)},q.transform=function(e,t,n,r,i,s){var o=[[e,t,0],[n,r,0],[i,s,1]];V(this,S(o,this.m_),!0)},q.setTransform=function(e,t,n,r,i,s){var o=[[e,t,0],[n,r,0],[i,s,1]];V(this,o,!0)},q.drawText_=function(e,n,r,i,s){var u=this.m_,a=1e3,f=0,l=a,c={x:0,y:0},p=[],d=H(P(this.font),this.element_),v=B(d),m=this.element_.currentStyle,g=this.textAlign.toLowerCase();switch(g){case"left":case"center":case"right":break;case"end":g=m.direction=="ltr"?"right":"left";break;case"start":g=m.direction=="rtl"?"right":"left";break;default:g="left"}switch(this.textBaseline){case"hanging":case"top":c.y=d.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":c.y=-d.size/2.25}switch(g){case"right":f=a,l=.05;break;case"center":f=l=a/2}var y=W(this,n+c.x,r+c.y);p.push('<g_vml_:line from="',-f,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!s,'" stroked="',!!s,'" style="position:absolute;width:1px;height:1px;">'),s?U(this,p):z(this,p,{x:-f,y:0},{x:l,y:d.size});var b=u[0][0].toFixed(3)+","+u[1][0].toFixed(3)+","+u[0][1].toFixed(3)+","+u[1][1].toFixed(3)+",0,0",w=t(y.x/o)+","+t(y.y/o);p.push('<g_vml_:skew on="t" matrix="',b,'" ',' offset="',w,'" origin="',f,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',h(e),'" style="v-text-align:',g,";font:",h(v),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",p.join(""))},q.fillText=function(e,t,n,r){this.drawText_(e,t,n,r,!1)},q.strokeText=function(e,t,n,r){this.drawText_(e,t,n,r,!0)},q.measureText=function(e){if(!this.textMeasureEl_){var t='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",t),this.textMeasureEl_=this.element_.lastChild}var n=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(n.createTextNode(e)),{width:this.textMeasureEl_.offsetWidth}},q.clip=function(){},q.arcTo=function(){},q.createPattern=function(e,t){return new J(e,t)},$.prototype.addColorStop=function(e,t){t=M(t),this.colors_.push({offset:e,color:t.color,alpha:t.alpha})};var Y=G.prototype=new Error;Y.INDEX_SIZE_ERR=1,Y.DOMSTRING_SIZE_ERR=2,Y.HIERARCHY_REQUEST_ERR=3,Y.WRONG_DOCUMENT_ERR=4,Y.INVALID_CHARACTER_ERR=5,Y.NO_DATA_ALLOWED_ERR=6,Y.NO_MODIFICATION_ALLOWED_ERR=7,Y.NOT_FOUND_ERR=8,Y.NOT_SUPPORTED_ERR=9,Y.INUSE_ATTRIBUTE_ERR=10,Y.INVALID_STATE_ERR=11,Y.SYNTAX_ERR=12,Y.INVALID_MODIFICATION_ERR=13,Y.NAMESPACE_ERR=14,Y.INVALID_ACCESS_ERR=15,Y.VALIDATION_ERR=16,Y.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=v,CanvasRenderingContext2D=I,CanvasGradient=$,CanvasPattern=J,DOMException=G}(),G_vmlCanvasManager}),define("zrender/tool/util",["require","../lib/excanvas"],function(e){function n(e){if(typeof e=="object"&&e!==null){var r=e;if(e instanceof Array){r=[];for(var i=0,s=e.length;i<s;i++)r[i]=n(e[i])}else if(!t[Object.prototype.toString.call(e)]){r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=n(e[o]))}return r}return e}function r(e,n,r,s){if(n.hasOwnProperty(r))if(typeof e[r]=="object"&&!t[Object.prototype.toString.call(e[r])])i(e[r],n[r],s);else if(s||!(r in e))e[r]=n[r]}function i(e,t,n){for(var i in t)r(e,t,i,n);return e}function o(){if(!s){e("../lib/excanvas");if(G_vmlCanvasManager){var t=document.createElement("div");t.style.position="absolute",t.style.top="-1000px",document.body.appendChild(t),s=G_vmlCanvasManager.initElement(t).getContext("2d")}else s=document.createElement("canvas").getContext("2d")}return s}function p(){return a||(u=document.createElement("canvas"),f=u.width,l=u.height,a=u.getContext("2d")),a}function d(e,t){var n=100,r;e+c>f&&(f=e+c+n,u.width=f,r=!0),t+h>l&&(l=t+h+n,u.height=l,r=!0),e<-c&&(c=Math.ceil(-e/n)*n,f+=c,u.width=f,r=!0),t<-h&&(h=Math.ceil(-t/n)*n,l+=h,u.height=l,r=!0),r&&a.translate(c,h)}function v(){return{x:c,y:h}}function m(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function g(e,t){function r(){}var n=e.prototype;r.prototype=t.prototype,e.prototype=new r;for(var i in n)e.prototype[i]=n[i];e.constructor=e}var t={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},s,u,a,f,l,c=0,h=0;return{inherits:g,clone:n,merge:i,getContext:o,getPixelContext:p,getPixelOffset:v,adjustCanvasSize:d,indexOf:m}}),define("data/relation3",["require","./relation3.json","zrender/tool/util"],function(e){var t=JSON.parse(e("./relation3.json")),n=e("zrender/tool/util");return{actorRoleMap:{"杨幂":"林萧","锦荣":"宫洺","柯震东":"顾源","郭碧婷":"南湘","谢依霖":"唐宛如","姜潮":"席城","王琳":"叶传萍","陈学冬":"周崇光","商侃":"Kitty","李贤宰":"Neil","任佑明":"顾准","郭采洁":"顾里","杜天皓":"卫海"},get:function(e,r,i){var s=t[e];if(s){s=n.clone(s),s.nodes.push({name:"小时代 ",title:"返回",radius:45,position:[200,150],fixed:!0,image:"imgs/logo-back.png",action:"back/back"}),s.nodes.push({name:i.name,radius:45,image:i.image,position:[300,300],action:"back"}),s.edges.push({source:e,target:i.name,label:e=="郭敬明"?"小说作者":"扮演者",weight:10}),s.edges.push({source:i.name,target:"小时代 ",label:"小说角色",weight:10});for(var o=0;o<s.nodes.length;o++)s.nodes[o].name===e&&(s.nodes[o].image=r.image)}return s}}}),define("qtek/core/util",["require"],function(e){var t=0,n={genGUID:function(){return++t},relative2absolute:function(e,t){if(!t||e.match(/^\//))return e;var n=e.split("/"),r=t.split("/"),i=n[0];while(i==="."||i==="..")i===".."&&r.pop(),n.shift(),i=n[0];return r.join("/")+"/"+n.join("/")},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},defaults:function(e,t){if(t)for(var n in t)e[n]===undefined&&(e[n]=t[n]);return e},extendWithPropList:function(e,t,n){if(t)for(var r=0;r<n.length;r++){var i=n[r];e[i]=t[i]}return e},defaultsWithPropList:function(e,t,n){if(t)for(var r=0;r<n.length;r++){var i=n[r];e[i]===undefined&&(e[i]=t[i])}return e},each:function(e,t,n){if(!e||!t)return;if(e.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var s in e)e.hasOwnProperty(s)&&t.call(n,e[s],s,e)},isObject:function(e){return e===Object(e)},isArray:function(e){return e instanceof Array},isArrayLike:function(e){return e?e.length===+e.length:!1},clone:function(e){if(!n.isObject(e))return e;if(n.isArray(e))return e.slice();if(n.isArrayLike(e)){var t=new e.constructor(e.length);for(var r=0;r<e.length;r++)t[r]=e[r];return t}return n.extend({},e)}};return n}),define("qtek/core/mixin/derive",["require"],function(e){function t(e,t,i){typeof t=="object"&&(i=t,t=null);var s=this,o;if(!(e instanceof Function)){o=[];for(var u in e)e.hasOwnProperty(u)&&o.push(u)}var a=function(t){s.apply(this,arguments),e instanceof Function?n(this,e.call(this)):r(this,e,o);if(this.constructor===a){var i=a,u=a.__initializers__;for(var f=0;f<u.length;f++)u[f].apply(this,arguments)}};a.__super__=s,s.__initializers__?a.__initializers__=s.__initializers__.slice():a.__initializers__=[],t&&a.__initializers__.push(t);var f=function(){};return f.prototype=s.prototype,a.prototype=new f,a.prototype.constructor=a,n(a.prototype,i),a.derive=s.derive,a}function n(e,t){if(!t)return;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function r(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];e[i]=t[i]}}return{derive:t}}),define("qtek/core/mixin/notifier",[],function(){function e(e,t){this.action=e,this.context=t}var t={trigger:function(e){if(!this.hasOwnProperty("__handlers__"))return;if(!this.__handlers__.hasOwnProperty(e))return;var t=this.__handlers__[e],n=t.length,r=-1,i=arguments;switch(i.length){case 1:while(++r<n)t[r].action.call(t[r].context);return;case 2:while(++r<n)t[r].action.call(t[r].context,i[1]);return;case 3:while(++r<n)t[r].action.call(t[r].context,i[1],i[2]);return;case 4:while(++r<n)t[r].action.call(t[r].context,i[1],i[2],i[3]);return;case 5:while(++r<n)t[r].action.call(t[r].context,i[1],i[2],i[3],i[4]);return;default:while(++r<n)t[r].action.apply(t[r].context,Array.prototype.slice.call(i,1));return}},on:function(t,n,r){if(!t||!n)return;var i=this.__handlers__||(this.__handlers__={});if(!i[t])i[t]=[];else if(this.has(t,n))return;var s=new e(n,r||this);return i[t].push(s),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(this,arguments)}if(!e||!t)return;var r=this;return this.on(e,i,n)},before:function(e,t,n){if(!e||!t)return;return e="before"+e,this.on(e,t,n)},after:function(e,t,n){if(!e||!t)return;return e="after"+e,this.on(e,t,n)},success:function(e,t){return this.once("success",e,t)},error:function(e,t){return this.once("error",e,t)},off:function(e,t){var n=this.__handlers__||(this.__handlers__={});if(!t){n[e]=[];return}if(n[e]){var r=n[e],i=[];for(var s=0;s<r.length;s++)t&&r[s].action!==t&&i.push(r[s]);n[e]=i}return this},has:function(e,t){var n=this.__handlers__;if(!n||!n[e])return!1;var r=n[e];for(var i=0;i<r.length;i++)if(r[i].action===t)return!0}};return t}),define("qtek/core/Base",["require","./mixin/derive","./mixin/notifier","./util"],function(e){var t=e("./mixin/derive"),n=e("./mixin/notifier"),r=e("./util"),i=function(){this.__GUID__=r.genGUID()};return i.__initializers__=[function(e){r.extend(this,e)}],r.extend(i,t),r.extend(i.prototype,n),i}),define("qtek/core/glenum",[],function(){return{DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444}}),define("qtek/core/Cache",[],function(){var e=function(){this._contextId=0,this._caches=[],this._context={}};return e.prototype={use:function(e,t){this._caches[e]||(this._caches[e]={},t&&(this._caches[e]=t())),this._contextId=e,this._context=this._caches[e]},put:function(e,t){this._context[e]=t},get:function(e){return this._context[e]},dirty:function(e){e=e||"";var t="__dirty__"+e;this.put(t,!0)},dirtyAll:function(e){e=e||"";var t="__dirty__"+e;for(var n=0;n<this._caches.length;n++)this._caches[n]&&(this._caches[n][t]=!0)},fresh:function(e){e=e||"";var t="__dirty__"+e;this.put(t,!1)},freshAll:function(e){e=e||"";var t="__dirty__"+e;for(var n=0;n<this._caches.length;n++)this._caches[n]&&(this._caches[n][t]=!1)},isDirty:function(e){e=e||"";var t="__dirty__"+e;return!this._context.hasOwnProperty(t)||this._context[t]===!0},deleteContext:function(e){delete this._caches[e],this._context={}},"delete":function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},miss:function(e){return!this._context.hasOwnProperty(e)}},e.prototype.constructor=e,e}),define("qtek/Texture",["require","./core/Base","./core/glenum","./core/Cache"],function(e){var t=e("./core/Base"),n=e("./core/glenum"),r=e("./core/Cache"),i=t.derive({width:512,height:512,type:n.UNSIGNED_BYTE,format:n.RGBA,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,minFilter:n.LINEAR_MIPMAP_LINEAR,magFilter:n.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1},function(){this._cache=new r},{getWebGLTexture:function(e){return this._cache.use(e.__GLID__),this._cache.miss("webgl_texture")&&this._cache.put("webgl_texture",e.createTexture()),this.dynamic?this.update(e):this._cache.isDirty()&&(this.update(e),this._cache.fresh()),this._cache.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache.dirtyAll()},update:function(e){},beforeUpdate:function(e){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,this.unpackAlignment),this.fallBack()},fallBack:function(){var e=this.isPowerOfTwo();this.format===n.DEPTH_COMPONENT&&(this.useMipmap=!1);if(!e||!this.useMipmap){this.NPOT=!0,this._minFilterOriginal=this.minFilter,this._magFilterOriginal=this.magFilter,this._wrapSOriginal=this.wrapS,this._wrapTOriginal=this.wrapT;if(this.minFilter==n.NEAREST_MIPMAP_NEAREST||this.minFilter==n.NEAREST_MIPMAP_LINEAR)this.minFilter=n.NEAREST;else if(this.minFilter==n.LINEAR_MIPMAP_LINEAR||this.minFilter==n.LINEAR_MIPMAP_NEAREST)this.minFilter=n.LINEAR;this.wrapS=n.CLAMP_TO_EDGE,this.wrapT=n.CLAMP_TO_EDGE}else this._minFilterOriginal&&(this.minFilter=this._minFilterOriginal),this._magFilterOriginal&&(this.magFilter=this._magFilterOriginal),this._wrapSOriginal&&(this.wrapS=this._wrapSOriginal),this._wrapTOriginal&&(this.wrapT=this._wrapTOriginal)},nextHighestPowerOfTwo:function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},dispose:function(e){this._cache.use(e.__GLID__),this._cache.get("webgl_texture")&&e.deleteTexture(this._cache.get("webgl_texture")),this._cache.deleteContext(e.__GLID__)},isRenderable:function(){},isPowerOfTwo:function(){}});return i.BYTE=n.BYTE,i.UNSIGNED_BYTE=n.UNSIGNED_BYTE,i.SHORT=n.SHORT,i.UNSIGNED_SHORT=n.UNSIGNED_SHORT,i.INT=n.INT,i.UNSIGNED_INT=n.UNSIGNED_INT,i.FLOAT=n.FLOAT,i.HALF_FLOAT=36193,i.DEPTH_COMPONENT=n.DEPTH_COMPONENT,i.ALPHA=n.ALPHA,i.RGB=n.RGB,i.RGBA=n.RGBA,i.LUMINANCE=n.LUMINANCE,i.LUMINANCE_ALPHA=n.LUMINANCE_ALPHA,i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,i.NEAREST=n.NEAREST,i.LINEAR=n.LINEAR,i.NEAREST_MIPMAP_NEAREST=n.NEAREST_MIPMAP_NEAREST,i.LINEAR_MIPMAP_NEAREST=n.LINEAR_MIPMAP_NEAREST,i.NEAREST_MIPMAP_LINEAR=n.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_LINEAR=n.LINEAR_MIPMAP_LINEAR,i.TEXTURE_MAG_FILTER=n.TEXTURE_MAG_FILTER,i.TEXTURE_MIN_FILTER=n.TEXTURE_MIN_FILTER,i.REPEAT=n.REPEAT,i.CLAMP_TO_EDGE=n.CLAMP_TO_EDGE,i.MIRRORED_REPEAT=n.MIRRORED_REPEAT,i}),define("qtek/core/glinfo",[],function(){var e=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","WEBGL_draw_buffers"],t={},n={initialize:function(n){if(t[n.__GLID__])return;t[n.__GLID__]={};for(var r=0;r<e.length;r++){var i=e[r];this._createExtension(n,i)}},getExtension:function(e,n){var r=e.__GLID__;if(t[r])return typeof t[r][n]=="undefined"&&this._createExtension(e,n),t[r][n]},dispose:function(e){delete t[e.__GLID__]},_createExtension:function(e,n){var r=e.getExtension(n);r||(r=e.getExtension("MOZ_"+n)),r||(r=e.getExtension("WEBKIT_"+n)),t[e.__GLID__][n]=r}};return n}),function(e){var t={};typeof exports=="undefined"?typeof define=="function"&&typeof define.amd=="object"&&define.amd?(t.exports={},define("glmatrix",[],function(){return t.exports})):t.exports=typeof window!="undefined"?window:e:t.exports=exports,function(e){if(!t)var t=1e-6;if(!n)var n=typeof Float32Array!="undefined"?Float32Array:Array;if(!r)var r=Math.random;var i={};i.setMatrixArrayType=function(e){n=e},typeof e!="undefined"&&(e.glMatrix=i);var s=Math.PI/180;i.toRadian=function(e){return e*s};var o={};o.create=function(){var e=new n(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new n(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var r=new n(2);return r[0]=e,r[1]=t,r},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e},o.random=function(e,t){t=t||1;var n=r()*2*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},o.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,i,s,o){var u,a;n||(n=2),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],s(e,e,o),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},typeof e!="undefined"&&(e.vec2=o);var u={};u.create=function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},u.clone=function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},u.fromValues=function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},u.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},u.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},u.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},u.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},u.sub=u.subtract,u.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},u.mul=u.multiply,u.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},u.div=u.divide,u.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},u.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},u.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},u.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},u.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},u.dist=u.distance,u.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},u.sqrDist=u.squaredDistance,u.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},u.len=u.length,u.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},u.sqrLen=u.squaredLength,u.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},u.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e},u.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},u.cross=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e},u.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e},u.random=function(e,t){t=t||1;var n=r()*2*Math.PI,i=r()*2-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=i*t,e},u.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12],e[1]=n[1]*r+n[5]*i+n[9]*s+n[13],e[2]=n[2]*r+n[6]*i+n[10]*s+n[14],e},u.transformMat3=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e},u.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},u.forEach=function(){var e=u.create();return function(t,n,r,i,s,o){var u,a;n||(n=3),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),u.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},typeof e!="undefined"&&(e.vec3=u);var a={};a.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.fromValues=function(e,t,r,i){var s=new n(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},a.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e},a.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),a.normalize(e,e),a.scale(e,e,t),e},a.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e},a.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},a.forEach=function(){var e=a.create();return function(t,n,r,i,s,o){var u,a;n||(n=4),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},typeof e!="undefined"&&(e.vec4=a);var f={};f.create=function(){var e=new n(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},f.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},f.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},f.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},f.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},f.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},f.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},f.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},f.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*u+i*f,e[1]=r*a+i*l,e[2]=s*u+o*f,e[3]=s*a+o*l,e},f.mul=f.multiply,f.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+i*u,e[1]=r*-u+i*a,e[2]=s*a+o*u,e[3]=s*-u+o*a,e},f.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1];return e[0]=r*u,e[1]=i*a,e[2]=s*u,e[3]=o*a,e},f.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},typeof e!="undefined"&&(e.mat2=f);var l={};l.create=function(){var e=new n(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.clone=function(e){var t=new n(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},l.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=n*s-r*i;return a?(a=1/a,e[0]=s*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e[4]=(i*u-s*o)*a,e[5]=(r*o-n*u)*a,e):null},l.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},l.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1],c=n[2],h=n[3],p=n[4],d=n[5];return e[0]=r*f+i*c,e[1]=r*l+i*h,e[2]=s*f+o*c,e[3]=s*l+o*h,e[4]=f*u+c*a+p,e[5]=l*u+h*a+d,e},l.mul=l.multiply,l.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*f,e[1]=-r*f+i*l,e[2]=s*l+o*f,e[3]=-s*f+l*o,e[4]=l*u+f*a,e[5]=l*a-f*u,e},l.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},l.translate=function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},l.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},typeof e!="undefined"&&(e.mat2d=l);var c={};c.create=function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},c.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},c.clone=function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},c.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},c.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null},c.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8];return e[0]=o*l-u*f,e[1]=i*f-r*l,e[2]=r*u-i*o,e[3]=u*a-s*l,e[4]=n*l-i*a,e[5]=i*s-n*u,e[6]=s*f-o*a,e[7]=r*a-n*f,e[8]=n*o-r*s,e},c.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*(f*s-o*a)+n*(-f*i+o*u)+r*(a*i-s*u)},c.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8];return e[0]=h*r+p*o+d*f,e[1]=h*i+p*u+d*l,e[2]=h*s+p*a+d*c,e[3]=v*r+m*o+g*f,e[4]=v*i+m*u+g*l,e[5]=v*s+m*a+g*c,e[6]=y*r+b*o+w*f,e[7]=y*i+b*u+w*l,e[8]=y*s+b*a+w*c,e},c.mul=c.multiply,c.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=h*r+p*o+f,e[7]=h*i+p*u+l,e[8]=h*s+p*a+c,e},c.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*o,e[1]=p*i+h*u,e[2]=p*s+h*a,e[3]=p*o-h*r,e[4]=p*u-h*i,e[5]=p*a-h*s,e[6]=f,e[7]=l,e[8]=c,e},c.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},c.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},c.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[3]=l-g,e[6]=h+m,e[1]=l+g,e[4]=1-f-d,e[7]=p-v,e[2]=h-m,e[5]=p+v,e[8]=1-f-c,e},c.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(a*C-o*A-f*N)*O,e[2]=(o*L-u*C+f*T)*O,e[3]=(i*L-r*A-s*k)*O,e[4]=(n*A-i*C+s*N)*O,e[5]=(r*C-n*L-s*T)*O,e[6]=(v*x-m*S+g*E)*O,e[7]=(m*w-d*x-g*b)*O,e[8]=(d*S-v*w+g*y)*O,e):null},c.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},typeof e!="undefined"&&(e.mat3=c);var h={};h.create=function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},h.clone=function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},h.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},h.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null},h.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=u*(h*g-p*m)-c*(a*g-f*m)+v*(a*p-f*h),e[1]=-(r*(h*g-p*m)-c*(i*g-s*m)+v*(i*p-s*h)),e[2]=r*(a*g-f*m)-u*(i*g-s*m)+v*(i*f-s*a),e[3]=-(r*(a*p-f*h)-u*(i*p-s*h)+c*(i*f-s*a)),e[4]=-(o*(h*g-p*m)-l*(a*g-f*m)+d*(a*p-f*h)),e[5]=n*(h*g-p*m)-l*(i*g-s*m)+d*(i*p-s*h),e[6]=-(n*(a*g-f*m)-o*(i*g-s*m)+d*(i*f-s*a)),e[7]=n*(a*p-f*h)-o*(i*p-s*h)+l*(i*f-s*a),e[8]=o*(c*g-p*v)-l*(u*g-f*v)+d*(u*p-f*c),e[9]=-(n*(c*g-p*v)-l*(r*g-s*v)+d*(r*p-s*c)),e[10]=n*(u*g-f*v)-o*(r*g-s*v)+d*(r*f-s*u),e[11]=-(n*(u*p-f*c)-o*(r*p-s*c)+l*(r*f-s*u)),e[12]=-(o*(c*m-h*v)-l*(u*m-a*v)+d*(u*h-a*c)),e[13]=n*(c*m-h*v)-l*(r*m-i*v)+d*(r*h-i*c),e[14]=-(n*(u*m-a*v)-o*(r*m-i*v)+d*(r*a-i*u)),e[15]=n*(u*h-a*c)-o*(r*h-i*c)+l*(r*a-i*u),e},h.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x},h.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e},h.mul=h.multiply,h.translate=function(e,t,n){var r=n[0],i=n[1],s=n[2],o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;return o=t[0],u=t[1],a=t[2],f=t[3],l=t[4],c=t[5],h=t[6],p=t[7],d=t[8],v=t[9],m=t[10],g=t[11],y=t[12],b=t[13],w=t[14],E=t[15],e[0]=o+f*r,e[1]=u+f*i,e[2]=a+f*s,e[3]=f,e[4]=l+p*r,e[5]=c+p*i,e[6]=h+p*s,e[7]=p,e[8]=d+g*r,e[9]=v+g*i,e[10]=m+g*s,e[11]=g,e[12]=y+E*r,e[13]=b+E*i,e[14]=w+E*s,e[15]=E,e},h.scale=function(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.rotate=function(e,n,r,i){var s=i[0],o=i[1],u=i[2],a=Math.sqrt(s*s+o*o+u*u),f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;return Math.abs(a)<t?null:(a=1/a,s*=a,o*=a,u*=a,f=Math.sin(r),l=Math.cos(r),c=1-l,h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8],E=n[9],S=n[10],x=n[11],T=s*s*c+l,N=o*s*c+u*f,C=u*s*c-o*f,k=s*o*c-u*f,L=o*o*c+l,A=u*o*c+s*f,O=s*u*c+o*f,M=o*u*c-s*f,_=u*u*c+l,e[0]=h*T+m*N+w*C,e[1]=p*T+g*N+E*C,e[2]=d*T+y*N+S*C,e[3]=v*T+b*N+x*C,e[4]=h*k+m*L+w*A,e[5]=p*k+g*L+E*A,e[6]=d*k+y*L+S*A,e[7]=v*k+b*L+x*A,e[8]=h*O+m*M+w*_,e[9]=p*O+g*M+E*_,e[10]=d*O+y*M+S*_,e[11]=v*O+b*M+x*_,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},h.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e},h.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e},h.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e},h.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},h.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},h.frustum=function(e,t,n,r,i,s,o){var u=1/(n-t),a=1/(i-r),f=1/(s-o);return e[0]=s*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*a,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*a,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e},h.perspective=function(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},h.ortho=function(e,t,n,r,i,s,o){var u=1/(t-n),a=1/(r-i),f=1/(s-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*a,e[14]=(o+s)*f,e[15]=1,e},h.lookAt=function(e,n,r,i){var s,o,u,a,f,l,c,p,d,v,m=n[0],g=n[1],y=n[2],b=i[0],w=i[1],E=i[2],S=r[0],x=r[1],T=r[2];return Math.abs(m-S)<t&&Math.abs(g-x)<t&&Math.abs(y-T)<t?h.identity(e):(c=m-S,p=g-x,d=y-T,v=1/Math.sqrt(c*c+p*p+d*d),c*=v,p*=v,d*=v,s=w*d-E*p,o=E*c-b*d,u=b*p-w*c,v=Math.sqrt(s*s+o*o+u*u),v?(v=1/v,s*=v,o*=v,u*=v):(s=0,o=0,u=0),a=p*u-d*o,f=d*s-c*u,l=c*o-p*s,v=Math.sqrt(a*a+f*f+l*l),v?(v=1/v,a*=v,f*=v,l*=v):(a=0,f=0,l=0),e[0]=s,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=f,e[6]=p,e[7]=0,e[8]=u,e[9]=l,e[10]=d,e[11]=0,e[12]=-(s*m+o*g+u*y),e[13]=-(a*m+f*g+l*y),e[14]=-(c*m+p*g+d*y),e[15]=1,e)},h.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},typeof e!="undefined"&&(e.mat4=h);var p={};p.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.rotationTo=function(){var e=u.create(),t=u.fromValues(1,0,0),n=u.fromValues(0,1,0);return function(r,i,s){var o=u.dot(i,s);return o<-0.999999?(u.cross(e,t,i),u.length(e)<1e-6&&u.cross(e,n,i),u.normalize(e,e),p.setAxisAngle(r,e,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(u.cross(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,p.normalize(r,r))}}(),p.setAxes=function(){var e=c.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],p.normalize(t,p.fromMat3(t,e))}}(),p.clone=a.clone,p.fromValues=a.fromValues,p.copy=a.copy,p.set=a.set,p.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},p.add=a.add,p.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*l+o*u+i*f-s*a,e[1]=i*l+o*a+s*u-r*f,e[2]=s*l+o*f+r*a-i*u,e[3]=o*l-r*u-i*a-s*f,e},p.mul=p.multiply,p.scale=a.scale,p.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+o*u,e[1]=i*a+s*u,e[2]=s*a-i*u,e[3]=o*a-r*u,e},p.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a-s*u,e[1]=i*a+o*u,e[2]=s*a+r*u,e[3]=o*a-i*u,e},p.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+i*u,e[1]=i*a-r*u,e[2]=s*a+o*u,e[3]=o*a-s*u,e},p.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},p.dot=a.dot,p.lerp=a.lerp,p.slerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=n[0],f=n[1],l=n[2],c=n[3],h,p,d,v,m;return p=i*a+s*f+o*l+u*c,p<0&&(p=-p,a=-a,f=-f,l=-l,c=-c),1-p>1e-6?(h=Math.acos(p),d=Math.sin(h),v=Math.sin((1-r)*h)/d,m=Math.sin(r*h)/d):(v=1-r,m=r),e[0]=v*i+m*a,e[1]=v*s+m*f,e[2]=v*o+m*l,e[3]=v*u+m*c,e},p.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,u=o?1/o:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=s*u,e},p.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},p.length=a.length,p.len=p.length,p.squaredLength=a.squaredLength,p.sqrLen=p.squaredLength,p.normalize=a.normalize,p.fromMat3=function(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[7]-t[5])*r,e[1]=(t[2]-t[6])*r,e[2]=(t[3]-t[1])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[o*3+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[o*3+s]-t[s*3+o])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[o]=(t[o*3+i]+t[i*3+o])*r}return e},p.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},typeof e!="undefined"&&(e.quat=p)}(t.exports)}(this),define("qtek/math/Vector3",["require","glmatrix"],function(e){var t=e("glmatrix"),n=t.vec3,r=function(e,t,r){e=e||0,t=t||0,r=r||0,this._array=n.fromValues(e,t,r),this._dirty=!0};return r.prototype={constructor:r,get x(){return this._array[0]},set x(e){this._array[0]=e,this._dirty=!0},get y(){return this._array[1]},set y(e){this._array[1]=e,this._dirty=!0},get z(){return this._array[2]},set z(e){this._array[2]=e,this._dirty=!0},add:function(e){return n.add(this._array,this._array,e._array),this._dirty=!0,this},set:function(e,t,n){return this._array[0]=e,this._array[1]=t,this._array[2]=n,this._dirty=!0,this},setArray:function(e){return this._array[0]=e[0],this._array[1]=e[1],this._array[2]=e[2],this._dirty=!0,this},clone:function(){return new r(this.x,this.y,this.z)},copy:function(e){return n.copy(this._array,e._array),this._dirty=!0,this},cross:function(e,t){return n.cross(e._array,this._array,t._array),e._dirty=!0,this},dist:function(e){return n.dist(this._array,e._array)},distance:function(e){return n.distance(this._array,e._array)},div:function(e){return n.div(this._array,this._array,e._array),this._dirty=!0,this},divide:function(e){return n.divide(this._array,this._array,e._array),this._dirty=!0,this},dot:function(e){return n.dot(this._array,e._array)},len:function(){return n.len(this._array)},length:function(){return n.length(this._array)},lerp:function(e,t,r){return n.lerp(this._array,e._array,t._array,r),this._dirty=!0,this},min:function(e){return vec2.min(this._array,this._array,e._array),this._dirty=!0,this},max:function(e){return vec2.max(this._array,this._array,e._array),this._dirty=!0,this},mul:function(e){return n.mul(this._array,this._array,e._array),this._dirty=!0,this},multiply:function(e){return n.multiply(this._array,this._array,e._array),this._dirty=!0,this},negate:function(){return n.negate(this._array,this._array),this._dirty=!0,this},normalize:function(){return n.normalize(this._array,this._array),this._dirty=!0,this},random:function(e){return n.random(this._array,e),this._dirty=!0,this},scale:function(e){return n.scale(this._array,this._array,e),this._dirty=!0,this},scaleAndAdd:function(e,t){return n.scaleAndAdd(this._array,this._array,e._array,t),this._dirty=!0,this},sqrDist:function(e){return n.sqrDist(this._array,e._array)},squaredDistance:function(e){return n.squaredDistance(this._array,e._array)},sqrLen:function(){return n.sqrLen(this._array)},squaredLength:function(){return n.squaredLength(this._array)},sub:function(e){return n.sub(this._array,this._array,e._array),this._dirty=!0,this},subtract:function(e){return n.subtract(this._array,this._array,e._array),this._dirty=!0,this},transformMat3:function(e){return n.transformMat3(this._array,this._array,e._array),this._dirty=!0,this},transformMat4:function(e){return n.transformMat4(this._array,this._array,e._array),this._dirty=!0,this},transformQuat:function(e){return n.transformQuat(this._array,this._array,e._array),this._dirty=!0,this},applyProjection:function(e){var t=this._array;e=e._array;if(e[15]===0){var n=-1/t[2];t[0]=e[0]*t[0]*n,t[1]=e[5]*t[1]*n,t[2]=(e[10]*t[2]+e[14])*n}else t[0]=e[0]*t[0]+e[12],t[1]=e[5]*t[1]+e[13],t[2]=e[10]*t[2]+e[14];return this._dirty=!0,this},setEulerFromQuaternion:function(e){},toString:function(){return"["+Array.prototype.join.call(this._array,",")+"]"}},r.add=function(e,t,r){return n.add(e._array,t._array,r._array),e._dirty=!0,e},r.set=function(e,t,r,i){n.set(e._array,t,r,i),e._dirty=!0},r.copy=function(e,t){return n.copy(e._array,t._array),e._dirty=!0,e},r.cross=function(e,t,r){return n.cross(e._array,t._array,r._array),e._dirty=!0,e},r.dist=function(e,t){return n.distance(e._array,t._array)},r.distance=r.dist,r.div=function(e,t,r){return n.divide(e._array,t._array,r._array),e._dirty=!0,e},r.divide=r.div,r.dot=function(e,t){return n.dot(e._array,t._array)},r.len=function(e){return n.length(e._array)},r.lerp=function(e,t,r,i){return n.lerp(e._array,t._array,r._array,i),e._dirty=!0,e},r.min=function(e,t,r){return n.min(e._array,t._array,r._array),e._dirty=!0,e},r.max=function(e,t,r){return n.max(e._array,t._array,r._array),e._dirty=!0,e},r.mul=function(e,t,r){return n.multiply(e._array,t._array,r._array),e._dirty=!0,e},r.multiply=r.mul,r.negate=function(e,t){return n.negate(e._array,t._array),e._dirty=!0,e},r.normalize=function(e,t){return n.normalize(e._array,t._array),e._dirty=!0,e},r.random=function(e,t){return n.random(e._array,t),e._dirty=!0,e},r.scale=function(e,t,r){return n.scale(e._array,t._array,r),e._dirty=!0,e},r.scaleAndAdd=function(e,t,r,i){return n.scaleAndAdd(e._array,t._array,r._array,i),e._dirty=!0,e},r.sqrDist=function(e,t){return n.sqrDist(e._array,t._array)},r.squaredDistance=r.sqrDist,r.sqrLen=function(e){return n.sqrLen(e._array)},r.squaredLength=r.sqrLen,r.sub=function(e,t,r){return n.subtract(e._array,t._array,r._array),e._dirty=!0,e},r.subtract=r.sub,r.transformMat3=function(e,t,r){return n.transformMat3(e._array,t._array,r._array),e._dirty=!0,e},r.transformMat4=function(e,t,r){return n.transformMat4(e._array,t._array,r._array),e._dirty=!0,e},r.transformQuat=function(e,t,r){return n.transformQuat(e._array,t._array,m._array),e._dirty=!0,e},r.POSITIVE_X=new r(1,0,0),r.NEGATIVE_X=new r(-1,0,0),r.POSITIVE_Y=new r(0,1,0),r.NEGATIVE_Y=new r(0,-1,0),r.POSITIVE_Z=new r(0,0,1),r.NEGATIVE_Z=new r(0,0,-1),r.UP=new r(0,1,0),r.ZERO=new r(0,0,0),r}),define("qtek/math/BoundingBox",["require","./Vector3","glmatrix"],function(e){var t=e("./Vector3"),n=e("glmatrix"),r=n.mat4,i=n.vec3,s=i.transformMat4,o=i.copy,u=i.set,a=function(e,n){this.min=e||new t(Infinity,Infinity,Infinity),this.max=n||new t(-Infinity,-Infinity,-Infinity);var r=[];for(var s=0;s<8;s++)r[s]=i.fromValues(0,0,0);this.vertices=r};return a.prototype={constructor:a,updateFromVertices:function(e){if(e.length>0){var t=this.min._array,n=this.max._array;o(t,e[0]),o(n,e[0]);for(var r=1;r<e.length;r++){var i=e[r];t[0]=Math.min(i[0],t[0]),t[1]=Math.min(i[1],t[1]),t[2]=Math.min(i[2],t[2]),n[0]=Math.max(i[0],n[0]),n[1]=Math.max(i[1],n[1]),n[2]=Math.max(i[2],n[2])}this.min._dirty=!0,this.max._dirty=!0}},union:function(e){i.min(this.min._array,this.min._array,e.min._array),i.max(this.max._array,this.max._array,e.max._array),this.min._dirty=!0,this.max._dirty=!0},intersectBoundingBox:function(e){var t=this.min._array,n=this.max._array,r=e.min._array,i=e.max._array;return!(t[0]>i[0]||t[1]>i[1]||t[2]>i[1]||n[0]<r[0]||n[1]<r[1]||n[2]<r[2])},applyTransform:function(e){if(this.min._dirty||this.max._dirty)this.updateVertices(),this.min._dirty=!1,this.max._dirty=!1;var t=e._array,n=this.min._array,r=this.max._array,i=this.vertices,u=i[0];s(u,u,t),o(n,u),o(r,u);for(var a=1;a<8;a++)u=i[a],s(u,u,t),n[0]=Math.min(u[0],n[0]),n[1]=Math.min(u[1],n[1]),n[2]=Math.min(u[2],n[2]),r[0]=Math.max(u[0],r[0]),r[1]=Math.max(u[1],r[1]),r[2]=Math.max(u[2],r[2]);this.min._dirty=!0,this.max._dirty=!0},applyProjection:function(e){if(this.min._dirty||this.max._dirty)this.updateVertices(),this.min._dirty=!1,this.max._dirty=!1;var t=e._array,n=this.vertices[0],r=this.vertices[3],i=this.vertices[7],s=this.min._array,o=this.max._array;if(t[15]===1)s[0]=t[0]*n[0]+t[12],s[1]=t[5]*n[1]+t[13],o[2]=t[10]*n[2]+t[14],o[0]=t[0]*i[0]+t[12],o[1]=t[5]*i[1]+t[13],s[2]=t[10]*i[2]+t[14];else{var u=-1/n[2];s[0]=t[0]*n[0]*u,s[1]=t[5]*n[1]*u,o[2]=(t[10]*n[2]+t[14])*u,u=-1/r[2],o[0]=t[0]*r[0]*u,o[1]=t[5]*r[1]*u,u=-1/i[2],s[2]=(t[10]*i[2]+t[14])*u}this.min._dirty=!0,this.max._dirty=!0},updateVertices:function(){var e=this.min._array,t=this.max._array,n=this.vertices;u(n[0],e[0],e[1],e[2]),u(n[1],e[0],t[1],e[2]),u(n[2],t[0],e[1],e[2]),u(n[3],t[0],t[1],e[2]),u(n[4],e[0],e[1],t[2]),u(n[5],e[0],t[1],t[2]),u(n[6],t[0],e[1],t[2]),u(n[7],t[0],t[1],t[2])},copy:function(e){o(this.min._array,e.min._array),o(this.max._array,e.max._array),this.min._dirty=!0,this.max._dirty=!0},clone:function(){var e=new a;return e.copy(this),e}},a}),define("qtek/math/Matrix4",["require","glmatrix","./Vector3"],function(e){function u(e){return{set:function(t){this._array[e]=t,this._dirty=!0},get:function(){return this._array[e]}}}var t=e("glmatrix"),n=e("./Vector3"),r=t.mat4,i=t.vec3,s=t.mat3,o=t.quat,a=function(){this._axisX=new n,this._axisY=new n,this._axisZ=new n,this._array=r.create(),this._dirty=!0};return a.prototype={constructor:a,get forward(){var e=this._array;return this._axisZ.set(e[8],e[9],e[10]),this._axisZ},set forward(e){var t=this._array;e=e._array,t[8]=e[0],t[9]=e[1],t[10]=e[2],this._dirty=!0},get up(){var e=this._array;return this._axisY.set(e[4],e[5],e[6]),this._axisY},set up(e){var t=this._array;e=e._array,t[4]=e[0],t[5]=e[1],t[6]=e[2],this._dirty=!0},get right(){var e=this._array;return this._axisX.set(e[0],e[1],e[2]),this._axisX},set right(e){var t=this._array;e=e._array,t[0]=e[0],t[1]=e[1],t[2]=e[2],this._dirty=!0},adjoint:function(){return r.adjoint(this._array,this._array),this._dirty=!0,this},clone:function(){return(new a).copy(this)},copy:function(e){return r.copy(this._array,e._array),this._dirty=!0,this},determinant:function(){return r.determinant(this._array)},fromQuat:function(e){return r.fromQuat(this._array,e._array),this._dirty=!0,this},fromRotationTranslation:function(e,t){return r.fromRotationTranslation(this._array,e._array,t._array),this._dirty=!0,this},fromMat2d:function(e){return a.fromMat2d(this,e),this},frustum:function(e,t,n,i,s,o){return r.frustum(this._array,e,t,n,i,s,o),this._dirty=!0,this},identity:function(){return r.identity(this._array),this._dirty=!0,this},invert:function(){return r.invert(this._array,this._array),this._dirty=!0,this},lookAt:function(e,t,n){return r.lookAt(this._array,e._array,t._array,n._array),this._dirty=!0,this},mul:function(e){return r.mul(this._array,this._array,e._array),this._dirty=!0,this},mulLeft:function(e){return r.mul(this._array,e._array,this._array),this._dirty=!0,this},multiply:function(e){return r.multiply(this._array,this._array,e._array),this._dirty=!0,this},multiplyLeft:function(e){return r.multiply(this._array,e._array,this._array),this._dirty=!0,this},ortho:function(e,t,n,i,s,o){return r.ortho(this._array,e,t,n,i,s,o),this._dirty=!0,this},perspective:function(e,t,n,i){return r.perspective(this._array,e,t,n,i),this._dirty=!0,this},rotate:function(e,t){return r.rotate(this._array,this._array,e,t._array),this._dirty=!0,this},rotateX:function(e){return r.rotateX(this._array,this._array,e),this._dirty=!0,this},rotateY:function(e){return r.rotateY(this._array,this._array,e),this._dirty=!0,this},rotateZ:function(e){return r.rotateZ(this._array,this._array,e),this._dirty=!0,this},scale:function(e){return r.scale(this._array,this._array,e._array),this._dirty=!0,this},translate:function(e){return r.translate(this._array,this._array,e._array),this._dirty=!0,this},transpose:function(){return r.transpose(this._array,this._array),this._dirty=!0,this},decomposeMatrix:function(){var e=i.create(),t=i.create(),n=i.create(),r=s.create();return function(u,a,f){var l=this._array;i.set(e,l[0],l[1],l[2]),i.set(t,l[4],l[5],l[6]),i.set(n,l[8],l[9],l[10]),u.x=i.length(e),u.y=i.length(t),u.z=i.length(n),f.set(l[12],l[13],l[14]),s.fromMat4(r,l),s.transpose(r,r),r[0]/=u.x,r[1]/=u.x,r[2]/=u.x,r[3]/=u.y,r[4]/=u.y,r[5]/=u.y,r[6]/=u.z,r[7]/=u.z,r[8]/=u.z,o.fromMat3(a._array,r),o.normalize(a._array,a._array),u._dirty=!0,a._dirty=!0,f._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this._array,",")+"]"}},a.adjoint=function(e,t){return r.adjoint(e._array,t._array),e._dirty=!0,e},a.copy=function(e,t){return r.copy(e._array,t._array),e._dirty=!0,e},a.determinant=function(e){return r.determinant(e._array)},a.identity=function(e){return r.identity(e._array),e._dirty=!0,e},a.ortho=function(e,t,n,i,s,o,u){return r.ortho(e._array,t,n,i,s,o,u),e._dirty=!0,e},a.perspective=function(e,t,n,i,s){return r.perspective(e._array,t,n,i,s),e._dirty=!0,e},a.lookAt=function(e,t,n,i){return r.lookAt(e._array,t._array,n._array,i._array),e._dirty=!0,e},a.invert=function(e,t){return r.invert(e._array,t._array),e._dirty=!0,e},a.mul=function(e,t,n){return r.mul(e._array,t._array,n._array),e._dirty=!0,e},a.multiply=a.mul,a.fromQuat=function(e,t){return r.fromQuat(e._array,t._array),e._dirty=!0,e},a.fromRotationTranslation=function(e,t,n){return r.fromRotationTranslation(e._array,t._array,n._array),e._dirty=!0,e},a.fromMat2d=function(e,t){e._dirty=!0;var t=t._array,e=e._array;return e[0]=t[0],e[4]=t[2],e[12]=t[4],e[1]=t[1],e[5]=t[3],e[13]=t[5],e},a.rotate=function(e,t,n,i){return r.rotate(e._array,t._array,n,i._array),e._dirty=!0,e},a.rotateX=function(e,t,n){return r.rotateX(e._array,t._array,n),e._dirty=!0,e},a.rotateY=function(e,t,n){return r.rotateY(e._array,t._array,n),e._dirty=!0,e},a.rotateZ=function(e,t,n){return r.rotateZ(e._array,t._array,n),e._dirty=!0,e},a.scale=function(e,t,n){return r.scale(e._array,t._array,n._array),e._dirty=!0,e},a.transpose=function(e,t){return r.transpose(e._array,t._array),e._dirty=!0,e},a.translate=function(e,t,n){return r.translate(e._array,t._array,n._array),e._dirty=!0,e},a}),define("qtek/Shader",["require","./core/Base","./core/util","./core/Cache","glmatrix"],function(e){function w(){return{locations:{},attriblocations:{}}}function E(e){var t=e.split("\n");for(var n=0,r=t.length;n<r;n++)t[n]=n+1+": "+t[n];return t.join("\n")}var t=e("./core/Base"),n=e("./core/util"),r=e("./core/Cache"),i=e("glmatrix"),s=i.mat2,o=i.mat3,u=i.mat4,a=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\w\,]+)?(\[.*?\])?\s*(:\s*([\S\s]+?))?;/g,f=/attribute\s+(float|int|vec2|vec3|vec4)\s+(\w*)\s*(:\s*(\w+))?;/g,l=/#define\s+(\w+)?(\s+[\w-.]+)?\s*\n/g,c={bool:"1i","int":"1i",sampler2D:"t",samplerCube:"t","float":"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"},h={bool:function(){return!0},"int":function(){return 0},"float":function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return[0,0]},vec3:function(){return[0,0,0]},vec4:function(){return[0,0,0,0]},ivec2:function(){return[0,0]},ivec3:function(){return[0,0,0]},ivec4:function(){return[0,0,0,0]},mat2:function(){return s.create()},mat3:function(){return o.create()},mat4:function(){return u.create()},array:function(){return[]}},p=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT","SKIN_MATRIX"],d=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],v={},m=1,g=2,y=3,b=t.derive(function(){return{vertex:"",fragment:"",precision:"mediump",attribSemantics:{},matrixSemantics:{},matrixSemanticKeys:[],uniformTemplates:{},attributeTemplates:{},vertexDefines:{},fragmentDefines:{},lightNumber:{},_uniformList:[],_textureStatus:{},_vertexProcessed:"",_fragmentProcessed:"",_currentLocationsMap:{}}},function(){this._cache=new r,this._updateShaderString()},{setVertex:function(e){this.vertex=e,this._updateShaderString(),this.dirty()},setFragment:function(e){this.fragment=e,this._updateShaderString(),this.dirty()},bind:function(e){this._cache.use(e.__GLID__,w),this._currentLocationsMap=this._cache.get("locations");if(this._cache.isDirty()){this._updateShaderString();var t=this._buildProgram(e,this._vertexProcessed,this._fragmentProcessed);this._cache.fresh();if(t)return t}e.useProgram(this._cache.get("program"))},dirty:function(){this._cache.dirtyAll();for(var e=0;e<this._cache._caches.length;e++)if(this._cache._caches[e]){var t=this._cache._caches[e];t.locations={},t.attriblocations={}}},_updateShaderString:function(){if(this.vertex!==this._vertexPrev||this.fragment!==this._fragmentPrev)this._parseImport(),this.attribSemantics={},this.matrixSemantics={},this._textureStatus={},this._parseUniforms(),this._parseAttributes(),this._parseDefines(),this._vertexPrev=this.vertex,this._fragmentPrev=this.fragment;this._addDefine()},define:function(e,t,n){n=n!==undefined?n:null,(e=="vertex"||e=="both")&&this.vertexDefines[t]!==n&&(this.vertexDefines[t]=n,this.dirty()),(e=="fragment"||e=="both")&&this.fragmentDefines[t]!==n&&(this.fragmentDefines[t]=n,e!=="both"&&this.dirty())},unDefine:function(e,t){(e=="vertex"||e=="both")&&this.isDefined("vertex",t)&&(delete this.vertexDefines[t],this.dirty()),(e=="fragment"||e=="both")&&this.isDefined("fragment",t)&&(delete this.fragmentDefines[t],e!=="both"&&this.dirty())},isDefined:function(e,t){switch(e){case"vertex":return this.vertexDefines[t]!==undefined;case"fragment":return this.fragmentDefines[t]!==undefined}},getDefine:function(e,t){switch(e){case"vertex":return this.vertexDefines[t];case"fragment":return this.fragmentDefines[t]}},enableTexture:function(e){var t=this._textureStatus[e];if(t){var n=t.enabled;n||(t.enabled=!0,this.dirty())}},enableTexturesAll:function(){for(var e in this._textureStatus)this._textureStatus[e].enabled=!0;this.dirty()},disableTexture:function(e){var t=this._textureStatus[e];if(t){var n=!t.enabled;n||(t.enabled=!1,this.dirty())}},disableTexturesAll:function(){for(var e in this._textureStatus)this._textureStatus[e].enabled=!1;this.dirty()},isTextureEnabled:function(e){return this._textureStatus[e].enabled},hasUniform:function(e){var t=this._currentLocationsMap[e];return t!==null&&t!==undefined},setUniform:function(e,t,n,r){var i=this._currentLocationsMap,s=i[n];if(s===null||s===undefined)return!1;switch(t){case"m4":e.uniformMatrix4fv(s,!1,r);break;case"2i":e.uniform2i(s,r[0],r[1]);break;case"2f":e.uniform2f(s,r[0],r[1]);break;case"3i":e.uniform3i(s,r[0],r[1],r[2]);break;case"3f":e.uniform3f(s,r[0],r[1],r[2]);break;case"4i":e.uniform4i(s,r[0],r[1],r[2],r[3]);break;case"4f":e.uniform4f(s,r[0],r[1],r[2],r[3]);break;case"1i":e.uniform1i(s,r);break;case"1f":e.uniform1f(s,r);break;case"1fv":e.uniform1fv(s,r);break;case"1iv":e.uniform1iv(s,r);break;case"2iv":e.uniform2iv(s,r);break;case"2fv":e.uniform2fv(s,r);break;case"3iv":e.uniform3iv(s,r);break;case"3fv":e.uniform3fv(s,r);break;case"4iv":e.uniform4iv(s,r);break;case"4fv":e.uniform4fv(s,r);break;case"m2":case"m2v":e.uniformMatrix2fv(s,!1,r);break;case"m3":case"m3v":e.uniformMatrix3fv(s,!1,r);break;case"m4v":if(r instanceof Array){var o=new Float32Array(r.length*16),u=0;for(var a=0;a<r.length;a++){var f=r[a];for(var l=0;l<16;l++)o[u++]=f[l]}e.uniformMatrix4fv(s,!1,o)}else r instanceof Float32Array&&e.uniformMatrix4fv(s,!1,r)}return!0},setUniformBySemantic:function(e,t,n){var r=this.attribSemantics[t];return r?this.setUniform(e,r.type,r.symbol,n):!1},enableAttributes:function(e,t){var n=this._cache.get("program"),r=this._cache.get("attriblocations"),i=v[e.__GLID__];i||(i=v[e.__GLID__]=[]);var s=[];for(var o=0;o<t.length;o++){var u=t[o];if(!this.attributeTemplates[u]){s[o]=-1;continue}var a=r[u];if(a===undefined){a=e.getAttribLocation(n,u);if(a===-1){s[o]=-1;continue}r[u]=a}s[o]=a,i[a]?i[a]=g:i[a]=m}for(var o=0;o<i.length;o++)switch(i[o]){case m:e.enableVertexAttribArray(o),i[o]=y;break;case g:i[o]=y;break;case y:e.disableVertexAttribArray(o),i[o]=0}return s},_parseImport:function(){this._vertexProcessedWithoutDefine=b.parseImport(this.vertex),this._fragmentProcessedWithoutDefine=b.parseImport(this.fragment)},_addDefine:function(){var e=[];for(var t in this.lightNumber){var n=this.lightNumber[t];n>0&&e.push("#define "+t.toUpperCase()+"_NUMBER "+n)}for(var r in this._textureStatus){var i=this._textureStatus[r];i.enabled&&e.push("#define "+r.toUpperCase()+"_ENABLED")}for(var r in this.vertexDefines){var s=this.vertexDefines[r];s===null?e.push("#define "+r):e.push("#define "+r+" "+s.toString())}this._vertexProcessed=e.join("\n")+"\n"+this._vertexProcessedWithoutDefine,e=[];for(var t in this.lightNumber){var n=this.lightNumber[t];n>0&&e.push("#define "+t.toUpperCase()+"_NUMBER "+n)}for(var r in this._textureStatus){var i=this._textureStatus[r];i.enabled&&e.push("#define "+r.toUpperCase()+"_ENABLED")}for(var r in this.fragmentDefines){var s=this.fragmentDefines[r];s===null?e.push("#define "+r):e.push("#define "+r+" "+s.toString())}var o=e.join("\n")+"\n"+this._fragmentProcessedWithoutDefine;this._fragmentProcessed=["precision",this.precision,"float"].join(" ")+";\n"+o},_parseUniforms:function(){function r(r,i,s,o,u,a){if(i&&s){var f=c[i],l=!0,v;if(f){t._uniformList.push(s);if(i==="sampler2D"||i==="samplerCube")t._textureStatus[s]={enabled:!1,shaderType:n};o&&(f+="v");if(a)if(p.indexOf(a)>=0)t.attribSemantics[a]={symbol:s,type:f},l=!1;else if(d.indexOf(a)>=0){var m=!1,g=a;a.match(/TRANSPOSE$/)&&(m=!0,g=a.slice(0,-9)),t.matrixSemantics[a]={symbol:s,type:f,isTranspose:m,semanticNoTranspose:g},l=!1}else if(a==="unconfigurable")l=!1;else{v=t._parseDefaultValue(i,a);if(!v)throw new Error('Unkown semantic "'+a+'"');a=""}l&&(e[s]={type:f,value:o?h.array:v||h[i],semantic:a||null})}return["uniform",i,s,o].join(" ")+";\n"}}var e={},t=this,n="vertex";this._uniformList=[],this._vertexProcessedWithoutDefine=this._vertexProcessedWithoutDefine.replace(a,r),n="fragment",this._fragmentProcessedWithoutDefine=this._fragmentProcessedWithoutDefine.replace(a,r),t.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=e},_parseDefaultValue:function(e,t){var n=/\[\s*(.*)\s*\]/;if(e==="vec2"||e==="vec3"||e==="vec4"){var r=n.exec(t)[1];if(r){var i=r.split(/\s*,\s*/);return function(){return new Float32Array(i)}}return}if(e==="bool")return function(){return t.toLowerCase()==="true"?!0:!1};if(e==="float")return function(){return parseFloat(t)}},createUniforms:function(){var e={};for(var t in this.uniformTemplates){var n=this.uniformTemplates[t];e[t]={type:n.type,value:n.value()}}return e},_parseAttributes:function(){function n(n,r,i,s,o){if(r&&i){var u=1;switch(r){case"vec4":u=4;break;case"vec3":u=3;break;case"vec2":u=2;break;case"float":u=1}e[i]={type:"float",size:u,semantic:o||null};if(o){if(p.indexOf(o)<0)throw new Error('Unkown semantic "'+o+'"');t.attribSemantics[o]={symbol:i,type:r}}}return["attribute",r,i].join(" ")+";\n"}var e={},t=this;this._vertexProcessedWithoutDefine=this._vertexProcessedWithoutDefine.replace(f,n),this.attributeTemplates=e},_parseDefines:function(){function n(n,r,i){var s=t==="vertex"?e.vertexDefines:e.fragmentDefines;return s[r]||(i=="false"?s[r]=!1:i=="true"?s[r]=!0:s[r]=i?parseFloat(i):null),""}var e=this,t="vertex";this._vertexProcessedWithoutDefine=this._vertexProcessedWithoutDefine.replace(l,n),t="fragment",this._fragmentProcessedWithoutDefine=this._fragmentProcessedWithoutDefine.replace(l,n)},_buildProgram:function(e,t,n){this._cache.get("program")&&e.deleteProgram(this._cache.get("program"));var r=e.createProgram(),i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,n),e.compileShader(s);var o=this._checkShaderErrorMsg(e,i,t);if(o)return o;o=this._checkShaderErrorMsg(e,s,n);if(o)return o;e.attachShader(r,i),e.attachShader(r,s),this.attribSemantics.POSITION&&e.bindAttribLocation(r,0,this.attribSemantics.POSITION.symbol),e.linkProgram(r);if(!e.getProgramParameter(r,e.LINK_STATUS))return"Could not link program\nVALIDATE_STATUS: "+e.getProgramParameter(r,e.VALIDATE_STATUS)+", gl error ["+e.getError()+"]";for(var u=0;u<this._uniformList.length;u++){var a=this._uniformList[u],f=this._cache.get("locations");f[a]=e.getUniformLocation(r,a)}e.deleteShader(i),e.deleteShader(s),this._cache.put("program",r)},_checkShaderErrorMsg:function(e,t,n){if(!e.getShaderParameter(t,e.COMPILE_STATUS))return[e.getShaderInfoLog(t),E(n)].join("\n")},clone:function(){var e=new b({vertex:this.vertex,fragment:this.fragment,vertexDefines:n.clone(this.vertexDefines),fragmentDefines:n.clone(this.fragmentDefines)});for(var t in this._textureStatus)e._textureStatus[t]=n.clone(this._textureStatus[t]);return e},dispose:function(e){this._cache.use(e.__GLID__);var t=this._cache.get("program");t&&e.deleteProgram(t),this._cache.deleteContext(e.__GLID__),this._locations={}}}),S=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;b.parseImport=function(e){return e=e.replace(S,function(e,t,n){var e=b.source(n);return e?b.parseImport(e):(console.warn('Shader chunk "'+n+'" not existed in library'),"")}),e};var x=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;return b["import"]=function(e){e.replace(x,function(e,t,n,r){var r=r.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(r){var i=n.split("."),s=b.codes,o=0;while(o<i.length-1){var u=i[o++];s[u]||(s[u]={}),s=s[u]}u=i[o],s[u]=r}return r})},b.codes={},b.source=function(e){var t=e.split("."),n=b.codes,r=0;while(n&&r<t.length){var i=t[r++];n=n[i]}if(!n){console.warn('Shader "'+e+'" not existed in library');return}return n},b}),define("qtek/shader/source/basic.essl",[],function(){return"@export buildin.basic.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nuniform vec2 uvRepeat : [1.0, 1.0];\n\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 position : POSITION;\n\nattribute vec3 barycentric;\n\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvarying vec2 v_Texcoord;\nvarying vec3 v_Barycentric;\n\nvoid main()\n{\n    vec3 skinnedPosition = position;\n\n    #ifdef SKINNING\n        \n        @import buildin.chunk.skin_matrix\n        \n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n    #endif\n\n    v_Texcoord = texcoord * uvRepeat;\n    v_Barycentric = barycentric;\n\n    gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\n}\n\n@end\n\n\n\n\n@export buildin.basic.fragment\n\nvarying vec2 v_Texcoord;\nuniform sampler2D diffuseMap;\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform vec3 emission : [0.0, 0.0, 0.0];\nuniform float alpha : 1.0;\n\n// Uniforms for wireframe\nuniform float lineWidth : 0.0;\nuniform vec3 lineColor : [0.0, 0.0, 0.0];\nvarying vec3 v_Barycentric;\n\n#extension GL_OES_standard_derivatives : enable\n@import buildin.util.edge_factor\n\nvoid main()\n{\n\n    #ifdef RENDER_TEXCOORD\n        gl_FragColor = vec4(v_Texcoord, 1.0, 1.0);\n        return;\n    #endif\n\n    gl_FragColor = vec4(color, alpha);\n    \n    #ifdef DIFFUSEMAP_ENABLED\n        vec4 tex = texture2D( diffuseMap, v_Texcoord );\n\n        #ifdef SRGB_DECODE\n            tex.rgb = pow(tex.rgb, vec3(2.2));\n        #endif\n        \n        #if defined(DIFFUSEMAP_ALPHA_ALPHA)\n            gl_FragColor.a = tex.a;\n        #endif\n\n        gl_FragColor.rgb *= tex.rgb;\n    #endif\n\n    gl_FragColor.rgb += emission;\n    if( lineWidth > 0.01)\n    {\n        gl_FragColor.rgb = gl_FragColor.rgb * mix(lineColor, vec3(1.0), edgeFactor(lineWidth));\n    }\n}\n\n@end"}),define("qtek/shader/source/lambert.essl",[],function(){return"/**\n * http://en.wikipedia.org/wiki/Lambertian_reflectance\n */\n\n@export buildin.lambert.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n\nuniform vec2 uvRepeat : [1.0, 1.0];\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n\nattribute vec3 barycentric;\n\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvarying vec2 v_Texcoord;\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\nvarying vec3 v_Barycentric;\n\nvoid main()\n{\n\n    vec3 skinnedPosition = position;\n    vec3 skinnedNormal = normal;\n\n    #ifdef SKINNING\n        \n        @import buildin.chunk.skin_matrix\n\n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n        // Normal matrix ???\n        skinnedNormal = (skinMatrixWS * vec4(normal, 0.0)).xyz;\n    #endif\n\n    gl_Position = worldViewProjection * vec4( skinnedPosition, 1.0 );\n\n    v_Texcoord = texcoord * uvRepeat;\n    v_Normal = normalize( ( worldInverseTranspose * vec4(skinnedNormal, 0.0) ).xyz );\n    v_WorldPosition = ( world * vec4( skinnedPosition, 1.0) ).xyz;\n\n    v_Barycentric = barycentric;\n}\n\n@end\n\n\n\n\n@export buildin.lambert.fragment\n\nvarying vec2 v_Texcoord;\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\nuniform sampler2D alphaMap;\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform vec3 emission : [0.0, 0.0, 0.0];\nuniform float alpha : 1.0;\n\n// Uniforms for wireframe\nuniform float lineWidth : 0.0;\nuniform vec3 lineColor : [0.0, 0.0, 0.0];\nvarying vec3 v_Barycentric;\n\n#ifdef AMBIENT_LIGHT_NUMBER\n@import buildin.header.ambient_light\n#endif\n#ifdef POINT_LIGHT_NUMBER\n@import buildin.header.point_light\n#endif\n#ifdef DIRECTIONAL_LIGHT_NUMBER\n@import buildin.header.directional_light\n#endif\n#ifdef SPOT_LIGHT_NUMBER\n@import buildin.header.spot_light\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n// Import util functions and uniforms needed\n@import buildin.util.calculate_attenuation\n\n@import buildin.util.edge_factor\n\n@import buildin.plugin.compute_shadow_map\n\nvoid main()\n{\n    #ifdef RENDER_NORMAL\n        gl_FragColor = vec4(v_Normal, 1.0);\n        return;\n    #endif\n    #ifdef RENDER_TEXCOORD\n        gl_FragColor = vec4(v_Texcoord, 1.0, 1.0);\n        return;\n    #endif\n\n    gl_FragColor = vec4(color, alpha);\n\n    #ifdef DIFFUSEMAP_ENABLED\n        vec4 tex = texture2D( diffuseMap, v_Texcoord );\n        #ifdef SRGB_DECODE\n            tex.rgb = pow(tex.rgb, vec3(2.2));\n        #endif\n        gl_FragColor.rgb *= tex.rgb;\n        #ifdef DIFFUSEMAP_ALPHA_ALPHA\n            gl_FragColor.a *= tex.a;\n        #endif\n    #endif\n\n    vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n    \n    #ifdef AMBIENT_LIGHT_NUMBER\n        for(int i = 0; i < AMBIENT_LIGHT_NUMBER; i++)\n        {\n            diffuseColor += ambientLightColor[i];\n        }\n    #endif\n    // Compute point light color\n    #ifdef POINT_LIGHT_NUMBER\n        #if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[POINT_LIGHT_NUMBER];\n            if( shadowEnabled )\n            {\n                computeShadowOfPointLights( v_WorldPosition, shadowContribs );\n            }\n        #endif\n        for(int i = 0; i < POINT_LIGHT_NUMBER; i++)\n        {\n\n            vec3 lightPosition = pointLightPosition[i];\n            vec3 lightColor = pointLightColor[i];\n            float range = pointLightRange[i];\n\n            vec3 lightDirection = lightPosition - v_WorldPosition;\n\n            // Calculate point light attenuation\n            float dist = length(lightDirection);\n            float attenuation = lightAttenuation(dist, range);\n\n            // Normalize vectors\n            lightDirection /= dist;\n\n            float ndl = dot( v_Normal, lightDirection );\n\n            float shadowContrib = 1.0;\n            #if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n                if( shadowEnabled )\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            diffuseColor += lightColor * clamp(ndl, 0.0, 1.0) * attenuation * shadowContrib;\n        }\n    #endif\n    #ifdef DIRECTIONAL_LIGHT_NUMBER\n        #if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[DIRECTIONAL_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfDirectionalLights( v_WorldPosition, shadowContribs );\n            }\n        #endif\n        for(int i = 0; i < DIRECTIONAL_LIGHT_NUMBER; i++)\n        {\n            vec3 lightDirection = -directionalLightDirection[i];\n            vec3 lightColor = directionalLightColor[i];\n            \n            float ndl = dot( v_Normal, normalize( lightDirection ) );\n\n            float shadowContrib = 1.0;\n            #if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n                if( shadowEnabled )\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            diffuseColor += lightColor * clamp(ndl, 0.0, 1.0) * shadowContrib;\n        }\n    #endif\n    \n    #ifdef SPOT_LIGHT_NUMBER\n        #if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[SPOT_LIGHT_NUMBER];\n            if( shadowEnabled )\n            {\n                computeShadowOfSpotLights( v_WorldPosition, shadowContribs );\n            }\n        #endif\n        for(int i = 0; i < SPOT_LIGHT_NUMBER; i++)\n        {\n            vec3 lightPosition = -spotLightPosition[i];\n            vec3 spotLightDirection = -normalize( spotLightDirection[i] );\n            vec3 lightColor = spotLightColor[i];\n            float range = spotLightRange[i];\n            float a = spotLightUmbraAngleCosine[i];\n            float b = spotLightPenumbraAngleCosine[i];\n            float falloffFactor = spotLightFalloffFactor[i];\n\n            vec3 lightDirection = lightPosition - v_WorldPosition;\n            // Calculate attenuation\n            float dist = length(lightDirection);\n            float attenuation = lightAttenuation(dist, range); \n\n            // Normalize light direction\n            lightDirection /= dist;\n            // Calculate spot light fall off\n            float c = dot(spotLightDirection, lightDirection);\n\n            float falloff;\n            falloff = clamp((c - a) /( b - a), 0.0, 1.0);\n            falloff = pow(falloff, falloffFactor);\n\n            float ndl = dot(v_Normal, lightDirection);\n            ndl = clamp(ndl, 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n                if( shadowEnabled )\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            diffuseColor += lightColor * ndl * attenuation * (1.0-falloff) * shadowContrib;\n\n        }\n    #endif\n\n    gl_FragColor.rgb *= diffuseColor;\n    gl_FragColor.rgb += emission;\n    if(lineWidth > 0.01)\n    {\n        gl_FragColor.rgb = gl_FragColor.rgb * mix(lineColor, vec3(1.0), edgeFactor(lineWidth));\n    }\n}\n\n@end"}),define("qtek/shader/source/phong.essl",[],function(){return"\n// http://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\n\n@export buildin.phong.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n\nuniform vec2 uvRepeat : [1.0, 1.0];\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\nattribute vec4 tangent : TANGENT;\n\n#ifdef VERTEX_COLOR\nattribute vec4 color : COLOR;\n#endif\n\nattribute vec3 barycentric;\n\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvarying vec2 v_Texcoord;\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\nvarying vec3 v_Barycentric;\n\n#ifdef NORMALMAP_ENABLED\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\nvoid main()\n{\n    \n    vec3 skinnedPosition = position;\n    vec3 skinnedNormal = normal;\n    vec3 skinnedTangent = tangent.xyz;\n    #ifdef SKINNING\n        \n        @import buildin.chunk.skin_matrix\n\n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n        // Normal matrix ???\n        skinnedNormal = (skinMatrixWS * vec4(normal, 0.0)).xyz;\n        skinnedTangent = (skinMatrixWS * vec4(tangent.xyz, 0.0)).xyz;\n    #endif\n\n    gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\n\n    v_Texcoord = texcoord * uvRepeat;\n    v_WorldPosition = (world * vec4(skinnedPosition, 1.0)).xyz;\n    v_Barycentric = barycentric;\n\n    v_Normal = normalize((worldInverseTranspose * vec4(skinnedNormal, 0.0)).xyz);\n    \n    #ifdef NORMALMAP_ENABLED\n        v_Tangent = normalize((worldInverseTranspose * vec4(skinnedTangent, 0.0)).xyz);\n        v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n    #endif\n\n    #ifdef VERTEX_COLOR\n        v_Color = color;\n    #endif\n}\n\n@end\n\n\n@export buildin.phong.fragment\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\nvarying vec2 v_Texcoord;\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n#ifdef NORMALMAP_ENABLED\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\nuniform sampler2D diffuseMap;\nuniform sampler2D normalMap;\nuniform samplerCube environmentMap;\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\n\nuniform float shininess : 30;\n\nuniform vec3 specularColor : [1.0, 1.0, 1.0];\nuniform vec3 emission : [0.0, 0.0, 0.0];\n\nuniform float reflectivity : 0.5;\n\n// Uniforms for wireframe\nuniform float lineWidth : 0.0;\nuniform vec3 lineColor : [0.0, 0.0, 0.0];\nvarying vec3 v_Barycentric;\n\n#ifdef AMBIENT_LIGHT_NUMBER\n@import buildin.header.ambient_light\n#endif\n#ifdef POINT_LIGHT_NUMBER\n@import buildin.header.point_light\n#endif\n#ifdef DIRECTIONAL_LIGHT_NUMBER\n@import buildin.header.directional_light\n#endif\n#ifdef SPOT_LIGHT_NUMBER\n@import buildin.header.spot_light\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n// Import util functions and uniforms needed\n@import buildin.util.calculate_attenuation\n\n@import buildin.util.edge_factor\n\n@import buildin.plugin.compute_shadow_map\n\nvoid main()\n{\n    #ifdef RENDER_TEXCOORD\n        gl_FragColor = vec4(v_Texcoord, 1.0, 1.0);\n        return;\n    #endif\n\n    vec4 finalColor = vec4(color, alpha);\n\n    vec3 eyePos = viewInverse[3].xyz;\n    vec3 viewDirection = normalize(eyePos - v_WorldPosition);\n\n    #ifdef DIFFUSEMAP_ENABLED\n        vec4 tex = texture2D(diffuseMap, v_Texcoord);\n        #ifdef SRGB_DECODE\n            tex.rgb = pow(tex.rgb, vec3(2.2));\n        #endif\n        finalColor.rgb *= tex.rgb;\n        #ifdef DIFFUSEMAP_ALPHA_ALPHA\n            finalColor.a *= tex.a;\n        #endif\n    #endif\n\n    vec3 normal = v_Normal;\n    #ifdef NORMALMAP_ENABLED\n        normal = texture2D(normalMap, v_Texcoord).xyz * 2.0 - 1.0;\n        mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n        normal = normalize(tbn * normal);\n    #endif\n\n    #ifdef RENDER_NORMAL\n        gl_FragColor = vec4(normal, 1.0);\n        return;\n    #endif\n\n    // Diffuse part of all lights\n    vec3 diffuseTerm = vec3(0.0, 0.0, 0.0);\n    // Specular part of all lights\n    vec3 specularTerm = vec3(0.0, 0.0, 0.0);\n    \n    #ifdef AMBIENT_LIGHT_NUMBER\n        for(int i = 0; i < AMBIENT_LIGHT_NUMBER; i++)\n        {\n            diffuseTerm += ambientLightColor[i];\n        }\n    #endif\n    #ifdef POINT_LIGHT_NUMBER\n        #if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[POINT_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfPointLights(v_WorldPosition, shadowContribs);\n            }\n        #endif\n        for(int i = 0; i < POINT_LIGHT_NUMBER; i++)\n        {\n            vec3 lightPosition = pointLightPosition[i];\n            vec3 lightColor = pointLightColor[i];\n            float range = pointLightRange[i];\n\n            vec3 lightDirection = lightPosition - v_WorldPosition;\n\n            // Calculate point light attenuation\n            float dist = length(lightDirection);\n            float attenuation = lightAttenuation(dist, range); \n\n            // Normalize vectors\n            lightDirection /= dist;\n            vec3 halfVector = normalize(lightDirection + viewDirection);\n\n            float ndh = dot(normal, halfVector);\n            ndh = clamp(ndh, 0.0, 1.0);\n\n            float ndl = dot(normal,  lightDirection);\n            ndl = clamp(ndl, 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n                if(shadowEnabled)\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            vec3 li = lightColor * ndl * attenuation * shadowContrib;\n\n            diffuseTerm += li;\n            if (shininess > 0.0)\n            {\n                specularTerm += li * pow(ndh, shininess);\n            }\n\n        }\n    #endif\n\n    #ifdef DIRECTIONAL_LIGHT_NUMBER\n        #if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[DIRECTIONAL_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfDirectionalLights(v_WorldPosition, shadowContribs);\n            }\n        #endif\n        for(int i = 0; i < DIRECTIONAL_LIGHT_NUMBER; i++)\n        {\n\n            vec3 lightDirection = -normalize(directionalLightDirection[i]);\n            vec3 lightColor = directionalLightColor[i];\n\n            vec3 halfVector = normalize(lightDirection + viewDirection);\n\n            float ndh = dot(normal, halfVector);\n            ndh = clamp(ndh, 0.0, 1.0);\n\n            float ndl = dot(normal, lightDirection);\n            ndl = clamp(ndl, 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n                if(shadowEnabled)\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            vec3 li = lightColor * ndl * shadowContrib;\n\n            diffuseTerm += li;\n            if (shininess > 0.0)\n            {\n                specularTerm += li * pow(ndh, shininess);\n            }\n        }\n    #endif\n\n    #ifdef SPOT_LIGHT_NUMBER\n        #if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[SPOT_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfSpotLights(v_WorldPosition, shadowContribs);\n            }\n        #endif\n        for(int i = 0; i < SPOT_LIGHT_NUMBER; i++)\n        {\n            vec3 lightPosition = spotLightPosition[i];\n            vec3 spotLightDirection = -normalize(spotLightDirection[i]);\n            vec3 lightColor = spotLightColor[i];\n            float range = spotLightRange[i];\n            float a = spotLightUmbraAngleCosine[i];\n            float b = spotLightPenumbraAngleCosine[i];\n            float falloffFactor = spotLightFalloffFactor[i];\n\n            vec3 lightDirection = lightPosition - v_WorldPosition;\n            // Calculate attenuation\n            float dist = length(lightDirection);\n            float attenuation = lightAttenuation(dist, range); \n\n            // Normalize light direction\n            lightDirection /= dist;\n            // Calculate spot light fall off\n            float c = dot(spotLightDirection, lightDirection);\n\n            float falloff;\n            // Fomular from real-time-rendering\n            falloff = clamp((c - a) /( b - a), 0.0, 1.0);\n            falloff = pow(falloff, falloffFactor);\n\n            vec3 halfVector = normalize(lightDirection + viewDirection);\n\n            float ndh = dot(normal, halfVector);\n            ndh = clamp(ndh, 0.0, 1.0);\n\n            float ndl = dot(normal, lightDirection);\n            ndl = clamp(ndl, 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n                if (shadowEnabled)\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            vec3 li = lightColor * ndl * attenuation * (1.0-falloff) * shadowContrib;\n\n            diffuseTerm += li;\n            if (shininess > 0.0)\n            {\n                specularTerm += li * pow(ndh, shininess);\n            }\n        }\n    #endif\n\n    finalColor.rgb *= diffuseTerm;\n    finalColor.rgb += specularTerm * specularColor;\n    finalColor.rgb += emission;\n\n    #ifdef ENVIRONMENTMAP_ENABLED\n        vec3 envTex = textureCube(environmentMap, reflect(-viewDirection, normal)).xyz;\n        finalColor.rgb = finalColor.rgb + envTex * reflectivity;\n    #endif\n\n    if(lineWidth > 0.01)\n    {\n        finalColor.rgb = finalColor.rgb * mix(lineColor, vec3(1.0), edgeFactor(lineWidth));\n    }\n\n    #ifdef GAMMA_ENCODE\n        finalColor.rgb = pow(finalColor.rgb, vec3(1 / 2.2));\n    #endif\n\n    gl_FragColor = finalColor;\n}\n\n@end"}),define("qtek/shader/source/physical.essl",[],function(){return"\n// http://blog.selfshadow.com/publications/s2013-shading-course/\n\n@export buildin.physical.vertex\n\n@import buildin.phong.vertex\n\n@end\n\n\n@export buildin.physical.fragment\n\n#define PI 3.14159265358979\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\nvarying vec2 v_Texcoord;\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n#ifdef NORMALMAP_ENABLED\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\nuniform sampler2D diffuseMap;\nuniform sampler2D normalMap;\nuniform samplerCube environmentMap;\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\n\nuniform float glossiness : 0.5;\n\nuniform vec3 specularColor : [0.1, 0.1, 0.1];\nuniform vec3 emission : [0.0, 0.0, 0.0];\n\n// Uniforms for wireframe\nuniform float lineWidth : 0.0;\nuniform vec3 lineColor : [0.0, 0.0, 0.0];\nvarying vec3 v_Barycentric;\n\n#ifdef AMBIENT_LIGHT_NUMBER\n@import buildin.header.ambient_light\n#endif\n#ifdef POINT_LIGHT_NUMBER\n@import buildin.header.point_light\n#endif\n#ifdef DIRECTIONAL_LIGHT_NUMBER\n@import buildin.header.directional_light\n#endif\n#ifdef SPOT_LIGHT_NUMBER\n@import buildin.header.spot_light\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\n// Import util functions and uniforms needed\n@import buildin.util.calculate_attenuation\n\n@import buildin.util.edge_factor\n\n@import buildin.plugin.compute_shadow_map\n\n\nfloat G_Smith(float glossiness, float ndv, float ndl)\n{\n    // float k = (roughness+1.0) * (roughness+1.0) * 0.125;\n    float roughness = 1.0 - glossiness;\n    float k = roughness * roughness / 2.0;\n    float G1V = ndv / (ndv * (1.0 - k) + k);\n    float G1L = ndl / (ndl * (1.0 - k) + k);\n    return G1L * G1V;\n}\n\nvec3 F_Schlick(float ldn) {\n    return specularColor + (1.0 - specularColor) * pow(1.0 - ldn, 5.0);\n}\n\nfloat D_Phong(float g, float ndh) {\n    // from black ops 2\n    float a = pow(8192.0, g);\n    return (a + 2.0) / 8.0 * pow(ndh, a);\n}\n\nfloat D_GGX(float g, float ndh) {\n    float r = 1.0 - g;\n    float a = r * r;\n    float tmp = ndh * ndh * (a - 1.0) + 1.0;\n    return a / (PI * tmp * tmp);\n}\n\nvoid main()\n{\n    #ifdef RENDER_TEXCOORD\n        gl_FragColor = vec4(v_Texcoord, 1.0, 1.0);\n        return;\n    #endif\n\n    vec4 finalColor = vec4(color, alpha);\n\n    vec3 eyePos = viewInverse[3].xyz;\n    vec3 V = normalize(eyePos - v_WorldPosition);\n    float g = glossiness;\n\n    #ifdef DIFFUSEMAP_ENABLED\n        vec4 tex = texture2D(diffuseMap, v_Texcoord);\n        #ifdef SRGB_DECODE\n            tex.rgb = pow(tex.rgb, vec3(2.2));\n        #endif\n        finalColor.rgb *= tex.rgb;\n        #ifdef DIFFUSEMAP_ALPHA_ALPHA\n            finalColor.a *= tex.a;\n        #endif\n        #ifdef DIFFUSEMAP_ALPHA_GLOSS\n            g *= tex.a;\n        #endif\n    #endif\n\n    vec3 N = v_Normal;\n    #ifdef NORMALMAP_ENABLED\n        N = texture2D(normalMap, v_Texcoord).xyz * 2.0 - 1.0;\n        mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n        N = normalize(tbn * N);\n    #endif\n\n    #ifdef RENDER_NORMAL\n        gl_FragColor = vec4(N, 1.0);\n        return;\n    #endif\n\n    #ifdef RENDER_GLOSSINESS\n        gl_FragColor = vec4(vec3(g), 1.0);\n        return;\n    #endif\n\n    float ndv = dot(N, V);\n\n    // Diffuse part of all lights\n    vec3 diffuseTerm = vec3(0.0, 0.0, 0.0);\n    // Specular part of all lights\n    vec3 specularTerm = vec3(0.0, 0.0, 0.0);\n    \n    #ifdef AMBIENT_LIGHT_NUMBER\n        for(int i = 0; i < AMBIENT_LIGHT_NUMBER; i++)\n        {\n            // Hemisphere ambient lighting from cryengine\n            diffuseTerm += ambientLightColor[i] * (clamp(N.y * 0.7, 0.0, 1.0) + 0.3);\n            // diffuseTerm += ambientLightColor[i];\n        }\n    #endif\n    #ifdef POINT_LIGHT_NUMBER\n        #if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[POINT_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfPointLights(v_WorldPosition, shadowContribs);\n            }\n        #endif\n        for(int i = 0; i < POINT_LIGHT_NUMBER; i++)\n        {\n\n            vec3 lightPosition = pointLightPosition[i];\n            vec3 lc = pointLightColor[i];\n            float range = pointLightRange[i];\n\n            vec3 L = lightPosition - v_WorldPosition;\n\n            // Calculate point light attenuation\n            float dist = length(L);\n            float attenuation = lightAttenuation(dist, range); \n            L /= dist;\n            vec3 H = normalize(L + V);\n            float ndl = clamp(dot(N, L), 0.0, 1.0);\n            float ndh = clamp(dot(N, H), 0.0, 1.0);\n            float ldn = clamp(dot(L, N), 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n                if(shadowEnabled)\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            vec3 li = lc * ndl * attenuation * shadowContrib;\n            diffuseTerm += li;\n            specularTerm += li * F_Schlick(ldn) * D_Phong(g, ndh);\n        }\n    #endif\n\n    #ifdef DIRECTIONAL_LIGHT_NUMBER\n        #if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[DIRECTIONAL_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfDirectionalLights(v_WorldPosition, shadowContribs);\n            }\n        #endif\n        for(int i = 0; i < DIRECTIONAL_LIGHT_NUMBER; i++)\n        {\n\n            vec3 L = -normalize(directionalLightDirection[i]);\n            vec3 lc = directionalLightColor[i];\n\n            vec3 H = normalize(L + V);\n            float ndl = clamp(dot(N, L), 0.0, 1.0);\n            float ndh = clamp(dot(N, H), 0.0, 1.0);\n            float ldn = clamp(dot(L, N), 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n                if(shadowEnabled)\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            vec3 li = lc * ndl * shadowContrib;\n\n            diffuseTerm += li;\n            specularTerm += li * F_Schlick(ldn) * D_Phong(g, ndh);\n        }\n    #endif\n\n    #ifdef SPOT_LIGHT_NUMBER\n        #if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n            float shadowContribs[SPOT_LIGHT_NUMBER];\n            if(shadowEnabled)\n            {\n                computeShadowOfSpotLights(v_WorldPosition, shadowContribs);\n            }\n        #endif\n        for(int i = 0; i < SPOT_LIGHT_NUMBER; i++)\n        {\n            vec3 lightPosition = spotLightPosition[i];\n            vec3 spotLightDirection = -normalize(spotLightDirection[i]);\n            vec3 lc = spotLightColor[i];\n            float range = spotLightRange[i];\n            float a = spotLightUmbraAngleCosine[i];\n            float b = spotLightPenumbraAngleCosine[i];\n            float falloffFactor = spotLightFalloffFactor[i];\n\n            vec3 L = lightPosition - v_WorldPosition;\n            // Calculate attenuation\n            float dist = length(L);\n            float attenuation = lightAttenuation(dist, range); \n\n            // Normalize light direction\n            L /= dist;\n            // Calculate spot light fall off\n            float c = dot(spotLightDirection, L);\n\n            float falloff;\n            // Fomular from real-time-rendering\n            falloff = clamp((c - a) /( b - a), 0.0, 1.0);\n            falloff = pow(falloff, falloffFactor);\n\n            vec3 H = normalize(L + V);\n            float ndl = clamp(dot(N, L), 0.0, 1.0);\n            float ndh = clamp(dot(N, H), 0.0, 1.0);\n            float ldn = clamp(dot(L, N), 0.0, 1.0);\n\n            float shadowContrib = 1.0;\n            #if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n                if (shadowEnabled)\n                {\n                    shadowContrib = shadowContribs[i];\n                }\n            #endif\n\n            vec3 li = lc * attenuation * (1.0-falloff) * shadowContrib * ndl;\n\n            diffuseTerm += li;\n            specularTerm += li * F_Schlick(ldn) * D_Phong(g, ndh);\n        }\n    #endif\n\n    finalColor.rgb *= diffuseTerm;\n    finalColor.rgb += specularTerm;\n    finalColor.rgb += emission;\n\n    #ifdef ENVIRONMENTMAP_ENABLED\n        vec3 envTex = textureCube(environmentMap, reflect(-V, N)).xyz;\n        finalColor.rgb = finalColor.rgb + envTex * g;\n    #endif\n\n    if(lineWidth > 0.)\n    {\n        finalColor.rgb = finalColor.rgb * mix(lineColor, vec3(1.0), edgeFactor(lineWidth));\n    }\n\n    #ifdef GAMMA_ENCODE\n        finalColor.rgb = pow(finalColor.rgb, vec3(1 / 2.2));\n    #endif\n    gl_FragColor = finalColor;\n}\n\n@end"}),define("qtek/shader/source/wireframe.essl",[],function(){return"@export buildin.wireframe.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\n\nattribute vec3 position : POSITION;\nattribute vec3 barycentric;\n\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvarying vec3 v_Barycentric;\n\nvoid main()\n{\n\n    vec3 skinnedPosition = position;\n    #ifdef SKINNING\n\n        @import buildin.chunk.skin_matrix\n\n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n    #endif\n\n    gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0 );\n\n    v_Barycentric = barycentric;\n}\n\n@end\n\n\n@export buildin.wireframe.fragment\n\nuniform vec3 color : [0.0, 0.0, 0.0];\n\nuniform float alpha : 1.0;\nuniform float lineWidth : 1.0;\n\nvarying vec3 v_Barycentric;\n\n#extension GL_OES_standard_derivatives : enable\n\n@import buildin.util.edge_factor\n\nvoid main()\n{\n\n    gl_FragColor.rgb = color;\n    gl_FragColor.a = ( 1.0-edgeFactor(lineWidth) ) * alpha;\n}\n\n@end"}),define("qtek/shader/source/skybox.essl",[],function(){return"@export buildin.skybox.vertex\n\nuniform mat4 world : WORLD;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\n\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n    v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end\n\n@export buildin.skybox.fragment\n\nuniform mat4 viewInverse : VIEWINVERSE;\nuniform samplerCube environmentMap;\n\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n    vec3 eyePos = viewInverse[3].xyz;\n    vec3 viewDirection = normalize(v_WorldPosition - eyePos);\n\n    vec3 tex = textureCube(environmentMap, viewDirection).xyz;\n\n    #ifdef SRGB_DECODE\n        tex.rgb = pow(tex.rgb, vec3(2.2));\n    #endif\n    \n    gl_FragColor = vec4(tex, 1.0);\n}\n@end"}),define("qtek/shader/source/util.essl",[],function(){return"// Use light attenuation formula in\n// http://blog.slindev.com/2011/01/10/natural-light-attenuation/\n@export buildin.util.calculate_attenuation\n\nuniform float attenuationFactor : 5.0;\n\nfloat lightAttenuation(float dist, float range)\n{\n    float attenuation = 1.0;\n    if( range > 0.0)\n    {\n        attenuation = dist*dist/(range*range);\n        float att_s = attenuationFactor;\n        attenuation = 1.0/(attenuation*att_s+1.0);\n        att_s = 1.0/(att_s+1.0);\n        attenuation = attenuation - att_s;\n        attenuation /= 1.0 - att_s;\n    }\n    return attenuation;\n}\n\n@end\n\n//http://codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/\n@export buildin.util.edge_factor\n\nfloat edgeFactor(float width)\n{\n    vec3 d = fwidth(v_Barycentric);\n    vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\n    return min(min(a3.x, a3.y), a3.z);\n}\n\n@end\n\n// Pack depth\n// Float value can only be [0.0 - 1.0) ?\n@export buildin.util.encode_float\nvec4 encodeFloat( const in float depth )\n{\n\n    const vec4 bitShifts = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\n    const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n    vec4 res = fract( depth * bitShifts );\n    res -= res.xxyz * bit_mask;\n\n    return res;\n}\n@end\n\n@export buildin.util.decode_float\nfloat decodeFloat(const in vec4 colour)\n{\n    const vec4 bitShifts = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n    return dot(colour, bitShifts);\n}\n@end\n\n// http://graphicrants.blogspot.com/2009/04/rgbm-color-encoding.html\n@export buildin.util.rgbm_decode\nvec3 RGBMDecode(vec4 rgbm, float range) {\n  return range * rgbm.rgb * rgbm.a;\n}\n@end\n\n@export buildin.util.rgbm_encode\nvec4 RGBMEncode(vec3 color, float range) {\n    vec4 rgbm;\n    color *= 1.0 / range;\n    rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6 ) ), 0.0, 1.0);\n    rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\n    rgbm.rgb = color / rgbm.a;\n    return rgbm;\n}\n@end\n\n\n@export buildin.chunk.skin_matrix\n\n// Weighted Sum Skinning Matrix\nmat4 skinMatrixWS;\nif (joint.x >= 0.0)\n{\n    skinMatrixWS = skinMatrix[int(joint.x)] * weight.x;\n}\nif (joint.y >= 0.0)\n{\n    skinMatrixWS += skinMatrix[int(joint.y)] * weight.y;\n}\nif (joint.z >= 0.0)\n{\n    skinMatrixWS += skinMatrix[int(joint.z)] * weight.z;\n}\nif (joint.w >= 0.0)\n{\n    skinMatrixWS += skinMatrix[int(joint.w)] * (1.0-weight.x-weight.y-weight.z);\n}\n@end\n"}),define("qtek/shader/source/prez.essl",[],function(){return"// Shader for prez pass\n@export buildin.prez.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\n\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvoid main()\n{\n\n    vec3 skinnedPosition = position;\n\n    #ifdef SKINNING\n        \n        @import buildin.chunk.skin_matrix\n        \n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n    #endif\n    \n    gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\n}\n\n@end\n\n\n@export buildin.prez.fragment\n\nvoid main()\n{\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n\n@end"}),define("qtek/shader/source/shadowmap.essl",[],function(){return"\n@export buildin.sm.depth.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\n\n#ifdef SHADOW_TRANSPARENT \nattribute vec2 texcoord : TEXCOORD_0;\n#endif\n\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvarying vec4 v_ViewPosition;\n\n#ifdef SHADOW_TRANSPARENT\nvarying vec2 v_Texcoord;\n#endif\n\nvoid main(){\n    \n    vec3 skinnedPosition = position;\n    \n    #ifdef SKINNING\n\n        @import buildin.chunk.skin_matrix\n\n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n    #endif\n\n    v_ViewPosition = worldViewProjection * vec4(skinnedPosition, 1.0);\n    gl_Position = v_ViewPosition;\n\n    #ifdef SHADOW_TRANSPARENT\n        v_Texcoord = texcoord;\n    #endif\n}\n@end\n\n@export buildin.sm.depth.fragment\n\nvarying vec4 v_ViewPosition;\n\n#ifdef SHADOW_TRANSPARENT\nvarying vec2 v_Texcoord;\n#endif\n\nuniform float bias : 0.001;\nuniform float slopeScale : 1.0;\n\n#ifdef SHADOW_TRANSPARENT\nuniform sampler2D transparentMap;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\n@import buildin.util.encode_float\n\nvoid main(){\n    // Whats the difference between gl_FragCoord.z and this v_ViewPosition\n    // gl_FragCoord consider the polygon offset ?\n    float depth = v_ViewPosition.z / v_ViewPosition.w;\n    // float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n    #ifdef USE_VSM\n        depth = depth * 0.5 + 0.5;\n        float moment1 = depth;\n        float moment2 = depth * depth;\n\n        // Adjusting moments using partial derivative\n        float dx = dFdx(depth);\n        float dy = dFdy(depth);\n        moment2 += 0.25*(dx*dx+dy*dy);\n\n        gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\n    #else\n        // Add slope scaled bias using partial derivative\n        float dx = dFdx(depth);\n        float dy = dFdy(depth);\n        depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\n\n        #ifdef SHADOW_TRANSPARENT\n            if (texture2D(transparentMap, v_Texcoord).a <= 0.1) {\n                // Hi-Z\n                gl_FragColor = encodeFloat(0.9999);\n                return;\n            }\n        #endif\n\n        gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\n    #endif\n}\n@end\n\n@export buildin.sm.debug_depth\n\nuniform sampler2D depthMap;\nvarying vec2 v_Texcoord;\n\n@import buildin.util.decode_float\n\nvoid main() {\n    vec4 tex = texture2D(depthMap, v_Texcoord);\n    #ifdef USE_VSM\n        gl_FragColor = vec4(tex.rgb, 1.0);\n    #else\n        float depth = decodeFloat(tex);\n        gl_FragColor = vec4(depth, depth, depth, 1.0);\n    #endif\n}\n\n@end\n\n\n@export buildin.sm.distance.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\n\nattribute vec3 position : POSITION;\n\n#ifdef SKINNING\nattribute vec3 boneWeight;\nattribute vec4 boneIndex;\n\nuniform mat4 skinMatrix[JOINT_NUMBER] : SKIN_MATRIX;\n#endif\n\nvarying vec3 v_WorldPosition;\n\nvoid main(){\n\n    vec3 skinnedPosition = position;\n    #ifdef SKINNING\n        @import buildin.chunk.skin_matrix\n\n        skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\n    #endif\n\n    gl_Position = worldViewProjection * vec4(skinnedPosition , 1.0);\n    v_WorldPosition = (world * vec4(skinnedPosition, 1.0)).xyz;\n}\n\n@end\n\n@export buildin.sm.distance.fragment\n\nuniform vec3 lightPosition;\nuniform float range : 100;\n\nvarying vec3 v_WorldPosition;\n\n@import buildin.util.encode_float\n\nvoid main(){\n    float dist = distance(lightPosition, v_WorldPosition);\n    #ifdef USE_VSM\n        gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\n    #else\n        dist = dist / range;\n        gl_FragColor = encodeFloat(dist);\n    #endif\n}\n@end\n\n@export buildin.plugin.compute_shadow_map\n\n#if defined(SPOT_LIGHT_SHADOWMAP_NUMBER) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER) || defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n\n#ifdef SPOT_LIGHT_SHADOWMAP_NUMBER\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_NUMBER];\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_NUMBER];\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER\n#if defined(SHADOW_CASCADE)\nuniform sampler2D directionalLightShadowMaps[SHADOW_CASCADE];\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE];\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE];\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE];\n#else\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER];\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER];\n#endif\n#endif\n\n#ifdef POINT_LIGHT_SHADOWMAP_NUMBER\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_NUMBER];\nuniform float pointLightRanges[POINT_LIGHT_SHADOWMAP_NUMBER];\n#endif\n\nuniform bool shadowEnabled : true;\n\n@import buildin.util.decode_float\n\n#if defined(DIRECTIONAL_LIGHT_NUMBER) || defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\n    vec4 tex = texture2D(map, uv);\n    return decodeFloat(tex) * 2.0 - 1.0< z ? 0.0 : 1.0;\n}\n\nfloat pcf(sampler2D map, vec2 uv, float z){\n\n    float shadowContrib = tapShadowMap(map, uv, z);\n    float offset = 1.0 / 2048.0;\n    shadowContrib += tapShadowMap(map, uv+vec2(offset, 0.0), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(offset, offset), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(-offset, offset), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(-offset, 0.0), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(-offset, -offset), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(offset, -offset), z);\n    shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset), z);\n\n    return shadowContrib / 9.0;\n}\nfloat chebyshevUpperBound(vec2 moments, float z){\n    float p = 0.0;\n    z = z * 0.5 + 0.5;\n    if (z <= moments.x) {\n        p = 1.0;\n    }\n    float variance = moments.y - moments.x * moments.x;\n    // http://fabiensanglard.net/shadowmappingVSM/\n    variance = max(variance, 0.0000001);\n    // Compute probabilistic upper bound. \n    float mD = moments.x - z;\n    float pMax = variance / (variance + mD * mD);\n    // Now reduce light-bleeding by removing the [0, x] tail and linearly rescaling (x, 1]\n    // TODO : bleedBias parameter ?\n    pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\n    return max(p, pMax);\n}\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position){\n    \n    vec4 posInLightSpace = lightVPM * vec4(v_WorldPosition, 1.0);\n    posInLightSpace.xyz /= posInLightSpace.w;\n    float z = posInLightSpace.z;\n    // In frustum\n    if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\n        all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\n        // To texture uv\n        vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\n\n        #ifdef USE_VSM\n            vec2 moments = texture2D(map, uv).xy;\n            return chebyshevUpperBound(moments, z);\n        #else\n            return pcf(map, uv, z);\n        #endif\n    }\n    return 1.0;\n}\n\n#endif\n\n#ifdef POINT_LIGHT_SHADOWMAP_NUMBER\n\nfloat computeShadowOfCube(samplerCube map, vec3 direction, float range){\n    vec4 shadowTex = textureCube(map, direction);\n    float dist = length(direction);\n\n    #ifdef USE_VSM\n        vec2 moments = shadowTex.xy;\n        float variance = moments.y - moments.x * moments.x;\n        float mD = moments.x - dist;\n        float p = variance / (variance + mD * mD);\n        if(moments.x + 0.001 < dist){\n            return clamp(p, 0.0, 1.0);\n        }else{\n            return 1.0;\n        }\n    #else\n        if((decodeFloat(shadowTex) + 0.0002) * range < dist){\n            return 0.0;\n        }else{\n            return 1.0;\n        }\n    #endif\n}\n#endif\n\n#if defined(SPOT_LIGHT_SHADOWMAP_NUMBER)\n\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_NUMBER] ){\n    for(int i = 0; i < SPOT_LIGHT_SHADOWMAP_NUMBER; i++){\n        float shadowContrib = computeShadowContrib(spotLightShadowMaps[i], spotLightMatrices[i], position);\n        shadowContribs[i] = shadowContrib;\n    }\n    // set default fallof of rest lights\n    for(int i = SPOT_LIGHT_SHADOWMAP_NUMBER; i < SPOT_LIGHT_NUMBER; i++){\n        shadowContribs[i] = 1.0;\n    }\n}\n\n#endif\n\n\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER)\n\n#ifdef SHADOW_CASCADE\n\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_NUMBER]){\n    // http://www.opengl.org/wiki/Compute_eye_space_from_window_space\n    float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\n                    / (gl_DepthRange.far - gl_DepthRange.near);\n\n    for (int i = 0; i < SHADOW_CASCADE; i++) {\n        if (\n            depth >= shadowCascadeClipsNear[i] &&\n            depth <= shadowCascadeClipsFar[i]\n        ) {\n            float shadowContrib = computeShadowContrib(directionalLightShadowMaps[i], directionalLightMatrices[i], position);\n            // TODO Will get a sampler needs to be be uniform error in native gl\n            shadowContribs[0] = shadowContrib;\n        }\n    }\n    // set default fallof of rest lights\n    for(int i = DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER; i < DIRECTIONAL_LIGHT_NUMBER; i++){\n        shadowContribs[i] = 1.0;\n    }\n}\n\n#else\n\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_NUMBER]){\n    for(int i = 0; i < DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER; i++){\n        float shadowContrib = computeShadowContrib(directionalLightShadowMaps[i], directionalLightMatrices[i], position);\n        shadowContribs[i] = shadowContrib;\n    }\n    // set default fallof of rest lights\n    for(int i = DIRECTIONAL_LIGHT_SHADOWMAP_NUMBER; i < DIRECTIONAL_LIGHT_NUMBER; i++){\n        shadowContribs[i] = 1.0;\n    }\n}\n#endif\n\n#endif\n\n\n#if defined(POINT_LIGHT_SHADOWMAP_NUMBER)\n\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_NUMBER] ){\n    for(int i = 0; i < POINT_LIGHT_SHADOWMAP_NUMBER; i++){\n        vec3 lightPosition = pointLightPosition[i];\n        vec3 direction = position - lightPosition;\n        shadowContribs[i] = computeShadowOfCube(pointLightShadowMaps[i], direction, pointLightRanges[i]);\n    }\n    for(int i = POINT_LIGHT_SHADOWMAP_NUMBER; i < POINT_LIGHT_NUMBER; i++){\n        shadowContribs[i] = 1.0;\n    }\n}\n\n#endif\n\n#endif\n\n@end"}),define("qtek/shader/source/compositor/vertex.essl",[],function(){return"\n@export buildin.compositor.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n    v_Texcoord = texcoord;\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end"}),define("qtek/shader/source/compositor/coloradjust.essl",[],function(){return'@export buildin.compositor.coloradjust\n\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float exposure : 0.0;\nuniform float gamma : 1.0;\nuniform float saturation : 1.0;\n\n// Values from "Graphics Shaders: Theory and Practice" by Bailey and Cunningham\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n    vec4 tex = texture2D( texture, v_Texcoord);\n\n    // brightness\n    vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n    // contrast\n    color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n    // exposure\n    color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\n    // gamma\n    color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\n    // saturation\n    float luminance = dot( color, w );\n    color = mix(vec3(luminance), color, saturation);\n    \n    gl_FragColor = vec4(color, tex.a);\n}\n\n@end\n\n// Seperate shader for float texture\n@export buildin.compositor.brightness\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n\nuniform float brightness : 0.0;\n\nvoid main()\n{\n    vec4 tex = texture2D( texture, v_Texcoord);\n    vec3 color = tex.rgb + vec3(brightness);\n    gl_FragColor = vec4(color, tex.a);\n}\n@end\n\n@export buildin.compositor.contrast\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n\nuniform float contrast : 1.0;\n\nvoid main()\n{\n    vec4 tex = texture2D( texture, v_Texcoord);\n    vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\n    gl_FragColor = vec4(color, tex.a);\n}\n@end\n\n@export buildin.compositor.exposure\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n\nuniform float exposure : 0.0;\n\nvoid main()\n{\n    vec4 tex = texture2D(texture, v_Texcoord);\n    vec3 color = tex.rgb * pow(2.0, exposure);\n    gl_FragColor = vec4(color, tex.a);\n}\n@end\n\n@export buildin.compositor.gamma\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n\nuniform float gamma : 1.0;\n\nvoid main()\n{\n    vec4 tex = texture2D(texture, v_Texcoord);\n    vec3 color = pow(tex.rgb, vec3(gamma));\n    gl_FragColor = vec4(color, tex.a);\n}\n@end\n\n@export buildin.compositor.saturation\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n\nuniform float saturation : 1.0;\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n    vec4 tex = texture2D(texture, v_Texcoord);\n    vec3 color = tex.rgb;\n    float luminance = dot(color, w);\n    color = mix(vec3(luminance), color, saturation);\n    gl_FragColor = vec4(color, tex.a);\n}\n@end'}),define("qtek/shader/source/compositor/blur.essl",[],function(){return"@export buildin.compositor.gaussian_blur_h\n\nuniform sampler2D texture; // the texture with the scene you want to blur\nvarying vec2 v_Texcoord;\n \nuniform float blurSize : 2.0; \nuniform float textureWidth : 512.0;\n\nvoid main(void)\n{\n   vec4 sum = vec4(0.0);\n   float blurOffset = blurSize / textureWidth;\n   // blur in y (vertical)\n   // take nine samples, with the distance blurSize between them\n   sum += texture2D(texture, vec2(max(v_Texcoord.x - 4.0*blurOffset, 0.0), v_Texcoord.y)) * 0.05;\n   sum += texture2D(texture, vec2(max(v_Texcoord.x - 3.0*blurOffset, 0.0), v_Texcoord.y)) * 0.09;\n   sum += texture2D(texture, vec2(max(v_Texcoord.x - 2.0*blurOffset, 0.0), v_Texcoord.y)) * 0.12;\n   sum += texture2D(texture, vec2(max(v_Texcoord.x - blurOffset, 0.0), v_Texcoord.y)) * 0.15;\n   sum += texture2D(texture, vec2(v_Texcoord.x, v_Texcoord.y)) * 0.18;\n   sum += texture2D(texture, vec2(min(v_Texcoord.x + blurOffset, 1.0), v_Texcoord.y)) * 0.15;\n   sum += texture2D(texture, vec2(min(v_Texcoord.x + 2.0*blurOffset, 1.0), v_Texcoord.y)) * 0.12;\n   sum += texture2D(texture, vec2(min(v_Texcoord.x + 3.0*blurOffset, 1.0), v_Texcoord.y)) * 0.09;\n   sum += texture2D(texture, vec2(min(v_Texcoord.x + 4.0*blurOffset, 1.0), v_Texcoord.y)) * 0.05;\n \n   gl_FragColor = sum;\n}\n\n@end\n\n@export buildin.compositor.gaussian_blur_v\n\nuniform sampler2D texture;\nvarying vec2 v_Texcoord;\n \nuniform float blurSize : 2.0;\nuniform float textureHeight : 512.0;\n \nvoid main(void)\n{\n   vec4 sum = vec4(0.0);\n   float blurOffset = blurSize / textureHeight;\n   // blur in y (vertical)\n   // take nine samples, with the distance blurSize between them\n   sum += texture2D(texture, vec2(v_Texcoord.x, max(v_Texcoord.y - 4.0*blurOffset, 0.0))) * 0.05;\n   sum += texture2D(texture, vec2(v_Texcoord.x, max(v_Texcoord.y - 3.0*blurOffset, 0.0))) * 0.09;\n   sum += texture2D(texture, vec2(v_Texcoord.x, max(v_Texcoord.y - 2.0*blurOffset, 0.0))) * 0.12;\n   sum += texture2D(texture, vec2(v_Texcoord.x, max(v_Texcoord.y - blurOffset, 0.0))) * 0.15;\n   sum += texture2D(texture, vec2(v_Texcoord.x, v_Texcoord.y)) * 0.18;\n   sum += texture2D(texture, vec2(v_Texcoord.x, min(v_Texcoord.y + blurOffset, 1.0))) * 0.15;\n   sum += texture2D(texture, vec2(v_Texcoord.x, min(v_Texcoord.y + 2.0*blurOffset, 1.0))) * 0.12;\n   sum += texture2D(texture, vec2(v_Texcoord.x, min(v_Texcoord.y + 3.0*blurOffset, 1.0))) * 0.09;\n   sum += texture2D(texture, vec2(v_Texcoord.x, min(v_Texcoord.y + 4.0*blurOffset, 1.0))) * 0.05;\n \n   gl_FragColor = sum;\n}\n\n@end\n\n@export buildin.compositor.box_blur\n\nuniform sampler2D texture;\nvarying vec2 v_Texcoord;\n\nuniform float blurSize : 3.0;\nuniform vec2 textureSize : [512.0, 512.0];\n\nvoid main(void){\n\n   vec4 tex = texture2D(texture, v_Texcoord);\n   vec2 offset = blurSize / textureSize;\n\n   tex += texture2D(texture, v_Texcoord + vec2(offset.x, 0.0) );\n   tex += texture2D(texture, v_Texcoord + vec2(offset.x, offset.y) );\n   tex += texture2D(texture, v_Texcoord + vec2(-offset.x, offset.y) );\n   tex += texture2D(texture, v_Texcoord + vec2(0.0, offset.y) );\n   tex += texture2D(texture, v_Texcoord + vec2(-offset.x, 0.0) );\n   tex += texture2D(texture, v_Texcoord + vec2(-offset.x, -offset.y) );\n   tex += texture2D(texture, v_Texcoord + vec2(offset.x, -offset.y) );\n   tex += texture2D(texture, v_Texcoord + vec2(0.0, -offset.y) );\n\n   tex /= 9.0;\n\n   gl_FragColor = tex;\n}\n\n@end\n\n// http://www.slideshare.net/DICEStudio/five-rendering-ideas-from-battlefield-3-need-for-speed-the-run\n@export buildin.compositor.hexagonal_blur_mrt_1\n\n// MRT in chrome\n// https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-draw-buffers.html\n#extension GL_EXT_draw_buffers : require\n\nuniform sampler2D texture;\nvarying vec2 v_Texcoord;\n\nuniform float blurSize : 2.0;\n\nuniform vec2 textureSize : [512.0, 512.0];\n\nvoid main(void){\n   vec2 offset = blurSize / textureSize;\n\n   vec4 color = vec4(0.0);\n   // Top\n   for(int i = 0; i < 10; i++){\n      color += 1.0/10.0 * texture2D(texture, v_Texcoord + vec2(0.0, offset.y * float(i)) );\n   }\n   gl_FragData[0] = color;\n   vec4 color2 = vec4(0.0);\n   // Down left\n   for(int i = 0; i < 10; i++){\n      color2 += 1.0/10.0 * texture2D(texture, v_Texcoord - vec2(offset.x * float(i), offset.y * float(i)) );\n   }\n   gl_FragData[1] = (color + color2) / 2.0;\n}\n\n@end\n\n@export buildin.compositor.hexagonal_blur_mrt_2\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\n\nvarying vec2 v_Texcoord;\n\nuniform float blurSize : 2.0;\n\nuniform vec2 textureSize : [512.0, 512.0];\n\nvoid main(void){\n   vec2 offset = blurSize / textureSize;\n\n   vec4 color1 = vec4(0.0);\n   // Down left\n   for(int i = 0; i < 10; i++){\n      color1 += 1.0/10.0 * texture2D(texture0, v_Texcoord - vec2(offset.x * float(i), offset.y * float(i)) );\n   }\n   vec4 color2 = vec4(0.0);\n   // Down right\n   for(int i = 0; i < 10; i++){\n      color2 += 1.0/10.0 * texture2D(texture1, v_Texcoord + vec2(offset.x * float(i), -offset.y * float(i)) );\n   }\n\n   gl_FragColor = (color1 + color2) / 2.0;\n}\n\n@end\n\n\n@export buildin.compositor.hexagonal_blur_1\n\n#define KERNEL_SIZE 10\n\nuniform sampler2D texture;\nvarying vec2 v_Texcoord;\n\nuniform float blurSize : 1.0;\n\nuniform vec2 textureSize : [512.0, 512.0];\n\nvoid main(void){\n   vec2 offset = blurSize / textureSize;\n\n   vec4 color = vec4(0.0);\n   float fKernelSize = float(KERNEL_SIZE);\n   // Top\n   for(int i = 0; i < KERNEL_SIZE; i++){\n      color += 1.0 / fKernelSize * texture2D(texture, v_Texcoord + vec2(0.0, offset.y * float(i)) );\n   }\n   gl_FragColor = color;\n}\n\n@end\n\n@export buildin.compositor.hexagonal_blur_2\n\n#define KERNEL_SIZE 10\n\nuniform sampler2D texture;\nvarying vec2 v_Texcoord;\n\nuniform float blurSize : 1.0;\n\nuniform vec2 textureSize : [512.0, 512.0];\n\nvoid main(void){\n   vec2 offset = blurSize / textureSize;\n   offset.y /= 2.0;\n\n   vec4 color = vec4(0.0);\n   float fKernelSize = float(KERNEL_SIZE);\n   // Down left\n   for(int i = 0; i < KERNEL_SIZE; i++){\n      color += 1.0/fKernelSize * texture2D(texture, v_Texcoord - vec2(offset.x * float(i), offset.y * float(i)) );\n   }\n   gl_FragColor = color;\n}\n@end\n\n@export buildin.compositor.hexagonal_blur_3\n\n#define KERNEL_SIZE 10\n\nuniform sampler2D texture1;\nuniform sampler2D texture2;\n\nvarying vec2 v_Texcoord;\n\nuniform float blurSize : 1.0;\n\nuniform vec2 textureSize : [512.0, 512.0];\n\nvoid main(void){\n   vec2 offset = blurSize / textureSize;\n   offset.y /= 2.0;\n\n   vec4 color1 = vec4(0.0);\n   float fKernelSize = float(KERNEL_SIZE);\n   // Down left\n   for(int i = 0; i < KERNEL_SIZE; i++){\n      color1 += 1.0/fKernelSize * texture2D(texture1, v_Texcoord - vec2(offset.x * float(i), offset.y * float(i)) );\n   }\n   vec4 color2 = vec4(0.0);\n   // Down right\n   for(int i = 0; i < KERNEL_SIZE; i++){\n      color2 += 1.0/fKernelSize * texture2D(texture1, v_Texcoord + vec2(offset.x * float(i), -offset.y * float(i)) );\n   }\n\n   vec4 color3 = vec4(0.0);\n   // Down right\n   for(int i = 0; i < KERNEL_SIZE; i++){\n      color3 += 1.0/fKernelSize * texture2D(texture2, v_Texcoord + vec2(offset.x * float(i), -offset.y * float(i)) );\n   }\n\n   gl_FragColor = (color1 + color2 + color3) / 3.0;\n}\n\n@end"}),define("qtek/shader/source/compositor/lum.essl",[],function(){return"\n@export buildin.compositor.lum\n\nvarying vec2 v_Texcoord;\n\nuniform sampler2D texture;\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n    vec4 tex = texture2D( texture, v_Texcoord );\n    float luminance = dot(tex.rgb, w);\n\n    gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n\n@end"}),define("qtek/shader/source/compositor/lut.essl",[],function(){return"\n// https://github.com/BradLarson/GPUImage?source=c\n@export buildin.compositor.lut\n\nvarying vec2 v_Texcoord;\n\nuniform sampler2D texture;\nuniform sampler2D lookup;\n\nvoid main()\n{\n    vec4 tex = texture2D(texture, v_Texcoord);\n\n    float blueColor = tex.b * 63.0;\n    \n    vec2 quad1;\n    quad1.y = floor(floor(blueColor) / 8.0);\n    quad1.x = floor(blueColor) - (quad1.y * 8.0);\n    \n    vec2 quad2;\n    quad2.y = floor(ceil(blueColor) / 8.0);\n    quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n    \n    vec2 texPos1;\n    texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n    texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n    \n    vec2 texPos2;\n    texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n    texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n    \n    vec4 newColor1 = texture2D(lookup, texPos1);\n    vec4 newColor2 = texture2D(lookup, texPos2);\n    \n    vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n    gl_FragColor = vec4(newColor.rgb, tex.w);\n}\n\n@end"}),define("qtek/shader/source/compositor/output.essl",[],function(){return"@export buildin.compositor.output\n\n#define OUTPUT_ALPHA;\n\nvarying vec2 v_Texcoord;\n\nuniform sampler2D texture;\n\nvoid main()\n{\n    vec4 tex = texture2D(texture, v_Texcoord);\n\n    gl_FragColor.rgb = tex.rgb;\n\n    #ifdef OUTPUT_ALPHA\n        gl_FragColor.a = tex.a;\n    #else\n        gl_FragColor.a = 1.0;\n    #endif\n\n}\n\n@end"}),define("qtek/shader/source/compositor/hdr.essl",[],function(){return"// HDR Pipeline\n@export buildin.compositor.hdr.bright\n\nuniform sampler2D texture;\nuniform float threshold : 1;\nuniform float scale : 1.0;\n\nvarying vec2 v_Texcoord;\n\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\n\n@import buildin.util.rgbm_decode\n@import buildin.util.rgbm_encode\n\nvoid main()\n{\n    #ifdef TEXTURE_ENABLED\n        #ifdef RGBM_DECODE\n            vec3 tex = RGBMDecode(texture2D(texture, v_Texcoord));\n        #else\n            vec3 tex = texture2D(texture, v_Texcoord).rgb;\n        #endif\n    #else\n        vec3 tex = vec3(0.0);\n    #endif\n\n    float lum = dot(tex, lumWeight);\n    if (lum > threshold)\n    {\n        gl_FragColor.rgb = tex * scale;\n    }\n    else\n    {\n        gl_FragColor.rgb = vec3(0.0);\n    }\n    gl_FragColor.a = 1.0;\n\n    #ifdef RGBM_ENCODE\n        gl_FragColor.rgba = RGBMEncode(gl_FragColor.rgb);\n    #endif\n}\n@end\n\n@export buildin.compositor.hdr.log_lum\n\nvarying vec2 v_Texcoord;\n\nuniform sampler2D texture;\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n    vec4 tex = texture2D(texture, v_Texcoord);\n    float luminance = dot(tex.rgb, w);\n    luminance = log(luminance + 0.001);\n\n    gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n\n@end\n\n@export buildin.compositor.hdr.lum_adaption\nvarying vec2 v_Texcoord;\n\nuniform sampler2D adaptedLum;\nuniform sampler2D currentLum;\n\nuniform float frameTime : 0.02;\n\nvoid main()\n{\n    float fAdaptedLum = texture2D(adaptedLum, vec2(0.5, 0.5)).r;\n    float fCurrentLum = exp(texture2D(currentLum, vec2(0.5, 0.5)).r);\n\n    fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\n    gl_FragColor.rgb = vec3(fAdaptedLum);\n    gl_FragColor.a = 1.0;\n}\n@end\n\n// Tone mapping with gamma correction\n// http://filmicgames.com/archives/75\n@export buildin.compositor.hdr.tonemapping\n\nuniform sampler2D texture;\nuniform sampler2D bloom;\nuniform sampler2D lensflare;\nuniform sampler2D lum;\n\nuniform float exposure : 1.0;\n\nvarying vec2 v_Texcoord;\n\nconst float A = 0.22;   // Shoulder Strength\nconst float B = 0.30;   // Linear Strength\nconst float C = 0.10;   // Linear Angle\nconst float D = 0.20;   // Toe Strength\nconst float E = 0.01;   // Toe Numerator\nconst float F = 0.30;   // Toe Denominator\nconst vec3 whiteScale = vec3(11.2);\n\nvec3 uncharted2ToneMap(vec3 x)\n{\n    return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n}\n\nvec3 filmicToneMap(vec3 color)\n{\n    vec3 x = max(vec3(0.0), color - 0.004);\n    return (x*(6.2*x+0.5))/(x*(6.2*x+1.7)+0.06);\n}\n\nfloat eyeAdaption(float fLum)\n{\n    return mix(0.2, fLum, 0.5);\n}\n\nvoid main()\n{\n    vec3 tex = vec3(0.0);\n    float a = 1.0;\n    #ifdef TEXTURE_ENABLED\n        vec4 res = texture2D(texture, v_Texcoord);\n        a = res.a;\n        tex = res.rgb;\n    #endif\n\n    #ifdef BLOOM_ENABLED\n        tex += texture2D(bloom, v_Texcoord).rgb * 0.25;\n    #endif\n\n    #ifdef LENSFLARE_ENABLED\n        tex += texture2D(lensflare, v_Texcoord).rgb;\n    #endif\n\n    // Adjust exposure\n    // From KlayGE\n    #ifdef LUM_ENABLED\n        float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\n        float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\n        float exposureBias = adaptedLumDest * exposure;\n    #else\n        float exposureBias = exposure;\n    #endif\n    tex *= exposureBias;\n\n    // Do tone mapping\n    vec3 color = uncharted2ToneMap(tex) / uncharted2ToneMap(whiteScale);\n    color = pow(color, vec3(1.0/2.2));\n    // vec3 color = filmicToneMap(tex);\n\n    #ifdef RGBM_ENCODE\n        gl_FragColor.rgba = RGBMEncode(color);\n    #else\n        gl_FragColor = vec4(color, a);\n    #endif\n}\n\n@end"}),define("qtek/shader/source/compositor/lensflare.essl",[],function(){return"// john-chapman-graphics.blogspot.co.uk/2013/02/pseudo-lens-flare.html\n@export buildin.compositor.lensflare\n\n#define SAMPLE_NUMBER 8\n\nuniform sampler2D texture;\nuniform sampler2D lensColor;\n\nuniform vec2 textureSize : [512, 512];\n\nuniform float dispersal : 0.3;\nuniform float haloWidth : 0.4;\nuniform float distortion : 1.0;\n\nvarying vec2 v_Texcoord;\n\nvec4 textureDistorted(\n    in vec2 texcoord,\n    in vec2 direction,\n    in vec3 distortion\n) {\n    return vec4(\n        texture2D(texture, texcoord + direction * distortion.r).r,\n        texture2D(texture, texcoord + direction * distortion.g).g,\n        texture2D(texture, texcoord + direction * distortion.b).b,\n        1.0\n    );\n}\n\nvoid main()\n{\n    vec2 texcoord = -v_Texcoord + vec2(1.0); // Flip texcoords\n    vec2 textureOffset = 1.0 / textureSize;\n\n    vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\n    vec2 haloVec = normalize(ghostVec) * haloWidth;\n\n    vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\n    //Sample ghost\n    vec4 result = vec4(0.0);\n    for (int i = 0; i < SAMPLE_NUMBER; i++)\n    {\n        vec2 offset = fract(texcoord + ghostVec * float(i));\n\n        float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\n        weight = pow(1.0 - weight, 10.0);\n\n        result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n    }\n\n    result *= texture2D(lensColor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\n    //Sample halo\n    float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n    weight = pow(1.0 - weight, 10.0);\n    vec2 offset = fract(texcoord + haloVec);\n    result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n\n    gl_FragColor = result;\n}\n@end"}),define("qtek/shader/source/compositor/blend.essl",[],function(){return"@export buildin.compositor.blend\n// Blend at most 4 textures\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n    vec3 tex = vec3(0.0);\n    #ifdef TEXTURE1_ENABLED\n        tex += texture2D(texture1, v_Texcoord).rgb * weight1;\n    #endif\n    #ifdef TEXTURE2_ENABLED\n        tex += texture2D(texture2, v_Texcoord).rgb * weight2;\n    #endif\n    #ifdef TEXTURE3_ENABLED\n        tex += texture2D(texture3, v_Texcoord).rgb * weight3;\n    #endif\n    #ifdef TEXTURE4_ENABLED\n        tex += texture2D(texture4, v_Texcoord).rgb * weight4;\n    #endif\n\n    gl_FragColor = vec4(tex, 1.0);\n}\n@end"}),define("qtek/shader/source/compositor/fxaa.essl",[],function(){return"// https://github.com/mitsuhiko/webgl-meincraft/blob/master/assets/shaders/fxaa.glsl\n@export buildin.compositor.fxaa\n\nuniform sampler2D texture;\nuniform vec2 viewportSize : [512, 512];\n\nvarying vec2 v_Texcoord;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\n\nvoid main()\n{\n    vec2 resolution = 1.0 / viewportSize;\n    vec3 rgbNW = texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;\n    vec3 rgbNE = texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;\n    vec3 rgbSW = texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;\n    vec3 rgbSE = texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;\n    vec4 rgbaM  = texture2D( texture,  gl_FragCoord.xy  * resolution );\n    vec3 rgbM  = rgbaM.xyz;\n    float opacity  = rgbaM.w;\n\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * resolution;\n\n    vec3 rgbA = texture2D( texture, gl_FragCoord.xy  * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz;\n    rgbA += texture2D( texture, gl_FragCoord.xy  * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz;\n    rgbA *= 0.5;\n\n    vec3 rgbB = texture2D( texture, gl_FragCoord.xy  * resolution + dir * -0.5 ).xyz;\n    rgbB += texture2D( texture, gl_FragCoord.xy  * resolution + dir * 0.5 ).xyz;\n    rgbB *= 0.25;\n    rgbB += rgbA * 0.5;\n\n    float lumaB = dot( rgbB, luma );\n\n    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\n    {\n\n        gl_FragColor = vec4( rgbA, opacity );\n\n    } else {\n\n        gl_FragColor = vec4( rgbB, opacity );\n\n    }\n}\n\n@end"}),define("qtek/shader/library",["require","../Shader","../core/util","./source/basic.essl","./source/lambert.essl","./source/phong.essl","./source/physical.essl","./source/wireframe.essl","./source/skybox.essl","./source/util.essl","./source/prez.essl","./source/shadowmap.essl","./source/compositor/vertex.essl","./source/compositor/coloradjust.essl","./source/compositor/blur.essl","./source/compositor/lum.essl","./source/compositor/lut.essl","./source/compositor/output.essl","./source/compositor/hdr.essl","./source/compositor/lensflare.essl","./source/compositor/blend.essl","./source/compositor/fxaa.essl"],function(e){function r(e,n){var r=[],i={},s={};typeof n=="string"?r=Array.prototype.slice.call(arguments,1):Object.prototype.toString.call(n)=="[object Object]"?(r=n.textures||[],i=n.vertexDefines||{},s=n.fragmentDefines||{}):n instanceof Array&&(r=n);var o=Object.keys(i),u=Object.keys(s);r.sort(),o.sort(),u.sort();var a=[e];a=a.concat(r);for(var f=0;f<o.length;f++)a.push(i[o[f]]);for(var f=0;f<u.length;f++)a.push(s[u[f]]);var l=a.join("_");if(_pool[l])return _pool[l];var c=_library[e];if(!c){console.error('Shader "'+e+'"'+" is not in the library");return}var h=new t({vertex:c.vertex,fragment:c.fragment});for(var f=0;f<r.length;f++)h.enableTexture(r[f]);for(var e in i)h.define("vertex",e,i[e]);for(var e in s)h.define("fragment",e,s[e]);return _pool[l]=h,h}function i(e,t,n){_library[e]={vertex:t,fragment:n}}function s(){_pool={}}var t=e("../Shader"),n=e("../core/util");return _library={},_pool={},t["import"](e("./source/basic.essl")),t["import"](e("./source/lambert.essl")),t["import"](e("./source/phong.essl")),t["import"](e("./source/physical.essl")),t["import"](e("./source/wireframe.essl")),t["import"](e("./source/skybox.essl")),t["import"](e("./source/util.essl")),t["import"](e("./source/prez.essl")),t["import"](e("./source/shadowmap.essl")),i("buildin.basic",t.source("buildin.basic.vertex"),t.source("buildin.basic.fragment")),i("buildin.lambert",t.source("buildin.lambert.vertex"),t.source("buildin.lambert.fragment")),i("buildin.phong",t.source("buildin.phong.vertex"),t.source("buildin.phong.fragment")),i("buildin.wireframe",t.source("buildin.wireframe.vertex"),t.source("buildin.wireframe.fragment")),i("buildin.skybox",t.source("buildin.skybox.vertex"),t.source("buildin.skybox.fragment")),i("buildin.prez",t.source("buildin.prez.vertex"),t.source("buildin.prez.fragment")),i("buildin.physical",t.source("buildin.physical.vertex"),t.source("buildin.physical.fragment")),t["import"](e("./source/compositor/vertex.essl")),t["import"](e("./source/compositor/coloradjust.essl")),t["import"](e("./source/compositor/blur.essl")),t["import"](e("./source/compositor/lum.essl")),t["import"](e("./source/compositor/lut.essl")),t["import"](e("./source/compositor/output.essl")),t["import"](e("./source/compositor/hdr.essl")),t["import"](e("./source/compositor/lensflare.essl")),t["import"](e("./source/compositor/blend.essl")),t["import"](e("./source/compositor/fxaa.essl")),{get:r,template:i,clear:s}}),define("qtek/Material",["require","./core/Base","./Texture"],function(e){var t=e("./core/Base"),n=e("./Texture"),r=t.derive({name:"",uniforms:null,shader:null,depthTest:!0,depthMask:!0,transparent:!1,blend:null,_enabledUniforms:null},function(){this.name||(this.name="MATERIAL_"+this.__GUID__),this.shader&&this.attachShader(this.shader)},{bind:function(e,t){var r=0,i=t&&t.shader===this.shader;for(var s=0;s<this._enabledUniforms.length;s++){var o=this._enabledUniforms[s],u=this.uniforms[o];if(i&&t.uniforms[o].value===u.value)continue;if(u.value===undefined){console.warn('Uniform value "'+o+'" is undefined');continue}if(u.value===null)continue;if(u.value instanceof Array&&!u.value.length)continue;if(u.value instanceof n){var a=this.shader.setUniform(e,"1i",o,r);if(!a)continue;var f=u.value;e.activeTexture(e.TEXTURE0+r),f.isRenderable()?f.bind(e):f.unbind(e),r++}else if(u.value instanceof Array){if(u.value.length===0)continue;var l=u.value[0];if(l instanceof n){if(!this.shader.hasUniform(o))continue;var c=[];for(var h=0;h<u.value.length;h++){var f=u.value[h];e.activeTexture(e.TEXTURE0+r),f.isRenderable()?f.bind(e):f.unbind(e),c.push(r++)}this.shader.setUniform(e,"1iv",o,c)}else this.shader.setUniform(e,u.type,o,u.value)}else this.shader.setUniform(e,u.type,o,u.value)}},setUniform:function(e,t){var n=this.uniforms[e];n&&(n.value=t)},setUniforms:function(e){for(var t in e){var n=e[t];this.setUniform(t,n)}},enableUniform:function(e){this.uniforms[e]&&!this.isUniformEnabled(e)&&this._enabledUniforms.push(e)},disableUniform:function(e){var t=this._enabledUniforms.indexOf(e);t>=0&&this._enabledUniforms.splice(t,1)},isUniformEnabled:function(e){return this._enabledUniforms.indexOf(e)>=0},set:function(e,t){if(typeof e=="object")for(var n in e){var r=e[n];this.set(n,r)}else{var i=this.uniforms[e];i&&(i.value=t)}},get:function(e){var t=this.uniforms[e];if(t)return t.value},attachShader:function(e,t){var n=this.uniforms;this.uniforms=e.createUniforms(),this.shader=e,this._enabledUniforms=Object.keys(this.uniforms);if(t)for(var r in n)this.uniforms[r]&&(this.uniforms[r].value=n[r].value)},detachShader:function(){this.shader=null,this.uniforms={}}});return r}),define("qtek/math/Vector2",["require","glmatrix"],function(e){var t=e("glmatrix"),n=t.vec2,r=function(e,t){e=e||0,t=t||0,this._array=n.fromValues(e,t),this._dirty=!0};return r.prototype={constructor:r,get x(){return this._array[0]},set x(e){this._array[0]=e,this._dirty=!0},get y(){return this._array[1]},set y(e){this._array[1]=e,this._dirty=!0},add:function(e){return n.add(this._array,this._array,e._array),this._dirty=!0,this},set:function(e,t){return this._array[0]=e,this._array[1]=t,this._dirty=!0,this},setArray:function(e){return this._array[0]=e[0],this._array[1]=e[1],this._dirty=!0,this},clone:function(){return new r(this.x,this.y)},copy:function(e){return n.copy(this._array,e._array),this._dirty=!0,this},cross:function(e,t){return n.cross(e._array,this._array,t._array),e._dirty=!0,this},dist:function(e){return n.dist(this._array,e._array)},distance:function(e){return n.distance(this._array,e._array)},div:function(e){return n.div(this._array,this._array,e._array),this._dirty=!0,this},divide:function(e){return n.divide(this._array,this._array,e._array),this._dirty=!0,this},dot:function(e){return n.dot(this._array,e._array)},len:function(){return n.len(this._array)},length:function(){return n.length(this._array)},lerp:function(e,t,r){return n.lerp(this._array,e._array,t._array,r),this._dirty=!0,this},min:function(e){return n.min(this._array,this._array,e._array),this._dirty=!0,this},max:function(e){return n.max(this._array,this._array,e._array),this._dirty=!0,this},mul:function(e){return n.mul(this._array,this._array,e._array),this._dirty=!0,this},multiply:function(e){return n.multiply(this._array,this._array,e._array),this._dirty=!0,this},negate:function(){return n.negate(this._array,this._array),this._dirty=!0,this},normalize:function(){return n.normalize(this._array,this._array),this._dirty=!0,this},random:function(e){return n.random(this._array,e),this._dirty=!0,this},scale:function(e){return n.scale(this._array,this._array,e),this._dirty=!0,this},scaleAndAdd:function(e,t){return n.scaleAndAdd(this._array,this._array,e._array,t),this._dirty=!0,this},sqrDist:function(e){return n.sqrDist(this._array,e._array)},squaredDistance:function(e){return n.squaredDistance(this._array,e._array)},sqrLen:function(){return n.sqrLen(this._array)},squaredLength:function(){return n.squaredLength(this._array)},sub:function(e){return n.sub(this._array,this._array,e._array),this._dirty=!0,this},subtract:function(e){return n.subtract(this._array,this._array,e._array),this._dirty=!0,this},transformMat2:function(e){return n.transformMat2(this._array,this._array,e._array),this._dirty=!0,this},transformMat2d:function(e){return n.transformMat2d(this._array,this._array,e._array),this._dirty=!0,this},transformMat3:function(e){return n.transformMat3(this._array,this._array,e._array),this._dirty=!0,this},transformMat4:function(e){return n.transformMat4(this._array,this._array,e._array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this._array,",")+"]"}},r.add=function(e,t,r){return n.add(e._array,t._array,r._array),e._dirty=!0,e},r.set=function(e,t,r){return n.set(e._array,t,r),e._dirty=!0,e},r.copy=function(e,t){return n.copy(e._array,t._array),e._dirty=!0,e},r.cross=function(e,t,r){return n.cross(e._array,t._array,r._array),e._dirty=!0,e},r.dist=function(e,t){return n.distance(e._array,t._array)},r.distance=r.dist,r.div=function(e,t,r){return n.divide(e._array,t._array,r._array),e._dirty=!0,e},r.divide=r.div,r.dot=function(e,t){return n.dot(e._array,t._array)},r.len=function(e){return n.length(e._array)},r.lerp=function(e,t,r,i){return n.lerp(e._array,t._array,r._array,i),e._dirty=!0,e},r.min=function(e,t,r){return n.min(e._array,t._array,r._array),e._dirty=!0,e},r.max=function(e,t,r){return n.max(e._array,t._array,r._array),e._dirty=!0,e},r.mul=function(e,t,r){return n.multiply(e._array,t._array,r._array),e._dirty=!0,e},r.multiply=r.mul,r.negate=function(e,t){return n.negate(e._array,t._array),e._dirty=!0,e},r.normalize=function(e,t){return n.normalize(e._array,t._array),e._dirty=!0,e},r.random=function(e,t){return n.random(e._array,t),e._dirty=!0,e},r.scale=function(e,t,r){return n.scale(e._array,t._array,r),e._dirty=!0,e},r.scaleAndAdd=function(e,t,r,i){return n.scale(e._array,t._array,r._array,i),e._dirty=!0,e},r.sqrDist=function(e,t){return n.sqrDist(e._array,t._array)},r.squaredDistance=r.sqrDist,r.sqrLen=function(e){return n.sqrLen(e._array)},r.squaredLength=r.sqrLen,r.sub=function(e,t,r){return n.subtract(e._array,t._array,r._array),e._dirty=!0,e},r.subtract=r.sub,r.transformMat2=function(e,t,r){return n.transformMat2(e._array,t._array,r._array),e._dirty=!0,e},r.transformMat2d=function(e,t,r){return n.transformMat2d(e._array,t._array,r._array),e._dirty=!0,e},r.transformMat3=function(e,t,r){return n.transformMat3(e._array,t._array,r._array),e._dirty=!0,e},r.transformMat4=function(e,t,r){return n.transformMat4(e._array,t._array,r._array),e._dirty=!0,e},r}),define("qtek/Renderer",["require","./core/Base","./Texture","./core/glinfo","./core/glenum","./math/BoundingBox","./math/Matrix4","./shader/library","./Material","./math/Vector2","glmatrix"],function(e){var t=e("./core/Base"),n=e("./Texture"),r=e("./core/glinfo"),i=e("./core/glenum"),s=e("./math/BoundingBox"),o=e("./math/Matrix4"),u=e("./shader/library"),a=e("./Material"),f=e("./math/Vector2"),l=e("glmatrix"),c=l.mat4,h=l.vec3,p=0,d=u.get("buildin.prez"),v=new a({shader:d}),m={},g=t.derive(function(){return{canvas:null,width:100,height:100,devicePixelRatio:window.devicePixelRatio||1,color:[0,0,0,0],clear:17664,alhpa:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},_viewportSettings:[],_clearSettings:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height);try{var e={alhpa:this.alhpa,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};this.gl=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e);if(!this.gl)throw new Error;this.gl.__GLID__=p++,this.width=this.canvas.width,this.height=this.canvas.height,this.resize(this.width,this.height),r.initialize(this.gl)}catch(t){if(this.throwError)throw"Error creating WebGL Context";this.trigger("error","Error creating WebGL Context")}},{resize:function(e,t){var n=this.canvas;typeof e!="undefined"?(n.style.width=e+"px",n.style.height=t+"px",n.width=e*this.devicePixelRatio,n.height=t*this.devicePixelRatio,this.width=e,this.height=t):(this.width=n.width/this.devicePixelRatio,this.height=n.height/this.devicePixelRatio),this.setViewport(0,0,n.width,n.height)},setDevicePixelRatio:function(e){this.devicePixelRatio=e,this.resize(this.width,this.height)},setViewport:function(e,t,n,r){if(typeof e=="object"){var i=e;e=i.x,t=i.y,n=i.width,r=i.height}this.gl.viewport(e,t,n,r),this.viewport={x:e,y:t,width:n,height:r}},saveViewport:function(){this._viewportSettings.push(this.viewport)},restoreViewport:function(){this._viewportSettings.length>0&&this.setViewport(this._viewportSettings.pop())},saveClear:function(){this._clearSettings.push(this.clear)},restoreClear:function(){this._clearSettings.length>0&&(this.clear=this._clearSettings.pop())},render:function(e,t,n,r){var i=this.gl;this._sceneRendering=e;var s=this.color;this.clear&&(i.clearColor(s[0],s[1],s[2],s[3]),i.clear(this.clear)),n||e.update(!1),t.scene||t.update(!0);var o=e.opaqueQueue,u=e.transparentQueue,a=e.material;e.trigger("beforerender",this,e,t);if(u.length>0){var f=c.create(),l=h.create();for(var p=0;p<u.length;p++){var d=u[p];c.multiply(f,t.viewMatrix._array,d.worldTransform._array),h.transformMat4(l,d.position._array,f),d.__depth=l[2]}}o.sort(g.opaqueSortFunc),u.sort(g.transparentSortFunc),e.trigger("beforerender:opaque",this,o),t.sceneBoundingBoxLastFrame.min.set(Infinity,Infinity,Infinity),t.sceneBoundingBoxLastFrame.max.set(-Infinity,-Infinity,-Infinity),i.disable(i.BLEND),i.enable(i.DEPTH_TEST);var v=this.renderQueue(o,t,a,r);e.trigger("afterrender:opaque",this,o,v),e.trigger("beforerender:transparent",this,u),i.enable(i.BLEND);var m=this.renderQueue(u,t,a);e.trigger("afterrender:transparent",this,u,m);var y={};for(name in v)y[name]=v[name]+m[name];return e.trigger("afterrender",this,e,t,y),y},renderQueue:function(e,t,n,r){var i={faceNumber:0,vertexNumber:0,drawCallNumber:0,meshNumber:0};c.copy(y.VIEW,t.viewMatrix._array),c.copy(y.PROJECTION,t.projectionMatrix._array),c.multiply(y.VIEWPROJECTION,t.projectionMatrix._array,y.VIEW),c.copy(y.VIEWINVERSE,t.worldTransform._array),c.invert(y.PROJECTIONINVERSE,y.PROJECTION),c.invert(y.VIEWPROJECTIONINVERSE,y.VIEWPROJECTION);var s=this.gl,o=this._sceneRendering,u,a,f,l,h,p,g,b;if(r){b=[],d.bind(s),s.colorMask(!1,!1,!1,!1),s.depthMask(!0);for(var w=0;w<e.length;w++){var E=e[w],S=E.worldTransform._array,x=E.geometry;c.multiply(y.WORLDVIEW,y.VIEW,S),c.multiply(y.WORLDVIEWPROJECTION,y.VIEWPROJECTION,S);if(x.boundingBox&&!this._frustumCulling(E,t))continue;if(E.skeleton)continue;E.cullFace!==p&&(p=E.cullFace,s.cullFace(p)),E.frontFace!==g&&(g=E.frontFace,s.frontFace(g)),E.culling!==h&&(h=E.culling,h?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE));var T=d.matrixSemantics.WORLDVIEWPROJECTION;d.setUniform(s,T.type,T.symbol,y.WORLDVIEWPROJECTION),E.render(s,v),b.push(E)}s.depthFunc(s.LEQUAL),s.colorMask(!0,!0,!0,!0),s.depthMask(!1)}else b=e;for(var w=0;w<b.length;w++){var E=b[w],N=n||E.material,C=N.shader,x=E.geometry,S=E.worldTransform._array;c.copy(y.WORLD,S),c.multiply(y.WORLDVIEW,y.VIEW,S),c.multiply(y.WORLDVIEWPROJECTION,y.VIEWPROJECTION,S),(C.matrixSemantics.WORLDINVERSE||C.matrixSemantics.WORLDINVERSETRANSPOSE)&&c.invert(y.WORLDINVERSE,S),(C.matrixSemantics.WORLDVIEWINVERSE||C.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&c.invert(y.WORLDVIEWINVERSE,y.WORLDVIEW),(C.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||C.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&c.invert(y.WORLDVIEWPROJECTIONINVERSE,y.WORLDVIEWPROJECTION);if(x.boundingBox&&!r&&!this._frustumCulling(E,t))continue;if(a!==C){o&&o.isShaderLightNumberChanged(C)&&o.setShaderLightNumber(C);var k=C.bind(s);if(k){if(m[C.__GUID__])continue;m[C.__GUID__]=!0;if(this.throwError)throw new Error(k);this.trigger("error",k)}o&&o.setLightUniforms(C,s),a=C}u!==N&&(r||(N.depthTest!==f&&(N.depthTest?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),f=N.depthTest),N.depthMask!==l&&(s.depthMask(N.depthMask),l=N.depthMask)),N.bind(s,u),u=N,N.transparent&&(N.blend?N.blend(s):(s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA))));var L=C.matrixSemanticKeys;for(var A=0;A<L.length;A++){var O=L[A],T=C.matrixSemantics[O],M=y[O];if(T.isTranspose){var _=y[T.semanticNoTranspose];c.transpose(M,_)}C.setUniform(s,T.type,T.symbol,M)}E.cullFace!==p&&(p=E.cullFace,s.cullFace(p)),E.frontFace!==g&&(g=E.frontFace,s.frontFace(g)),E.culling!==h&&(h=E.culling,h?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE));var D=E.render(s,n);D&&(i.faceNumber+=D.faceNumber,i.vertexNumber+=D.vertexNumber,i.drawCallNumber+=D.drawCallNumber,i.meshNumber++)}return i},_frustumCulling:function(){var e=new s,t=new o;return function(n,r){var i=n.geometry.boundingBox;t._array=y.WORLDVIEW,e.copy(i),e.applyTransform(t),r.sceneBoundingBoxLastFrame.union(e);if(n.frustumCulling){if(!e.intersectBoundingBox(r.frustum.boundingBox))return!1;t._array=y.PROJECTION,e.max._array[2]>0&&e.min._array[2]<0&&(e.max._array[2]=-1e-20),e.applyProjection(t);var s=e.min._array,o=e.max._array;if(o[0]<-1||s[0]>1||o[1]<-1||s[1]>1||o[2]<-1||s[2]>1)return!1}return!0}}(),disposeScene:function(e){this.disposeNode(e),e.dispose()},disposeNode:function(e){var t={},r=this.gl;e.traverse(function(e){e.geometry&&e.geometry.dispose(r),e.material&&(t[e.material.__GUID__]=e.material),e.dispose&&e.dispose(r)});for(var i in t){var s=t[i];s.shader.dispose(r);for(var o in s.uniforms){var u=s.uniforms[o].value;if(!u)continue;if(u instanceof n)u.dispose(r);else if(u instanceof Array)for(var a=0;a<u.length;a++)u[a]instanceof n&&u[a].dispose(r)}}e._children=[]},disposeShader:function(e){e.dispose(this.gl)},disposeGeometry:function(e){e.dispose(this.gl)},disposeTexture:function(e){e.dispose(this.gl)},disposeFrameBuffer:function(e){e.dispose(this.gl)},dispose:function(){r.dispose(this.gl)},screenToNdc:function(e,t,n){return n||(n=new f),t=this.height-t,n._array[0]=(e-this.viewport.x)/this.viewport.width,n._array[0]=n._array[0]*2-1,n._array[1]=(t-this.viewport.y)/this.viewport.height,n._array[1]=n._array[1]*2-1,n}});g.opaqueSortFunc=function(e,t){return e.material.shader===t.material.shader?e.material===t.material?e.geometry.__GUID__-t.geometry.__GUID__:e.material.__GUID__-t.material.__GUID__:e.material.shader.__GUID__-t.material.shader.__GUID__},g.transparentSortFunc=function(e,t){if(e.__depth===t.__depth)return e.material.shader===t.material.shader?e.material===t.material?e.geometry.__GUID__-t.geometry.__GUID__:e.material.__GUID__-t.material.__GUID__:e.material.shader.__GUID__-t.material.shader.__GUID__;return e.__depth-t.__depth};var y={WORLD:c.create(),VIEW:c.create(),PROJECTION:c.create(),WORLDVIEW:c.create(),VIEWPROJECTION:c.create(),WORLDVIEWPROJECTION:c.create(),WORLDINVERSE:c.create(),VIEWINVERSE:c.create(),PROJECTIONINVERSE:c.create(),WORLDVIEWINVERSE:c.create(),VIEWPROJECTIONINVERSE:c.create(),WORLDVIEWPROJECTIONINVERSE:c.create(),WORLDTRANSPOSE:c.create(),VIEWTRANSPOSE:c.create(),PROJECTIONTRANSPOSE:c.create(),WORLDVIEWTRANSPOSE:c.create(),VIEWPROJECTIONTRANSPOSE:c.create(),WORLDVIEWPROJECTIONTRANSPOSE:c.create(),WORLDINVERSETRANSPOSE:c.create(),VIEWINVERSETRANSPOSE:c.create(),PROJECTIONINVERSETRANSPOSE:c.create(),WORLDVIEWINVERSETRANSPOSE:c.create(),VIEWPROJECTIONINVERSETRANSPOSE:c.create(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:c.create()};return g.COLOR_BUFFER_BIT=i.COLOR_BUFFER_BIT,g.DEPTH_BUFFER_BIT=i.DEPTH_BUFFER_BIT,g.STENCIL_BUFFER_BIT=i.STENCIL_BUFFER_BIT,g}),define("zrender/config",{EVENT:{RESIZE:"resize",CLICK:"click",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},catchBrushException:!1,debugMode:0}),define("zrender/tool/log",["require","../config"],function(e){var t=e("../config");return function(){if(t.debugMode===0)return;if(t.debugMode==1)for(var e in arguments)throw new Error(arguments[e]);else if(t.debugMode>1)for(var e in arguments)console.log(arguments[e])}}),define("zrender/tool/guid",[],function(){var e=2311;return function(){return"zrender__"+e++}}),define("zrender/tool/env",[],function(){function e(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),a=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),f=a&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/),y=e.match(/MSIE ([\d.]+)/),b=r&&e.match(/Mobile\//)&&!m,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!m,y=e.match(/MSIE\s([\d.]+)/);if(n.webkit=!!r)n.version=r[1];return i&&(t.android=!0,t.version=i[2]),u&&!o&&(t.ios=t.iphone=!0,t.version=u[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),o&&(t.ios=t.ipod=!0,t.version=o[3]?o[3].replace(/_/g,"."):null),a&&(t.webos=!0,t.version=a[2]),f&&(t.touchpad=!0),h&&(t.blackberry=!0,t.version=h[2]),p&&(t.bb10=!0,t.version=p[2]),d&&(t.rimtabletos=!0,t.version=d[2]),v&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),c&&(n.silk=!0,n.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),y&&(n.ie=!0,n.version=y[1]),b&&(e.match(/Safari/)||!!t.ios)&&(n.safari=!0),w&&(n.webview=!0),y&&(n.ie=!0,n.version=y[1]),t.tablet=!!(s||v||i&&!e.match(/Mobile/)||g&&e.match(/Tablet/)||y&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&!t.ipod&&(i||u||a||h||p||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)||y&&e.match(/Touch/))),{browser:n,os:t,canvasSupported:document.createElement("canvas").getContext?!0:!1}}return e(navigator.userAgent)}),define("zrender/tool/event",[],function(){function e(e){return typeof e.zrenderX!="undefined"&&e.zrenderX||typeof e.offsetX!="undefined"&&e.offsetX||typeof e.layerX!="undefined"&&e.layerX||typeof e.clientX!="undefined"&&e.clientX}function t(e){return typeof e.zrenderY!="undefined"&&e.zrenderY||typeof e.offsetY!="undefined"&&e.offsetY||typeof e.layerY!="undefined"&&e.layerY||typeof e.clientY!="undefined"&&e.clientY}function n(e){return typeof e.wheelDelta!="undefined"&&e.wheelDelta||typeof e.detail!="undefined"&&-e.detail}function i(){this._handlers={}}var r=typeof window.addEventListener=="function"?function(e){e.preventDefault(),e.stopPropagation()}:function(e){e.returnValue=!1,e.cancelBubble=!0};return i.prototype.one=function(e,t,n){var r=this._handlers;return!t||!e?this:(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:n||this}),this)},i.prototype.bind=function(e,t,n){var r=this._handlers;return!t||!e?this:(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:n||this}),this)},i.prototype.unbind=function(e,t){var n=this._handlers;if(!e)return this._handlers={},this;if(t){if(n[e]){var r=[];for(var i=0,s=n[e].length;i<s;i++)n[e][i]["h"]!=t&&r.push(n[e][i]);n[e]=r}n[e]&&n[e].length===0&&delete n[e]}else delete n[e];return this},i.prototype.dispatch=function(e){var t=arguments,n=t.length;n>3&&(t=Array.prototype.slice.call(t,1));if(this._handlers[e]){var r=this._handlers[e],i=r.length;for(var s=0;s<i;){switch(n){case 1:r[s].h.call(r[s].ctx);break;case 2:r[s].h.call(r[s].ctx,t[1]);break;case 3:r[s].h.call(r[s].ctx,t[1],t[2]);break;default:r[s].h.apply(r[s].ctx,t)}r[s].one?(r.splice(s,1),i--):s++}}return this},i.prototype.dispatchWithContext=function(e){var t=arguments,n=t.length;n>4&&(t=Array.prototype.slice.call(t,1,t.length-1));var r=t[t.length-1];if(this._handlers[e]){var i=this._handlers[e],s=i.length;for(var o=0;o<s;){switch(n){case 1:i[o].h.call(r);break;case 2:i[o].h.call(r,t[1]);break;case 3:i[o].h.call(r,t[1],t[2]);break;default:i[o].h.apply(r,t)}i[o].one?(i.splice(o,1),s--):o++}}return this},{getX:e,getY:t,getDelta:n,stop:r,Dispatcher:i}}),define("zrender/Handler",["require","./config","./tool/env","./tool/event","./tool/util"],function(e){function a(e,t){return function(n){return e.call(t,n)}}function f(e){var t=o.length;while(t--){var n=o[t];e["_"+n+"Handler"]=a(u[n],e)}}function l(e,t,i){r.Dispatcher.call(this),this.root=e,this.storage=t,this.painter=i,this._lastX=this._lastY=this._mouseX=this._mouseY=0,this._findHover=a(h,this),this._domHover=i.getDomHover(),f(this),window.addEventListener?(window.addEventListener("resize",this._resizeHandler),n.os.tablet||n.os.phone?(e.addEventListener("touchstart",this._touchstartHandler),e.addEventListener("touchmove",this._touchmoveHandler),e.addEventListener("touchend",this._touchendHandler)):(e.addEventListener("click",this._clickHandler),e.addEventListener("mousewheel",this._mousewheelHandler),e.addEventListener("mousemove",this._mousemoveHandler),e.addEventListener("mousedown",this._mousedownHandler),e.addEventListener("mouseup",this._mouseupHandler)),e.addEventListener("DOMMouseScroll",this._mousewheelHandler),e.addEventListener("mouseout",this._mouseoutHandler)):(window.attachEvent("onresize",this._resizeHandler),e.attachEvent("onclick",this._clickHandler),e.attachEvent("onmousewheel",this._mousewheelHandler),e.attachEvent("onmousemove",this._mousemoveHandler),e.attachEvent("onmouseout",this._mouseoutHandler),e.attachEvent("onmousedown",this._mousedownHandler),e.attachEvent("onmouseup",this._mouseupHandler))}function h(e){if(this._draggingTarget&&this._draggingTarget.id==e.id||e.isSilent())return!1;var t=this._event;if(e.isCover(this._mouseX,this._mouseY)){e.hoverable&&this.storage.addHover(e);var n=e.parent;while(n){if(n.clipShape&&!n.clipShape.isCover(this._mouseX,this._mouseY))return!1;n=n.parent}return this._lastHover!=e&&(this._processOutShape(t),this._processDragLeave(t),this._lastHover=e,this._processDragEnter(t)),this._processOverShape(t),this._processDragOver(t),this._hasfound=1,!0}return!1}var t=e("./config"),n=e("./tool/env"),r=e("./tool/event"),i=e("./tool/util"),s=t.EVENT,o=["resize","click","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],u={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(s.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._dispatchAgency(t,s.CLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){e=this._zrenderEventFixed(e),this._dispatchAgency(this._lastHover,s.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){if(this.painter.isLoading())return;e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=r.getX(e),this._mouseY=r.getY(e),this._processDragStart(e),this._hasfound=0,this._event=e,this.storage.iterShape(this._findHover,{normal:"down"});if(!this._hasfound){if(!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)this._processOutShape(e),this._processDragLeave(e);this._lastHover=null,this.storage.delHover(),this.painter.clearHover()}this._draggingTarget&&(this.storage.drift(this._draggingTarget.id,this._mouseX-this._lastX,this._mouseY-this._lastY),this.storage.addHover(this._draggingTarget));var t="default";this._draggingTarget||this._hasfound&&this._lastHover.draggable?t="move":this._hasfound&&this._lastHover.clickable&&(t="pointer"),this.root.style.cursor=t,this._dispatchAgency(this._lastHover,s.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){e=this._zrenderEventFixed(e);var t=e.toElement||e.relatedTarget;if(t!=this.root)while(t&&t.nodeType!=9){if(t==this.root){this._mousemoveHandler(e);return}t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="default",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.isLoading()||this.painter.refreshHover(),this.dispatch(s.GLOBALOUT,e)},mousedown:function(e){if(this._lastDownButton==2){this._lastDownButton=e.button,this._mouseDownTarget=null;return}this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,s.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="default",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,s.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&r.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e),new Date-this._lastTouchMoment<s.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e)),this.painter.clearHover()}};l.prototype.on=function(e,t){return this.bind(e,t),this},l.prototype.un=function(e,t){return this.unbind(e,t),this},l.prototype.trigger=function(e,t){switch(e){case s.RESIZE:case s.CLICK:case s.MOUSEWHEEL:case s.MOUSEMOVE:case s.MOUSEDOWN:case s.MOUSEUP:case s.MOUSEOUT:this["_"+e+"Handler"](t)}},l.prototype.dispose=function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),n.os.tablet||n.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=this._domHover=this.storage=this.painter=null,this.un()},l.prototype._processDragStart=function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var n=t;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,s.DRAGSTART,e),this.painter.refresh()}},l.prototype._processDragEnter=function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.DRAGENTER,e,this._draggingTarget)},l.prototype._processDragOver=function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.DRAGOVER,e,this._draggingTarget)},l.prototype._processDragLeave=function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.DRAGLEAVE,e,this._draggingTarget)},l.prototype._processDrop=function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,s.DROP,e,this._draggingTarget))},l.prototype._processDragEnd=function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,s.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null},l.prototype._processOverShape=function(e){this._dispatchAgency(this._lastHover,s.MOUSEOVER,e)},l.prototype._processOutShape=function(e){this._dispatchAgency(this._lastHover,s.MOUSEOUT,e)},l.prototype._dispatchAgency=function(e,t,n,r){var i="on"+t,s={type:t,event:n,target:e,cancelBubble:!1},o=e;r&&(s.dragged=r);while(o){o[i]&&o[i](s),o.dispatch(t,s),o=o.parent;if(s.cancelBubble)break}e?s.cancelBubble||this.dispatch(t,s):r||this.dispatch(t,{type:t,event:n})};var c=[{x:10},{x:-20},{x:10,y:10},{y:-20}];return l.prototype._mobildFindFixed=function(e){this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this.storage.iterShape(this._findHover,{normal:"down"});for(var t=0;!this._lastHover&&t<c.length;t++){var n=c[t];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this.storage.iterShape(this._findHover,{normal:"down"})}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)},l.prototype._zrenderEventFixed=function(e,t){if(e.zrenderFixed)return e;if(!t){e=e||window.event;var n=e.toElement||e.relatedTarget||e.srcElement||e.target;n&&n!=this._domHover&&(e.zrenderX=(typeof e.offsetX!="undefined"?e.offsetX:e.layerX)+n.offsetLeft,e.zrenderY=(typeof e.offsetY!="undefined"?e.offsetY:e.layerY)+n.offsetTop)}else{var r=e.type!="touchend"?e.targetTouches[0]:e.changedTouches[0];if(r){var i=this.root.getBoundingClientRect();e.zrenderX=r.clientX-i.left,e.zrenderY=r.clientY-i.top}}return e.zrenderFixed=1,e},i.merge(l.prototype,r.Dispatcher.prototype,!0),l}),define("zrender/tool/matrix",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(){var n=new e(6);return t.identity(n),n},identity:function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0},copy:function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]},mul:function(e,t,n){return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=t[1]*n[0]+t[3]*n[1],e[2]=t[0]*n[2]+t[2]*n[3],e[3]=t[1]*n[2]+t[3]*n[3],e[4]=t[0]*n[4]+t[2]*n[5]+t[4],e[5]=t[1]*n[4]+t[3]*n[5]+t[5],e},translate:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},rotate:function(e,t,n){var r=t[0],i=t[2],s=t[4],o=t[1],u=t[3],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*f,e[1]=-r*f+o*l,e[2]=i*l+u*f,e[3]=-i*f+l*u,e[4]=l*s+f*a,e[5]=l*a-f*s,e},scale:function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},invert:function(e,t){var n=t[0],r=t[2],i=t[4],s=t[1],o=t[3],u=t[5],a=n*o-s*r;return a?(a=1/a,e[0]=o*a,e[1]=-s*a,e[2]=-r*a,e[3]=n*a,e[4]=(r*u-o*i)*a,e[5]=(s*i-n*u)*a,e):null},mulVector:function(e,t,n){var r=t[0],i=t[2],s=t[4],o=t[1],u=t[3],a=t[5];return e[0]=n[0]*r+n[1]*i+s,e[1]=n[0]*o+n[1]*u+a,e}};return t}),define("zrender/shape/mixin/Transformable",["require","../../tool/matrix"],function(e){var t=e("../../tool/matrix"),n=[0,0],r=function(){this.position||(this.position=[0,0]),typeof this.rotation=="undefined"&&(this.rotation=[0,0,0]),this.scale||(this.scale=[1,1,0,0]),this.needLocalTransform=!1,this.needTransform=!1};return r.prototype={constructor:r,updateNeedTransform:function(){this.needLocalTransform=Math.abs(this.rotation[0])>1e-4||Math.abs(this.position[0])>1e-4||Math.abs(this.position[1])>1e-4||Math.abs(this.scale[0]-1)>1e-4||Math.abs(this.scale[1]-1)>1e-4},updateTransform:function(){this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform;if(!this.needTransform)return;var e=this.transform||t.create();t.identity(e);if(this.needLocalTransform){if(this.scale&&(this.scale[0]!==1||this.scale[1]!==1)){n[0]=-this.scale[2]||0,n[1]=-this.scale[3]||0,(n[0]||n[1])&&t.translate(e,e,n),t.scale(e,e,this.scale);if(n[0]||n[1])n[0]=-n[0],n[1]=-n[1],t.translate(e,e,n)}if(this.rotation)if(this.rotation instanceof Array){if(this.rotation[0]!==0){n[0]=-this.rotation[1]||0,n[1]=-this.rotation[2]||0,(n[0]||n[1])&&t.translate(e,e,n),t.rotate(e,e,this.rotation[0]);if(n[0]||n[1])n[0]=-n[0],n[1]=-n[1],t.translate(e,e,n)}}else this.rotation!==0&&t.rotate(e,e,this.rotation);this.position&&(this.position[0]!==0||this.position[1]!==0)&&t.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?t.mul(this.transform,this.parent.transform,this.transform):t.copy(this.transform,this.parent.transform))},setTransform:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},r}),define("zrender/tool/color",["require","../tool/util"],function(e){function f(e){r=e}function l(){r=i}function c(e,t){return e|=0,t=t||r,t[e%t.length]}function h(e){s=e}function p(){o=s}function d(){return s}function v(e,r,i,s,o,u,a){n||(n=t.getContext());var f=n.createRadialGradient(e,r,i,s,o,u);for(var l=0,c=a.length;l<c;l++)f.addColorStop(a[l][0],a[l][1]);return f.__nonRecursion=!0,f}function m(e,r,i,s,o){n||(n=t.getContext());var u=n.createLinearGradient(e,r,i,s);for(var a=0,f=o.length;a<f;a++)u.addColorStop(o[a][0],o[a][1]);return u.__nonRecursion=!0,u}function g(e,t,n){e=S(e),t=S(t),e=F(e),t=F(t);var r=[],i=(t[0]-e[0])/n,s=(t[1]-e[1])/n,o=(t[2]-e[2])/n;for(var u=0,a=e[0],f=e[1],l=e[2];u<n;u++)r[u]=b([R(Math.floor(a),[0,255]),R(Math.floor(f),[0,255]),R(Math.floor(l),[0,255])]),a+=i,f+=s,l+=o;return a=t[0],f=t[1],l=t[2],r[u]=b([a,f,l]),r}function y(e,t){var n=[],r=e.length;t===undefined&&(t=20);if(r===1)n=g(e[0],e[0],t);else if(r>1)for(var i=0,s=r-1;i<s;i++){var o=g(e[i],e[i+1],t);i<s-1&&o.pop(),n=n.concat(o)}return n}function b(e,t){t=t||"rgb";if(e&&(e.length===3||e.length===4)){e=q(e,function(e){return e>1?Math.ceil(e):e});if(t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var n=q(e.slice(1,3),function(e){return e+"%"});e[1]=n[0],e[2]=n[1]}return t.indexOf("a")>-1?(e.length===3&&e.push(1),e[3]=R(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}function w(e){e=_(e),e.indexOf("rgba")<0&&(e=S(e));var t=[],n=0;return e.replace(/[\d.]+/g,function(e){n<3?e|=0:e=+e,t[n++]=e}),t}function E(e,t){var n=F(e),r=n[3];return typeof r=="undefined"&&(r=1),e.indexOf("hsb")>-1?n=U(n):e.indexOf("hsl")>-1&&(n=z(n)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?n=X(n):t.indexOf("hsl")>-1&&(n=V(n)),n[3]=r,b(n,t)}function S(e){return E(e,"rgba")}function x(e){return E(e,"rgb")}function T(e){return E(e,"hex")}function N(e){return E(e,"hsva")}function C(e){return E(e,"hsv")}function k(e){return E(e,"hsba")}function L(e){return E(e,"hsb")}function A(e){return E(e,"hsla")}function O(e){return E(e,"hsl")}function M(e){for(var t in a)if(T(a[t])===T(e))return t;return null}function _(e){return String(e).replace(/\s+/g,"")}function D(e){a[e]&&(e=a[e]),e=_(e),e=e.replace(/hsv/i,"hsb");if(/^#[\da-f]{3}$/i.test(e)){e=parseInt(e.slice(1),16);var t=(e&3840)<<8,n=(e&240)<<4,r=e&15;e="#"+((1<<24)+(t<<4)+t+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return e}function P(e,t){var n=t>0?1:-1;typeof t=="undefined"&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=x(e);var r=F(e);for(var i=0;i<3;i++)n===1?r[i]=r[i]*(1-t)|0:r[i]=(255-r[i])*t+r[i]|0;return"rgb("+r.join(",")+")"}function H(e){var t=F(S(e));return t=q(t,function(e){return 255-e}),b(t,"rgb")}function B(e,t,n){typeof n=="undefined"&&(n=.5),n=1-R(n,[0,1]);var r=n*2-1,i=F(S(e)),s=F(S(t)),o=i[3]-s[3],u=((r*o===-1?r:(r+o)/(1+r*o))+1)/2,a=1-u,f=[];for(var l=0;l<3;l++)f[l]=i[l]*u+s[l]*a;var c=i[3]*n+s[3]*(1-n);return c=Math.max(0,Math.min(1,c)),i[3]===1&&s[3]===1?b(f,"rgb"):(f[3]=c,b(f,"rgba"))}function j(){return"#"+Math.random().toString(16).slice(2,8)}function F(e){e=D(e);var t=e.match(u);if(t===null)throw new Error("The color format error");var n,r,i=[],s;if(t[2])n=t[2].replace("#","").split(""),s=[n[0]+n[1],n[2]+n[3],n[4]+n[5]],i=q(s,function(e){return R(parseInt(e,16),[0,255])});else if(t[4]){var o=t[4].split(",");r=o[3],s=o.slice(0,3),i=q(s,function(e){return e=Math.floor(e.indexOf("%")>0?parseInt(e,0)*2.55:e),R(e,[0,255])}),typeof r!="undefined"&&i.push(R(parseFloat(r),[0,1]))}else if(t[5]||t[6]){var a=(t[5]||t[6]).split(","),f=parseInt(a[0],0)/360,l=a[1],c=a[2];r=a[3],i=q([l,c],function(e){return R(parseFloat(e)/100,[0,1])}),i.unshift(f),typeof r!="undefined"&&i.push(R(parseFloat(r),[0,1]))}return i}function I(e,t){t===null&&(t=1);var n=F(S(e));return n[3]=R(Number(t).toFixed(4),[0,1]),b(n,"rgba")}function q(e,t){if(typeof t!="function")throw new TypeError;var n=e?e.length:0;for(var r=0;r<n;r++)e[r]=t(e[r]);return e}function R(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}function U(e){var t=e[0],n=e[1],r=e[2],i,s,o;if(n===0)i=r*255,s=r*255,o=r*255;else{var u=t*6;u===6&&(u=0);var a=u|0,f=r*(1-n),l=r*(1-n*(u-a)),c=r*(1-n*(1-(u-a))),h=0,p=0,d=0;a===0?(h=r,p=c,d=f):a===1?(h=l,p=r,d=f):a===2?(h=f,p=r,d=c):a===3?(h=f,p=l,d=r):a===4?(h=c,p=f,d=r):(h=r,p=f,d=l),i=h*255,s=p*255,o=d*255}return[i,s,o]}function z(e){var t=e[0],n=e[1],r=e[2],i,s,o;if(n===0)i=r*255,s=r*255,o=r*255;else{var u;r<.5?u=r*(1+n):u=r+n-n*r;var a=2*r-u;i=255*W(a,u,t+1/3),s=255*W(a,u,t),o=255*W(a,u,t-1/3)}return[i,s,o]}function W(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function X(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i,u=s,a,f;if(o===0)a=0,f=0;else{f=o/s;var l=((s-t)/6+o/2)/o,c=((s-n)/6+o/2)/o,h=((s-r)/6+o/2)/o;t===s?a=h-c:n===s?a=1/3+l-h:r===s&&(a=2/3+c-l),a<0&&(a+=1),a>1&&(a-=1)}return a*=360,f*=100,u*=100,[a,f,u]}function V(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i,u=(s+i)/2,a,f;if(o===0)a=0,f=0;else{u<.5?f=o/(s+i):f=o/(2-s-i);var l=((s-t)/6+o/2)/o,c=((s-n)/6+o/2)/o,h=((s-r)/6+o/2)/o;t===s?a=h-c:n===s?a=1/3+l-h:r===s&&(a=2/3+c-l),a<0&&(a+=1),a>1&&(a-=1)}return a*=360,f*=100,u*=100,[a,f,u]}var t=e("../tool/util"),n,r=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],i=r,s="rgba(255,255,0,0.5)",o=s,u=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};return{customPalette:f,resetPalette:l,getColor:c,getHighlightColor:d,customHighlight:h,resetHighlight:p,getRadialGradient:v,getLinearGradient:m,getGradientColors:y,getStepColors:g,reverse:H,mix:B,lift:P,trim:_,random:j,toRGB:x,toRGBA:S,toHex:T,toHSL:O,toHSLA:A,toHSB:L,toHSBA:k,toHSV:C,toHSVA:N,toName:M,toColor:b,toArray:w,alpha:I,getData:F}}),define("zrender/shape/Base",["require","../tool/matrix","../tool/guid","../tool/util","./mixin/Transformable","../tool/event","../tool/area","../tool/area","../tool/color","../tool/area"],function(e){function o(t,n,r,i,s,o,a){s&&(t.font=s),t.textAlign=o,t.textBaseline=a;var f=u(n,r,i,s,o,a);n=(n+"").split("\n");var l=e("../tool/area").getTextHeight("国",s);switch(a){case"top":i=f.y;break;case"bottom":i=f.y+l;break;default:i=f.y+l/2}for(var c=0,h=n.length;c<h;c++)t.fillText(n[c],r,i),i+=l}function u(t,n,r,i,s,o){var u=e("../tool/area"),a=u.getTextWidth(t,i),f=u.getTextHeight("国",i);t=(t+"").split("\n");switch(s){case"end":case"right":n-=a;break;case"center":n-=a/2}switch(o){case"top":break;case"bottom":r-=f*t.length;break;default:r-=f*t.length/2}return{x:n,y:r,width:a,height:f*t.length}}function a(e){e=e||{},this.id=e.id||n();for(var t in e)this[t]=e[t];this.style=this.style||{},this.parent=null,this.__dirty=!0,i.call(this),s.call(this)}var t=e("../tool/matrix"),n=e("../tool/guid"),r=e("../tool/util"),i=e("./mixin/Transformable"),s=e("../tool/event").Dispatcher;a.prototype.invisible=!1,a.prototype.ignore=!1,a.prototype.zlevel=0,a.prototype.draggable=!1,a.prototype.clickable=!1,a.prototype.hoverable=!0,a.prototype.z=0,a.prototype.brush=function(e,t){var n=this.style;this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),this.brushTypeOnly=="stroke"&&(n.strokeColor=n.strokeColor||n.color),e.save(),this.setContext(e,n),this.setTransform(e),e.beginPath(),this.buildPath(e,n),this.brushTypeOnly!="stroke"&&e.closePath();switch(n.brushType){case"both":e.fill();case"stroke":n.lineWidth>0&&e.stroke();break;default:e.fill()}this.drawText(e,n,this.style),e.restore()};var f=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];return a.prototype.setContext=function(e,t){for(var n=0,r=f.length;n<r;n++){var i=f[n][0],s=t[i],o=f[n][1];typeof s!="undefined"&&(e[o]=s)}},a.prototype.getHighlightStyle=function(t,n,r){var i={};for(var s in t)i[s]=t[s];var o=e("../tool/color"),u=o.getHighlightColor();t.brushType!="stroke"?(i.strokeColor=u,i.lineWidth=(t.lineWidth||1)+this.getHighlightZoom(),i.brushType="both"):r!="stroke"?(i.strokeColor=u,i.lineWidth=(t.lineWidth||1)+this.getHighlightZoom()):i.strokeColor=n.strokeColor||o.mix(t.strokeColor,o.toRGB(u));for(var s in n)typeof n[s]!="undefined"&&(i[s]=n[s]);return i},a.prototype.getHighlightZoom=function(){return this.type!="text"?6:2},a.prototype.drift=function(e,t){this.position[0]+=e,this.position[1]+=t},a.prototype.getTansform=function(){var e=[];return function(n,r){var i=[n,r];return this.needTransform&&this.transform&&(t.invert(e,this.transform),t.mulVector(i,e,[n,r,1]),n==i[0]&&r==i[1]&&this.updateNeedTransform()),i}}(),a.prototype.isCover=function(t,n){var r=this.getTansform(t,n);t=r[0],n=r[1];var i=this.style.__rect;return i||(i=this.style.__rect=this.getRect(this.style)),t>=i.x&&t<=i.x+i.width&&n>=i.y&&n<=i.y+i.height?e("../tool/area").isInside(this,this.style,t,n):!1},a.prototype.drawText=function(e,t,n){if(typeof t.text=="undefined"||t.text===!1)return;var r=t.textColor||t.color||t.strokeColor;e.fillStyle=r;var i=10,s,u,a,f,l=t.textPosition||this.textPosition||"top";switch(l){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var c=(n||t).__rect||this.getRect(n||t);switch(l){case"inside":a=c.x+c.width/2,f=c.y+c.height/2,s="center",u="middle",t.brushType!="stroke"&&r==t.color&&(e.fillStyle="#fff");break;case"left":a=c.x-i,f=c.y+c.height/2,s="end",u="middle";break;case"right":a=c.x+c.width+i,f=c.y+c.height/2,s="start",u="middle";break;case"top":a=c.x+c.width/2,f=c.y-i,s="center",u="bottom";break;case"bottom":a=c.x+c.width/2,f=c.y+c.height+i,s="center",u="top"}}break;case"start":case"end":var h,p,d,v;if(typeof t.pointList!="undefined"){var m=t.pointList;if(m.length<2)return;var g=m.length;switch(l){case"start":h=m[0][0],p=m[1][0],d=m[0][1],v=m[1][1];break;case"end":h=m[g-2][0],p=m[g-1][0],d=m[g-2][1],v=m[g-1][1]}}else h=t.xStart||0,p=t.xEnd||0,d=t.yStart||0,v=t.yEnd||0;switch(l){case"start":s=h<p?"end":"start",u=d<v?"bottom":"top",a=h,f=d;break;case"end":s=h<p?"start":"end",u=d<v?"top":"bottom",a=p,f=v}i-=4,h!=p?a-=s=="end"?i:-i:s="center",d!=v?f-=u=="bottom"?i:-i:u="middle";break;case"specific":a=t.textX||0,f=t.textY||0,s="start",u="middle"}a!=null&&f!=null&&o(e,t.text,a,f,t.textFont,t.textAlign||s,t.textBaseline||u)},a.prototype.isSilent=function(){return!(this.hoverable||this.draggable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)},r.merge(a.prototype,i.prototype,!0),r.merge(a.prototype,s.prototype,!0),a}),define("zrender/shape/Path",["require","./Base","../tool/util"],function(e){function n(e){t.call(this,e)}var t=e("./Base");return n.prototype={type:"path",_parsePathData:function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(/-/g," -"),t=t.replace(/  /g," "),t=t.replace(/ /g,","),t=t.replace(/,,/g,",");var r;for(r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var i=t.split("|"),s=[],o=0,u=0;for(r=1;r<i.length;r++){var a=i[r],f=a.charAt(0);a=a.slice(1),a=a.replace(new RegExp("e,-","g"),"e-");var l=a.split(",");l.length>0&&l[0]===""&&l.shift();for(var c=0;c<l.length;c++)l[c]=parseFloat(l[c]);while(l.length>0){if(isNaN(l[0]))break;var h=null,p=[],d,v,m,g,y,b,w,E,S=o,x=u;switch(f){case"l":o+=l.shift(),u+=l.shift(),h="L",p.push(o,u);break;case"L":o=l.shift(),u=l.shift(),p.push(o,u);break;case"m":o+=l.shift(),u+=l.shift(),h="M",p.push(o,u),f="l";break;case"M":o=l.shift(),u=l.shift(),h="M",p.push(o,u),f="L";break;case"h":o+=l.shift(),h="L",p.push(o,u);break;case"H":o=l.shift(),h="L",p.push(o,u);break;case"v":u+=l.shift(),h="L",p.push(o,u);break;case"V":u=l.shift(),h="L",p.push(o,u);break;case"C":p.push(l.shift(),l.shift(),l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"c":p.push(o+l.shift(),u+l.shift(),o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"S":d=o,v=u,m=s[s.length-1],m.command==="C"&&(d=o+(o-m.points[2]),v=u+(u-m.points[3])),p.push(d,v,l.shift(),l.shift()),o=l.shift(),u=l.shift(),h="C",p.push(o,u);break;case"s":d=o,v=u,m=s[s.length-1],m.command==="C"&&(d=o+(o-m.points[2]),v=u+(u-m.points[3])),p.push(d,v,o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"Q":p.push(l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"q":p.push(o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="Q",p.push(o,u);break;case"T":d=o,v=u,m=s[s.length-1],m.command==="Q"&&(d=o+(o-m.points[0]),v=u+(u-m.points[1])),o=l.shift(),u=l.shift(),h="Q",p.push(d,v,o,u);break;case"t":d=o,v=u,m=s[s.length-1],m.command==="Q"&&(d=o+(o-m.points[0]),v=u+(u-m.points[1])),o+=l.shift(),u+=l.shift(),h="Q",p.push(d,v,o,u);break;case"A":g=l.shift(),y=l.shift(),b=l.shift(),w=l.shift(),E=l.shift(),S=o,x=u,o=l.shift(),u=l.shift(),h="A",p=this._convertPoint(S,x,o,u,w,E,g,y,b);break;case"a":g=l.shift(),y=l.shift(),b=l.shift(),w=l.shift(),E=l.shift(),S=o,x=u,o+=l.shift(),u+=l.shift(),h="A",p=this._convertPoint(S,x,o,u,w,E,g,y,b)}s.push({command:h||f,points:p})}(f==="z"||f==="Z")&&s.push({command:"z",points:[]})}return s},_convertPoint:function(e,t,n,r,i,s,o,u,a){var f=a*(Math.PI/180),l=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,c=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,h=l*l/(o*o)+c*c/(u*u);h>1&&(o*=Math.sqrt(h),u*=Math.sqrt(h));var p=Math.sqrt((o*o*u*u-o*o*c*c-u*u*l*l)/(o*o*c*c+u*u*l*l));i===s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*c/u,v=p*-u*l/o,m=(e+n)/2+Math.cos(f)*d-Math.sin(f)*v,g=(t+r)/2+Math.sin(f)*d+Math.cos(f)*v,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},E=w([1,0],[(l-d)/o,(c-v)/u]),S=[(l-d)/o,(c-v)/u],x=[(-1*l-d)/o,(-1*c-v)/u],T=w(S,x);return b(S,x)<=-1&&(T=Math.PI),b(S,x)>=1&&(T=0),s===0&&T>0&&(T-=2*Math.PI),s===1&&T<0&&(T+=2*Math.PI),[m,g,o,u,E,T,f,s]},buildPath:function(e,t){var n=t.path,r=this.pathArray||this._parsePathData(n),i=t.x||0,s=t.y||0,o,u=t.pointList=[],a=[];for(var f=0,l=r.length;f<l;f++){r[f].command.toUpperCase()=="M"&&(a.length>0&&u.push(a),a=[]),o=r[f].points;for(var c=0,h=o.length;c<h;c+=2)a.push([o[c]+i,o[c+1]+s])}a.length>0&&u.push(a);var p;for(var f=0,l=r.length;f<l;f++){p=r[f].command,o=r[f].points;for(var c=0,h=o.length;c<h;c++)c%2===0?o[c]+=i:o[c]+=s;switch(p){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var d=o[0],v=o[1],m=o[2],g=o[3],y=o[4],b=o[5],w=o[6],E=o[7],S=m>g?m:g,x=m>g?1:m/g,T=m>g?g/m:1;e.translate(d,v),e.rotate(w),e.scale(x,T),e.arc(0,0,S,y,y+b,1-E),e.scale(1/x,1/T),e.rotate(-w),e.translate(-d,-v);break;case"z":e.closePath()}}return},getRect:function(e){if(e.__rect)return e.__rect;var t;e.brushType=="stroke"||e.brushType=="fill"?t=e.lineWidth||1:t=0;var n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,o=e.x||0,u=e.y||0,a=this.pathArray||this._parsePathData(e.path);for(var f=0;f<a.length;f++){var l=a[f].points;for(var c=0;c<l.length;c++)c%2===0?(l[c]+o<n&&(n=l[c]+o),l[c]+o>r&&(r=l[c]+o)):(l[c]+u<i&&(i=l[c]+u),l[c]+u>s&&(s=l[c]+u))}var h;return n===Number.MAX_VALUE||r===Number.MIN_VALUE||i===Number.MAX_VALUE||s===Number.MIN_VALUE?h={x:0,y:0,width:0,height:0}:h={x:Math.round(n-t/2),y:Math.round(i-t/2),width:r-n+t,height:s-i+t},e.__rect=h,h}},e("../tool/util").inherits(n,t),n}),define("zrender/tool/area",["require","../tool/util","../shape/Path"],function(e){function a(e,r,i,s){if(!r||!e)return!1;var o=e.type;n=n||t.getContext();if(!g(r.__rect||e.getRect(r),i,s))return!1;var u=f(o,r,i,s);if(typeof u!="undefined")return u;if(o!="bezier-curve"&&e.buildPath&&n.isPointInPath)return l(e,n,r,i,s);if(n.getImageData)return c(e,r,i,s);switch(o){case"heart":case"droplet":case"ellipse":return!0;case"trochoid":var a=r.location=="out"?r.r1+r.r2+r.d:r.r1-r.r2+r.d;return y(r,i,s,a);case"rose":return y(r,i,s,r.maxr);default:return!1}}function f(e,t,n,r){switch(e){case"line":return d(t,n,r);case"broken-line":return v(t,n,r);case"text":return!0;case"ring":return m(t,n,r);case"rectangle":return!0;case"circle":return y(t,n,r,t.r);case"sector":return b(t,n,r);case"path":return E(t,n,r);case"polygon":case"star":case"isogon":return w(t,n,r);case"image":return!0}}function l(e,t,n,r,i){return t.beginPath(),e.buildPath(t,n),t.closePath(),t.isPointInPath(r,i)}function c(e,n,r,i){var s=n.__rect||e.getRect(n),o=t.getPixelContext(),u=t.getPixelOffset();return t.adjustCanvasSize(r,i),o.clearRect(s.x,s.y,s.width,s.height),o.beginPath(),e.brush(o,{style:n}),o.closePath(),h(o,r+u.x,i+u.y)}function h(e,t,n,r){var i;typeof r!="undefined"?(r=(r||1)>>1,i=e.getImageData(t-r,n-r,r+r,r+r).data):i=e.getImageData(t,n,1,1).data;var s=i.length;while(s--)if(i[s]!==0)return!0;return!1}function p(e,t,n,r){return!a(e,t,n,r)}function d(e,t,n){var r=e.xStart,i=e.yStart,s=e.xEnd,o=e.yEnd,u=Math.max(e.lineWidth,5),a=0,f=r,l,c;r<s?(l=r-u,c=s+u):(l=s-u,c=r+u);var h,p;i<o?(h=i-u,p=o+u):(h=o-u,p=i+u);if(t<l||t>c||n<h||n>p)return!1;if(r===s)return Math.abs(t-r)<=u/2;a=(i-o)/(r-s),f=(r*o-s*i)/(r-s);var d=(a*t-n+f)*(a*t-n+f)/(a*a+1);return d<=u/2*u/2}function v(e,t,n){var r=e.pointList,i={xStart:0,yStart:0,xEnd:0,yEnd:0,lineWidth:0};for(var s=0,o=r.length-1;s<o;s++){i.xStart=r[s][0],i.yStart=r[s][1],i.xEnd=r[s+1][0],i.yEnd=r[s+1][1],i.lineWidth=Math.max(e.lineWidth,10);if(d(i,t,n))return!0}return!1}function m(e,t,n){return y(e,t,n,e.r)&&!y({x:e.x,y:e.y},t,n,e.r0||0)}function g(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function y(e,t,n,r){return(t-e.x)*(t-e.x)+(n-e.y)*(n-e.y)<r*r}function b(e,t,n){if(!y(e,t,n,e.r)||e.r0>0&&y({x:e.x,y:e.y},t,n,e.r0))return!1;if(Math.abs(e.endAngle-e.startAngle)>=360)return!0;var r=(360-Math.atan2(n-e.y,t-e.x)/Math.PI*180)%360,i=(360+e.endAngle)%360,s=(360+e.startAngle)%360;return i>s?r>=s&&r<=i:!(r>=i&&r<=s)}function w(e,t,n){var r,i,s=e.pointList,o=s.length,u=!1,a=!0,f;for(r=0;r<o;++r)if(s[r][0]==t&&s[r][1]==n){a=!1,u=!0;break}if(a){a=!1,u=!1;for(r=0,i=o-1;r<o;i=r++)if(s[r][1]<n&&n<s[i][1]||s[i][1]<n&&n<s[r][1]){if(t<=s[r][0]||t<=s[i][0]){f=(n-s[r][1])*(s[i][0]-s[r][0])/(s[i][1]-s[r][1])+s[r][0];if(t<f)u=!u;else if(t==f){u=!0;break}}}else if(n==s[r][1]){if(t<s[r][0]){s[r][1]>s[i][1]?--n:++n;break}}else if(s[r][1]==s[i][1]&&n==s[r][1]&&(s[r][0]<t&&t<s[i][0]||s[i][0]<t&&t<s[r][0])){u=!0;break}}return u}function E(t,r,i){t.pointList||e("../shape/Path").prototype.buildPath(n,t);var s=t.pointList,o=!1;for(var u=0,a=s.length;u<a;u++){o=w({pointList:s[u]},r,i);if(o)break}return o}function S(e,i){var o=e+":"+i;if(r[o])return r[o];n=n||t.getContext(),n.save(),i&&(n.font=i),e=(e+"").split("\n");var a=0;for(var f=0,l=e.length;f<l;f++)a=Math.max(n.measureText(e[f]).width,a);return n.restore(),r[o]=a,++s>u&&(s=0,r={}),a}function x(e,r){var s=e+":"+r;if(i[s])return i[s];n=n||t.getContext(),n.save(),r&&(n.font=r),e=(e+"").split("\n");var a=(n.measureText("国").width+2)*e.length;return n.restore(),i[s]=a,++o>u&&(o=0,i={}),a}var t=e("../tool/util"),n,r={},i={},s=0,o=0,u=2e4;return{isInside:a,isOutside:p,getTextWidth:S,getTextHeight:x}}),define("zrender/shape/Text",["require","../tool/area","./Base","../tool/util"],function(e){function r(e){n.call(this,e)}var t=e("../tool/area"),n=e("./Base");return r.prototype={type:"text",brush:function(e,n){var r=this.style;n&&(r=this.getHighlightStyle(r,this.highlightStyle||{}));if(typeof r.text=="undefined"||r.text===!1)return;e.save(),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";var i=(r.text+"").split("\n"),s=t.getTextHeight("国",r.textFont),o=this.getRect(r),u=r.x,a;r.textBaseline=="top"?a=o.y:r.textBaseline=="bottom"?a=o.y+s:a=o.y+s/2;for(var f=0,l=i.length;f<l;f++){if(r.maxWidth)switch(r.brushType){case"fill":e.fillText(i[f],u,a,r.maxWidth);break;case"stroke":e.strokeText(i[f],u,a,r.maxWidth);break;case"both":e.fillText(i[f],u,a,r.maxWidth),e.strokeText(i[f],u,a,r.maxWidth);break;default:e.fillText(i[f],u,a,r.maxWidth)}else switch(r.brushType){case"fill":e.fillText(i[f],u,a);break;case"stroke":e.strokeText(i[f],u,a);break;case"both":e.fillText(i[f],u,a),e.strokeText(i[f],u,a);break;default:e.fillText(i[f],u,a)}a+=s}e.restore();return},getRect:function(e){if(e.__rect)return e.__rect;var n=t.getTextWidth(e.text,e.textFont),r=t.getTextHeight(e.text,e.textFont),i=e.x;e.textAlign=="end"||e.textAlign=="right"?i-=n:e.textAlign=="center"&&(i-=n/2);var s;return e.textBaseline=="top"?s=e.y:e.textBaseline=="bottom"?s=e.y-r:s=e.y-r/2,e.__rect={x:i,y:s,width:n,height:r},e.__rect}},e("../tool/util").inherits(r,n),r}),define("zrender/shape/Rectangle",["require","./Base","../tool/util"],function(e){function n(e){t.call(this,e)}var t=e("./Base");return n.prototype={type:"rectangle",_buildRadiusPath:function(e,t){var n=t.x,r=t.y,i=t.width,s=t.height,o=t.radius,u,a,f,l;typeof o=="number"?u=a=f=l=o:o instanceof Array?o.length===1?u=a=f=l=o[0]:o.length===2?(u=f=o[0],a=l=o[1]):o.length===3?(u=o[0],a=l=o[1],f=o[2]):(u=o[0],a=o[1],f=o[2],l=o[3]):u=a=f=l=0,e.moveTo(n+u,r),e.lineTo(n+i-a,r),a!==0&&e.quadraticCurveTo(n+i,r,n+i,r+a),e.lineTo(n+i,r+s-f),f!==0&&e.quadraticCurveTo(n+i,r+s,n+i-f,r+s),e.lineTo(n+l,r+s),l!==0&&e.quadraticCurveTo(n,r+s,n,r+s-l),e.lineTo(n,r+u),u!==0&&e.quadraticCurveTo(n,r,n+u,r)},buildPath:function(e,t){t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x,t.y),e.lineTo(t.x+t.width,t.y),e.lineTo(t.x+t.width,t.y+t.height),e.lineTo(t.x,t.y+t.height),e.lineTo(t.x,t.y));return},getRect:function(e){if(e.__rect)return e.__rect;var t;return e.brushType=="stroke"||e.brushType=="fill"?t=e.lineWidth||1:t=0,e.__rect={x:Math.round(e.x-t/2),y:Math.round(e.y-t/2),width:e.width+t,height:e.height+t},e.__rect}},e("../tool/util").inherits(n,t),n}),define("zrender/loadingEffect/Base",["require","../tool/util","../shape/Text","../shape/Rectangle"],function(e){function o(e){this.setOptions(e)}var t=e("../tool/util"),n=e("../shape/Text"),r=e("../shape/Rectangle"),i="Loading...",s="normal 16px Arial";return o.prototype.createTextShape=function(e){return new n({highlightStyle:t.merge({x:this.canvasWidth/2,y:this.canvasHeight/2,text:i,textAlign:"center",textBaseline:"middle",textFont:s,color:"#333",brushType:"fill"},e,!0)})},o.prototype.createBackgroundShape=function(e){return new r({highlightStyle:{x:0,y:0,width:this.canvasWidth,height:this.canvasHeight,brushType:"fill",color:e}})},o.prototype.start=function(e){function t(t){e.storage.addHover(t)}function n(){e.refreshHover()}this.canvasWidth=e._width,this.canvasHeight=e._height,this.loadingTimer=this._start(t,n)},o.prototype._start=function(){return setInterval(function(){},1e4)},o.prototype.stop=function(){clearInterval(this.loadingTimer)},o.prototype.setOptions=function(e){this.options=e||{}},o.prototype.adjust=function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e},o}),define("zrender/shape/Image",["require","./Base","../tool/util"],function(e){function s(e){i.call(this,e)}var t={},n=[],r,i=e("./Base");return s.prototype={type:"image",brush:function(e,i,s){var o=this.style||{};i&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var u=o.image,a=this;if(typeof u=="string"){var f=u;t[f]?u=t[f]:(u=new Image,u.onload=function(){u.onload=null,clearTimeout(r),n.push(a),r=setTimeout(function(){s&&s(n),n=[]},10)},t[f]=u,u.src=f)}if(u){if(u.nodeName.toUpperCase()=="IMG")if(window.ActiveXObject){if(u.readyState!="complete")return}else if(!u.complete)return;var l=o.width||u.width,c=o.height||u.height,h=o.x,p=o.y;if(!u.width||!u.height)return;e.save(),this.setContext(e,o),this.setTransform(e);if(o.sWidth&&o.sHeight){var d=o.sx||0,v=o.sy||0;e.drawImage(u,d,v,o.sWidth,o.sHeight,h,p,l,c)}else if(o.sx&&o.sy){var d=o.sx,v=o.sy,m=l-d,g=c-v;e.drawImage(u,d,v,m,g,h,p,l,c)}else e.drawImage(u,h,p,l,c);o.width=l,o.height=c,this.style.width=l,this.style.height=c,this.drawText(e,o,this.style),e.restore()}},buildPath:function(e,t){e.rect(t.x,t.y,t.width,t.height);return},getRect:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height}}},e("../tool/util").inherits(s,i),s}),define("zrender/Painter",["require","./config","./tool/util","./tool/log","./tool/matrix","./loadingEffect/Base","./shape/Image"],function(e){function a(){return!1}function f(){}function l(e,t){this.root=e,this.storage=t,e.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",e.appendChild(n),this._layers={},this._layerConfig={},this._loadingEffect=new s({}),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=c("bg","div",this),n.appendChild(this._bgDom);var r=new h("_zrender_hover_",this);this._layers.hover=r,n.appendChild(r.dom),r.onselectstart=a;var i=this;this.updatePainter=function(e,t){i.update(e,t)}}function c(e,t,n){var r=document.createElement(t),i=n._width,s=n._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=i+"px",r.style.height=s+"px",r.setAttribute("width",i*o),r.setAttribute("height",s*o),r.setAttribute("data-zr-dom-id",e),r}function h(e,t){this.dom=c(e,"canvas",t),u&&u.initElement(this.dom),this.ctx=this.dom.getContext("2d"),o!=1&&this.ctx.scale(o,o),this.domBack=null,this.ctxBack=null,this.painter=t,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0}var t=e("./config"),n=e("./tool/util"),r=e("./tool/log"),i=e("./tool/matrix"),s=e("./loadingEffect/Base"),o=window.devicePixelRatio||1,u=window.G_vmlCanvasManager;return l.prototype.render=function(e){return this.isLoading()&&this.hideLoading(),this.refresh(e),this},l.prototype.refresh=function(e){var t=this.storage.getShapeList(!0);return this._paintList(t),typeof e=="function"&&e(),this},l.prototype._paintList=function(e){this._updateLayerStatus(e);var n,s,o;for(var a in this._layers)a!=="hover"&&this._layers[a].unusedCount++;var f=[];for(var l=0,c=e.length;l<c;l++){var h=e[l];s!==h.zlevel&&(n=this.getLayer(h.zlevel,n),o=n.ctx,s=h.zlevel,n.unusedCount=0,n.dirty&&n.clear());if(h.__startClip&&!u){var p=h.__startClip;o.save();if(p.needTransform){var d=p.transform;i.invert(f,d),o.transform(d[0],d[1],d[2],d[3],d[4],d[5])}o.beginPath(),p.buildPath(o,p.style),o.clip();if(p.needTransform){var d=f;o.transform(d[0],d[1],d[2],d[3],d[4],d[5])}}if(n.dirty&&!h.invisible)if(!h.onbrush||h.onbrush&&!h.onbrush(o,!1))if(t.catchBrushException)try{h.brush(o,!1,this.updatePainter)}catch(v){r(v,"brush error of "+h.type,h)}else h.brush(o,!1,this.updatePainter);h.__stopClip&&!u&&o.restore(),h.__dirty=!1}for(var a in this._layers)if(a!=="hover"){var m=this._layers[a];m.dirty=!1,m.unusedCount>=500?(delete this._layers[a],m.dom.parentNode.removeChild(m.dom)):m.unusedCount==1&&m.clear()}},l.prototype.getLayer=function(e,t){var n=this._layers[e];if(!n){n=new h(e,this);var r=t?t.dom:this._bgDom;r.nextSibling?r.parentNode.insertBefore(n.dom,r.nextSibling):r.parentNode.appendChild(n.dom),this._layers[e]=n,n.config=this._layerConfig[e]}return n},l.prototype._updateLayerStatus=function(e){var t=this._layers,n={};for(var r in t)r!=="hover"&&(n[r]=t[r].elCount,t[r].elCount=0);for(var i=0,s=e.length;i<s;i++){var o=e[i],u=o.zlevel,a=t[u];if(a){a.elCount++;if(a.dirty)continue;a.dirty=o.__dirty}}for(var r in t)r!=="hover"&&n[r]!==t[r].elCount&&(t[r].dirty=!0)},l.prototype.update=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];this.storage.mod(i.id)}return this.refresh(t),this},l.prototype.setLoadingEffect=function(e){return this._loadingEffect=e,this},l.prototype.clear=function(){for(var e in this._layers){if(e=="hover")continue;this._layers[e].clear()}return this},l.prototype.modLayer=function(e,t){if(t){this._layerConfig[e]?n.merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(r.config=this._layerConfig[e])}},l.prototype.refreshHover=function(){this.clearHover();var e=this.storage.getHoverShapes(!0);for(var t=0,n=e.length;t<n;t++)this._brushHover(e[t]);return this.storage.delHover(),this},l.prototype.clearHover=function(){var e=this._layers.hover;return e&&e.clear(),this},l.prototype.showLoading=function(e){return this._loadingEffect&&this._loadingEffect.stop(),e&&this.setLoadingEffect(e),this._loadingEffect.start(this),this.loading=!0,this},l.prototype.hideLoading=function(){return this._loadingEffect.stop(),this.clearHover(),this.loading=!1,this},l.prototype.isLoading=function(){return this.loading},l.prototype.resize=function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),n=this._getHeight();e.style.display="";if(this._width!=t||n!=this._height){this._width=t,this._height=n,e.style.width=t+"px",e.style.height=n+"px";for(var r in this._layers)this._layers[r].resize(t,n);this.refresh()}return this},l.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},l.prototype.dispose=function(){this.isLoading()&&this.hideLoading(),this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},l.prototype.getDomHover=function(){return this._layers.hover.dom},l.prototype.toDataURL=function(e,n,i){if(u)return null;var s=c("image","canvas",this);this._bgDom.appendChild(s);var a=s.getContext("2d");o!=1&&a.scale(o,o),a.fillStyle=n||"#fff",a.rect(0,0,this._width*o,this._height*o),a.fill(),this.storage.iterShape(function(e){if(!e.invisible)if(!e.onbrush||e.onbrush&&!e.onbrush(a,!1))if(t.catchBrushException)try{e.brush(a,!1,this.updatePainter)}catch(n){r(n,"brush error of "+e.type,e)}else e.brush(a,!1,this.updatePainter)},{normal:"up",update:!0});var f=s.toDataURL(e,i);return a=null,this._bgDom.removeChild(s),f},l.prototype.getWidth=function(){return this._width},l.prototype.getHeight=function(){return this._height},l.prototype._getWidth=function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0},l.prototype._getHeight=function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0},l.prototype._brushHover=function(e){var n=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(n,!0))if(t.catchBrushException)try{e.brush(n,!0,this.updatePainter)}catch(i){r(i,"hoverBrush error of "+e.type,e)}else e.brush(n,!0,this.updatePainter)},l.prototype._shapeToImage=function(t,n,r,i,s){var o=document.createElement("canvas"),u=o.getContext("2d"),s=window.devicePixelRatio||1;o.style.width=r+"px",o.style.height=i+"px",o.setAttribute("width",r*s),o.setAttribute("height",i*s),u.clearRect(0,0,r*s,i*s);var a={position:n.position,rotation:n.rotation,scale:n.scale};n.position=[0,0,0],n.rotation=0,n.scale=[1,1],n&&n.brush(u,!1);var f=e("./shape/Image"),l=new f({id:t,style:{x:0,y:0,image:o}});return a.position!=null&&(l.position=n.position=a.position),a.rotation!=null&&(l.rotation=n.rotation=a.rotation),a.scale!=null&&(l.scale=n.scale=a.scale),l},l.prototype._createShapeToImageProcessor=function(){if(u)return f;var e=this;return function(t,n,r,i){return e._shapeToImage(t,n,r,i,o)}},h.prototype.createBackBuffer=function(){if(u)return;this.domBack=c("back-"+this.id,"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),o!=1&&this.ctxBack.scale(o,o)},h.prototype.resize=function(e,t){this.dom.setAttribute("width",e),this.dom.setAttribute("height",t),this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*o),this.dom.setAttribute("height",t*o),o!=1&&this.ctx.scale(o,o),this.domBack&&(this.domBack.setAttribute("width",e*o),this.domBack.setAttribute("height",e*o),o!=1&&this.ctxBack.scale(o,o))},h.prototype.clear=function(){var e=this.config,t=this.dom,n=this.ctx,r=t.width,i=t.height;if(e){var s=typeof e.clearColor!="undefined"&&!u,a=e.motionBlur&&!u,f=e.lastFrameAlpha;typeof f=="undefined"&&(f=.7),a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/o,i/o)),s?(n.save(),n.fillStyle=this.config.clearColor,n.fillRect(0,0,r*o,i*o),n.restore()):n.clearRect(0,0,r*o,i*o);if(a){var l=this.domBack;n.save(),n.globalAlpha=f,n.drawImage(l,0,0,r/o,i/o),n.restore()}}else n.clearRect(0,0,r,i)},l}),define("zrender/shape/Group",["require","../tool/guid","../tool/util","../tool/event","./mixin/Transformable"],function(e){function s(e){e=e||{},this.id=e.id||t();for(var n in e)this[n]=e[n];this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,i.call(this),r.call(this)}var t=e("../tool/guid"),n=e("../tool/util"),r=e("../tool/event").Dispatcher,i=e("./mixin/Transformable");return s.prototype.ignore=!1,s.prototype.children=function(){return this._children.slice()},s.prototype.childAt=function(e){return this._children[e]},s.prototype.addChild=function(e){if(e==this)return;if(e.parent==this)return;e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof s&&e.addChildrenToStorage(this._storage))},s.prototype.removeChild=function(e){var t=n.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,e._storage&&(this._storage.delFromMap(e.id),e instanceof s&&e.delChildrenFromStorage(e._storage))},s.prototype.each=function(e,t){var n=!!t;for(var r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i)}},s.prototype.iterate=function(e,t){var n=!!t;for(var r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i),i.type==="group"&&i.iterate(e,t)}},s.prototype.addChildrenToStorage=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToMap(n),n.type==="group"&&n.addChildrenToStorage(e)}},s.prototype.delChildrenFromStorage=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromMap(n),n.type==="group"&&n.delChildrenFromStorage(e)}},n.merge(s.prototype,i.prototype,!0),n.merge(s.prototype,r.prototype,!0),s}),define("zrender/Storage",["require","./tool/util","./shape/Group"],function(e){function i(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}function s(){this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0}var t=e("./tool/util"),n=e("./shape/Group"),r={hover:!1,normal:"down",update:!1};return s.prototype.iterShape=function(e,t){t||(t=r);if(t.hover)for(var n=0,i=this._hoverElements.length;n<i;n++){var s=this._hoverElements[n];s.updateTransform();if(e(s))return this}t.update&&this.updateShapeList();switch(t.normal){case"down":var i=this._shapeList.length;while(i--)if(e(this._shapeList[i]))return this;break;default:for(var n=0,i=this._shapeList.length;n<i;n++)if(e(this._shapeList[n]))return this}return this},s.prototype.getHoverShapes=function(e){if(e)for(var t=0,n=this._hoverElements.length;t<n;t++)this._hoverElements[t].updateTransform();return this._hoverElements},s.prototype.getShapeList=function(e){return e&&this.updateShapeList(),this._shapeList},s.prototype.updateShapeList=function(){this._shapeListOffset=0;for(var e=0,t=this._roots.length;e<t;e++){var n=this._roots[e];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var e=0,t=this._shapeList.length;e<t;e++)this._shapeList[e].__renderidx=e;this._shapeList.sort(i)},s.prototype._updateAndAddShape=function(e){if(e.ignore)return;e.updateTransform();if(e.type=="group"){if(e.clipShape){e.clipShape.parent=e,e.clipShape.updateTransform();var t=e._children[0];t&&(t.__startClip=e.clipShape)}for(var n=0;n<e._children.length;n++){var r=e._children[n];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r)}if(e.clipShape){var i=this._shapeList[this._shapeListOffset-1];i&&(i.__stopClip=!0)}e.__dirty=!1}else this._shapeList[this._shapeListOffset++]=e},s.prototype.mod=function(e,r){var i=this._elements[e];if(i){i instanceof n||(i.style.__rect=null),i.__dirty=!0;if(r)if(r.parent||r._storage||r.__startClip){var s={};for(var o in r){if(o=="parent"||o=="_storage"||o=="__startClip")continue;r.hasOwnProperty(o)&&(s[o]=r[o])}t.merge(i,s,!0)}else t.merge(i,r,!0)}return this},s.prototype.drift=function(e,t,n){var r=this._elements[e];return r&&(r.needTransform=!0,(!r.ondrift||r.ondrift&&!r.ondrift(t,n))&&r.drift(t,n)),this},s.prototype.addHover=function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this},s.prototype.delHover=function(){return this._hoverElements=[],this},s.prototype.hasHoverShape=function(){return this._hoverElements.length>0},s.prototype.addRoot=function(e){e instanceof n&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)},s.prototype.delRoot=function(e){if(typeof e=="undefined"){for(var r=0;r<this._roots.length;r++){var i=this._roots[r];i instanceof n&&i.delChildrenFromStorage(this)}this._elements={},this._hoverElements=[],this._roots=[];return}if(e instanceof Array){for(var r=0,s=e.length;r<s;r++)this.delRoot(e[r]);return}var o;typeof e=="string"?o=this._elements[e]:o=e;var u=t.indexOf(this._roots,o);u>=0&&(this.delFromMap(o.id),this._roots.splice(u,1),o instanceof n&&o.delChildrenFromStorage(this))},s.prototype.addToMap=function(e){return e instanceof n?e._storage=this:e.style.__rect=null,this._elements[e.id]=e,this},s.prototype.get=function(e){return this._elements[e]},s.prototype.delFromMap=function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof n&&(t._storage=null)),this},s.prototype.dispose=function(){this._elements=this._renderList=this._roots=this._hoverElements=null},s}),define("zrender/animation/easing",[],function(){var e={Linear:function(e){return e},QuadraticIn:function(e){return e*e},QuadraticOut:function(e){return e*(2-e)},QuadraticInOut:function(e){return(e*=2)<1?.5*e*e:-0.5*(--e*(e-2)-1)},CubicIn:function(e){return e*e*e},CubicOut:function(e){return--e*e*e+1},CubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},QuarticIn:function(e){return e*e*e*e},QuarticOut:function(e){return 1- --e*e*e*e},QuarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},QuinticIn:function(e){return e*e*e*e*e},QuinticOut:function(e){return--e*e*e*e*e+1},QuinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},SinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},SinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},SinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},ExponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},ExponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},ExponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},CircularIn:function(e){return 1-Math.sqrt(1-e*e)},CircularOut:function(e){return Math.sqrt(1- --e*e)},CircularInOut:function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},ElasticIn:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)))},ElasticOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/r)+1)},ElasticInOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)*.5+1)},BackIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},BackOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},BackInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)},BounceIn:function(t){return 1-e.BounceOut(1-t)},BounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},BounceInOut:function(t){return t<.5?e.BounceIn(t*2)*.5:e.BounceOut(t*2-1)*.5+.5}};return e}),define("zrender/animation/Clip",["require","./easing"],function(e){function n(e){this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+this._life*1e3,this.loop=typeof e.loop=="undefined"?!1:e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart}var t=e("./easing");return n.prototype={step:function(e){var n=(e-this._startTime)/this._life;if(n<0)return;n=Math.min(n,1);var r=typeof this.easing=="string"?t[this.easing]:this.easing,i=typeof r=="function"?r(n):n;return this.fire("frame",i),n==1?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null},restart:function(){var e=(new Date).getTime(),t=(e-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap},fire:function(e,t){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+e]&&this["on"+e](this._targetPool[n],t)},constructor:n},n}),define("zrender/animation/Animation",["require","./Clip","../tool/color","../tool/util","../tool/event"],function(e){function u(e){e=e||{},this.stage=e.stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._time=0,i.call(this)}function a(e,t){return e[t]}function f(e,t,n){e[t]=n}function l(e,t,n){return(t-e)*n+e}function c(e,t,n,r,i){var s=e.length;if(i==1)for(var o=0;o<s;o++)r[o]=l(e[o],t[o],n);else{var u=e[0].length;for(var o=0;o<s;o++)for(var a=0;a<u;a++)r[o][a]=l(e[o][a],t[o][a],n)}}function h(e){switch(typeof e){case"undefined":case"string":return!1}return typeof e.length!="undefined"}function p(e,t,n,r,i,s,o,u,a){var f=e.length;if(a==1)for(var l=0;l<f;l++)u[l]=d(e[l],t[l],n[l],r[l],i,s,o);else{var c=e[0].length;for(var l=0;l<f;l++)for(var h=0;h<c;h++)u[l][h]=d(e[l][h],t[l][h],n[l][h],r[l][h],i,s,o)}}function d(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t}function v(e){if(h(e)){var t=e.length;if(h(e[0])){var n=[];for(var r=0;r<t;r++)n.push(o.call(e[r]));return n}return o.call(e)}return e}function m(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function g(e,t,n,r){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||a,this._setter=r||f,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}var t=e("./Clip"),n=e("../tool/color"),r=e("../tool/util"),i=e("../tool/event").Dispatcher,s=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},o=Array.prototype.slice;return u.prototype={add:function(e){this._clips.push(e)},remove:function(e){var t=r.indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)},update:function(){var e=(new Date).getTime(),t=e-this._time,n=this._clips,r=n.length,i=[],s=[];for(var o=0;o<r;o++){var u=n[o],a=u.step(e);a&&(i.push(a),s.push(u))}this.stage.update&&this.stage.update();for(var o=0;o<r;)n[o]._needsRemove?(n[o]=n[r-1],n.pop(),r--):o++;r=i.length;for(var o=0;o<r;o++)s[o].fire(i[o]);this._time=e,this.onframe(t),this.dispatch("frame",t)},start:function(){function t(){e._running&&(e.update(),s(t))}var e=this;this._running=!0,this._time=(new Date).getTime(),s(t)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(e,t){t=t||{};var n=new g(e,t.loop,t.getter,t.setter);return n.animation=this,n},constructor:u},r.merge(u.prototype,i.prototype,!0),g.prototype={when:function(e,t){for(var n in t)this._tracks[n]||(this._tracks[n]=[],e!==0&&this._tracks[n].push({time:0,value:v(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(e,10),value:t[n]});return this},during:function(e){return this._onframeList.push(e),this},start:function(e){var r=this,i=this._setter,s=this._getter,o=r._onframeList.length,u=e==="spline",a=function(){r._clipCount--;if(r._clipCount===0){r._tracks={};var e=r._doneList.length;for(var t=0;t<e;t++)r._doneList[t].call(r)}},f=function(f,v){var g=f.length;if(!g)return;var y=f[0].value,b=h(y),w=!1,E=b&&h(y[0])?2:1;f.sort(function(e,t){return e.time-t.time});var S;if(!g)return;S=f[g-1].time;var x=[],T=[];for(var N=0;N<g;N++){x.push(f[N].time/S);var C=f[N].value;typeof C=="string"&&(C=n.toArray(C),C.length===0&&(C[0]=C[1]=C[2]=0,C[3]=1),w=!0),T.push(C)}var k=0,L=0,A,N,O,M,_,D,P;if(w)var H=[0,0,0,0];var B=function(e,t){if(t<L){A=Math.min(k+1,g-1);for(N=A;N>=0;N--)if(x[N]<=t)break;N=Math.min(N,g-2)}else{for(N=k;N<g;N++)if(x[N]>t)break;N=Math.min(N-1,g-2)}k=N,L=t;var n=x[N+1]-x[N];if(n===0)return;O=(t-x[N])/n;if(u){_=T[N],M=T[N===0?N:N-1],D=T[N>g-2?g-1:N+1],P=T[N>g-3?g-1:N+2];if(b)p(M,_,D,P,O,O*O,O*O*O,s(e,v),E);else{var a;w?(a=p(M,_,D,P,O,O*O,O*O*O,H,1),a=m(H)):a=d(M,_,D,P,O,O*O,O*O*O),i(e,v,a)}}else if(b)c(T[N],T[N+1],O,s(e,v),E);else{var a;w?(c(T[N],T[N+1],O,H,1),a=m(H)):a=l(T[N],T[N+1],O),i(e,v,a)}for(N=0;N<o;N++)r._onframeList[N](e,t)},j=new t({target:r._target,life:S,loop:r._loop,delay:r._delay,onframe:B,ondestroy:a});e&&e!=="spline"&&(j.easing=e),r._clipList.push(j),r._clipCount++,r.animation.add(j)};for(var v in this._tracks)f(this._tracks[v],v);return this},stop:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]},delay:function(e){return this._delay=e,this},done:function(e){return this._doneList.push(e),this}},u}),define("zrender/zrender",["require","./lib/excanvas","./tool/util","./tool/log","./tool/guid","./Handler","./Painter","./Storage","./animation/Animation","./tool/env"],function(e){function l(e){return function(){var t=e.animatingShapes;for(var n=0,r=t.length;n<r;n++)e.storage.mod(t[n].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}function c(t,n){this.id=t,this.env=e("./tool/env"),this.storage=new o,this.painter=new s(n,this.storage),this.handler=new i(n,this.storage,this.painter),this.animatingShapes=[],this.animation=new u({stage:{update:l(this)}}),this.animation.start(),this._needsRefreshNextFrame=!1}e("./lib/excanvas");var t=e("./tool/util"),n=e("./tool/log"),r=e("./tool/guid"),i=e("./Handler"),s=e("./Painter"),o=e("./Storage"),u=e("./animation/Animation"),a={},f={};return f.version="2.0.1",f.init=function(e,t){var n=new c(r(),e,t||{});return a[n.id]=n,n},f.dispose=function(e){if(e)e.dispose();else{for(var t in a)a[t].dispose();a={}}return f},f.getInstance=function(e){return a[e]},f.delInstance=function(e){return delete a[e],f},c.prototype.getId=function(){return this.id},c.prototype.addShape=function(e){return this.storage.addRoot(e),this},c.prototype.addGroup=function(e){return this.storage.addRoot(e),this},c.prototype.delShape=function(e){return this.storage.delRoot(e),this},c.prototype.delGroup=function(e){return this.storage.delRoot(e),this},c.prototype.modShape=function(e,t){return this.storage.mod(e,t),this},c.prototype.modGroup=function(e,t){return this.storage.mod(e,t),this},c.prototype.modLayer=function(e,t){return this.painter.modLayer(e,t),this},c.prototype.addHoverShape=function(e){return this.storage.addHover(e),this},c.prototype.render=function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this},c.prototype.refresh=function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this},c.prototype.refreshNextFrame=function(){return this._needsRefreshNextFrame=!0,this},c.prototype.refreshHover=function(e){return this.painter.refreshHover(e),this},c.prototype.update=function(e,t){return this.painter.update(e,t),this},c.prototype.resize=function(){return this.painter.resize(),this},c.prototype.animate=function(e,r,i){var s=this.storage.get(e);if(s){var o;if(r){var u=r.split("."),a=s;for(var f=0,l=u.length;f<l;f++){if(!a)continue;a=a[u[f]]}a&&(o=a)}else o=s;if(!o){n('Property "'+r+'" is not existed in shape '+e);return}var c=this.animatingShapes;return typeof s.__aniCount=="undefined"&&(s.__aniCount=0),s.__aniCount===0&&c.push(s),s.__aniCount++,this.animation.animate(o,{loop:i}).done(function(){s.__aniCount--;if(s.__aniCount===0){var e=t.indexOf(c,s);c.splice(e,1)}})}n('Shape "'+e+'" not existed')},c.prototype.clearAnimation=function(){this.animation.clear()},c.prototype.showLoading=function(e){return this.painter.showLoading(e),this},c.prototype.hideLoading=function(){return this.painter.hideLoading(),this},c.prototype.getWidth=function(){return this.painter.getWidth()},c.prototype.getHeight=function(){return this.painter.getHeight()},c.prototype.toDataURL=function(e,t,n){return this.painter.toDataURL(e,t,n)},c.prototype.shapeToImage=function(e,t,n){var i=r();return this.painter.shapeToImage(i,e,t,n)},c.prototype.on=function(e,t){return this.handler.on(e,t),this},c.prototype.un=function(e,t){return this.handler.un(e,t),this},c.prototype.trigger=function(e,t){return this.handler.trigger(e,t),this},c.prototype.clear=function(){return this.storage.delRoot(),this.painter.clear(),this},c.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.animatingShapes=this.storage=this.painter=this.handler=null,f.delInstance(this.id)},f}),define("zrender",["zrender/zrender"],function(e){return e}),define("js/Graph",["require"],function(e){var t=function(){this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}};return t.prototype.addNode=function(e,n){if(this._nodesMap[e])return this._nodesMap[e];var r=new t.Node(e);for(var i in n){if(i=="name"||i=="edges")continue;n.hasOwnProperty(i)&&(r[i]=n[i])}return this.nodes.push(r),this._nodesMap[e]=r,r},t.prototype.getNodeByName=function(e){return this._nodesMap[e]},t.prototype.addEdge=function(e,n,r){typeof e=="string"&&(e=this._nodesMap[e]),typeof n=="string"&&(n=this._nodesMap[n]);if(!e||!n)return;var i=e.name+"-"+n.name;if(this._edgesMap[i])return this._edgesMap[i];var s=new t.Edge(e,n);for(var i in r){if(i=="source"||i=="target")continue;r.hasOwnProperty(i)&&(s[i]=r[i])}return e.edges.push(s),n.edges.push(s),this.edges.push(s),this._edgesMap[i]=s,s},t.prototype.filter=function(e,n,r,i){function u(e,t,o){if(o>=n)return;var a=e.edges;for(var f=0;f<a.length;f++){var l=a[f],c=o==0?r:i;if(l.weight<c)continue;if(l.source===e){var h=s.addNode(l.target.name);s.addEdge(t,h,l.weight),u(l.target,h,o+1)}else{var p=s.addNode(l.source.name);s.addEdge(p,t,l.weight),u(l.source,p,o+1)}}}var s=new t;if(!e||!this._nodesMap[e])return s;typeof r=="undefined"&&(r=0),typeof i=="undefined"&&(i=r);var o=this._nodesMap[e];u(o,s.addNode(o.name),0);for(var a=0;a<s.nodes.length;a++){var f=s.nodes[a];for(var l=0;l<s.nodes.length;l++){var c=s.nodes[l],h=f.name+"-"+c.name,p=this._edgesMap[h];if(p){var d=f.name==e||c.name==e?r:i;if(p.weight<d)continue;s.addEdge(f,c,p.weight)}else{h=c.name+"-"+f.name,p=this._edgesMap[h];if(p){var d=f.name==e||c.name==e?r:i;if(p.weight<d)continue;s.addEdge(c,f,p.weight)}}}}return s},t.prototype.removeEdge=function(e){var t=source.name+"-"+target.name;e.source.edges.splice(e.source.edges.indexOf(e),1),e.target.edges.splice(e.target.edges.indexOf(e),1),delete this._edgesMap[e],this.edges.splice(this.edges.indexOf(e),1)},t.prototype.removeNode=function(e){var t=e.name;delete this._nodesMap[t],this.nodes.splice(this.nodes.indexOf(e),1);for(var n=0;n<this.edges.length;){var r=this.edges[n];r.source==e||r.target==e?this.removeEdge(r):n++}},t.Node=function(e){this.name=e,this.edges=[]},t.prototype.degree=function(){return this.edges.length},t.Edge=function(e,t){this.source=e,this.target=t},t}),define("zrender/shape/Circle",["require","./Base","../tool/util"],function(e){function n(e){t.call(this,e)}var t=e("./Base");return n.prototype={type:"circle",buildPath:function(e,t){e.arc(t.x,t.y,t.r,0,Math.PI*2,!0);return},getRect:function(e){if(e.__rect)return e.__rect;var t;return e.brushType=="stroke"||e.brushType=="fill"?t=e.lineWidth||1:t=0,e.__rect={x:Math.round(e.x-e.r-t/2),y:Math.round(e.y-e.r-t/2),width:e.r*2+t,height:e.r*2+t},e.__rect}},e("../tool/util").inherits(n,t),n}),define("js/NodeEntity",["require","qtek/core/Base","zrender/shape/Group","zrender/shape/Rectangle","zrender/shape/Circle","zrender/shape/Text","zrender/shape/Image"],function(e){function u(e){e=e||{};for(var t in e)this[t]=e[t]}var t=e("qtek/core/Base"),n=e("zrender/shape/Group"),r=e("zrender/shape/Rectangle"),i=e("zrender/shape/Circle"),s=e("zrender/shape/Text"),o=e("zrender/shape/Image");u.prototype.x=0,u.prototype.y=0,u.prototype.r=50;var a=new Image;a.src="imgs/text-node-bg.png";var f=document.createElement("canvas").getContext("2d"),l=t.derive({group:null,visible:!0,alpha:1,lineWidth:5,color:"#3791dc",labelColor:"rgba(55, 145, 220, 0.5)",highlightColor:"#8c72d4",highlightLabelColor:"rgba(140, 114, 212, 0.5)",label:"",image:"",radius:60,level:0,_depth:0,_labelShape:null,_outlineShape:null,_imageShape:null,_shadowShape:null,_glowShape:null,_clipShape:null,_labelHeight:25},function(){this.group=new n,this.shapeList=[];var e=this,t=new i({style:new u({strokeColor:this.color,brushType:"stroke"}),highlightStyle:{opacity:0},z:2,zlevel:this.level,clickable:!0,onclick:function(){e.trigger("click")},onmouseover:function(){e.trigger("mouseover")},onmouseout:function(){e.trigger("mouseout")}}),s=new i({style:new u({strokeColor:this.highlightColor,brushType:"stroke",opacity:.3}),highlightStyle:{opacity:0},z:1.5,ignore:!0,zlevel:this.level,hoverable:!1}),l=new i({style:new u({brushType:"stroke",shadowColor:"black",shadowBlur:15,shadowOffsetX:0,shadowOffsetY:0}),z:.9,zlevel:this.level,hoverable:!1});this.group.addChild(l),this.group.addChild(t),this.group.addChild(s);var c=new n,h=new i({style:new u({r:this.radius})});c.clipShape=h;var p=new o({style:{image:this.image||a},hoverable:!1,z:1,zlevel:this.level});if(this.label){var d=!1,v=f.measureText(this.label.split("\n")[0]).width;if(v>this.radius&&this.image){var m=this.label.length,g=Math.round(m/1.4);this.label=this.label.substr(0,g)+"\n"+this.label.substr(g),this._labelHeight=40,d=!0}var y=new r({style:{color:this.labelColor,brushType:"fill",text:this.label,textPosition:"inside",textAlign:"center",brushType:"both",textColor:"white",textFont:this.radius>50?"14px 微软雅黑":"12px 微软雅黑"},hoverable:!1,z:1,zlevel:this.level});this.image||(y.style.color="rgba(0, 0, 0, 0)",y.style.textFont="20px 微软雅黑")}c.addChild(p),y&&c.addChild(y),this.group.addChild(c),this._imageShape=p,this._labelShape=y,this._outlineShape=t,this._clipShape=h,this._shadowShape=l,this._glowShape=s,this.shapeList.push(this._imageShape),this._labelShape&&this.shapeList.push(this._labelShape),this.shapeList.push(this._outlineShape)},{update:function(e){var t=Math.min(e.getWidth()/1280,e.getHeight()/800),n=t*this.radius;this._outlineShape.style.r=n,this._outlineShape.style.lineWidth=n/50*this.lineWidth,this._glowShape.style.lineWidth=this._outlineShape.style.lineWidth*2,this._glowShape.style.r=n+this._outlineShape.style.lineWidth,this._shadowShape.style.r=this._outlineShape.style.r,this._shadowShape.style.lineWidth=this._outlineShape.style.lineWidth,this._imageShape.style.x=-n,this._imageShape.style.y=-n,this._imageShape.style.width=n*2,this._imageShape.style.height=n*2,this._clipShape.style.r=n,this._labelShape&&(this.image?(this._labelShape.style.x=-n,this._labelShape.style.y=n-this._labelHeight,this._labelShape.style.width=n*2,this._labelShape.style.height=this._labelHeight):(this._labelShape.style.x=-n,this._labelShape.style.y=-n,this._labelShape.style.width=n*2,this._labelShape.style.height=n*2)),e.modGroup(this.group.id)},getBoundingRadius:function(){return this._outlineShape.style.r+this._outlineShape.style.lineWidth/2},highlight:function(e){this._outlineShape.style.strokeColor=this.highlightColor,this._glowShape.ignore=!1,this.image&&this._labelShape&&(this._labelShape.style.color=this.highlightLabelColor),this._outlineShape.style.z=12,this._glowShape.style.z=11.5,this._imageShape.style.z=11,this._labelShape&&(this._labelShape.style.z=11),this._shadowShape.style.z=10.9,e.modGroup(this.group)},leaveHighlight:function(e){this._outlineShape.style.strokeColor=this.color,this._glowShape.ignore=!0,this.image&&this._labelShape&&(this._labelShape.style.color=this.labelColor),this._outlineShape.style.z=2,this._glowShape.style.z=1.5,this._imageShape.style.z=1,this._labelShape&&(this._labelShape.style.z=1),this._shadowShape.style.z=.9,e.modGroup(this.group)}});return l}),define("zrender/shape/util/dashedLineTo",[],function(){var e=[5,5];return function(t,n,r,i,s,o){if(t.setLineDash){e[0]=e[1]=o,t.setLineDash(e),t.moveTo(n,r),t.lineTo(i,s);return}o=typeof o!="number"?5:o;var u=i-n,a=s-r,f=Math.floor(Math.sqrt(u*u+a*a)/o);u/=f,a/=f;var l=!0;for(var c=0;c<f;++c)l?t.moveTo(n,r):t.lineTo(n,r),l=!l,n+=u,r+=a;t.lineTo(i,s)}}),define("zrender/shape/Line",["require","./Base","./util/dashedLineTo","../tool/util"],function(e){function r(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)}var t=e("./Base"),n=e("./util/dashedLineTo");return r.prototype={type:"line",buildPath:function(e,t){if(!t.lineType||t.lineType=="solid")e.moveTo(t.xStart,t.yStart),e.lineTo(t.xEnd,t.yEnd);else if(t.lineType=="dashed"||t.lineType=="dotted"){var r=(t.lineWidth||1)*(t.lineType=="dashed"?5:1);n(e,t.xStart,t.yStart,t.xEnd,t.yEnd,r)}},getRect:function(e){if(e.__rect)return e.__rect;var t=e.lineWidth||1;return e.__rect={x:Math.min(e.xStart,e.xEnd)-t,y:Math.min(e.yStart,e.yEnd)-t,width:Math.abs(e.xStart-e.xEnd)+t,height:Math.abs(e.yStart-e.yEnd)+t},e.__rect}},e("../tool/util").inherits(r,t),r}),define("js/EdgeEntity",["require","qtek/core/Base","zrender/shape/Rectangle","zrender/shape/Line","glmatrix"],function(e){var t=e("qtek/core/Base"),n=e("zrender/shape/Rectangle"),r=e("zrender/shape/Line"),i=e("glmatrix"),s=i.vec2,o=document.createElement("canvas"),u=o.getContext("2d"),a=s.create(),f=s.create(),l=s.create(),c=t.derive({source:null,target:null,label:"",level:0,color:"#3791dc",highlightColor:"#8c72d4"},function(){var e=this,t=function(){e.trigger("click")};this.lineShape=new r({style:{lineWidth:1,strokeColor:this.color,xStart:0,yStart:0,xEnd:0,yEnd:0,opacity:.4},highlightStyle:{opacity:0},zlevel:this.level,z:.1,clickable:!0,onclick:t});if(this.label){var i=u.measureText(this.label).width+20;this.labelShape=new n({style:{width:i,height:20,text:this.label,textPosition:"inside",textAlign:"center",textFont:"14px 微软雅黑",color:this.color,brushType:"fill",x:-i/2,y:-20,radius:5},highlightStyle:{opacity:0},ignore:!0,zlevel:this.level,z:.5,clickable:!0,onclick:t})}},{update:function(e){var t=this.lineShape,n=this.source,r=this.target,i=n.group.position,o=r.group.position;s.sub(a,i,o),s.normalize(a,a),s.scaleAndAdd(f,i,a,-n.getBoundingRadius()),s.scaleAndAdd(l,o,a,r.getBoundingRadius()),t.style.xStart=f[0],t.style.yStart=f[1],t.style.xEnd=l[0],t.style.yEnd=l[1],t.ignore=n.ignore||r.ignore,e.modShape(t.id);if(this.labelShape){var u=this.labelShape;a[0]>0&&s.negate(a,a);if(a[1]<0)var c=2*Math.PI-Math.acos(-a[0]);else var c=Math.acos(-a[0]);u.rotation[0]=c,u.position[0]=(f[0]+l[0])/2,u.position[1]=(f[1]+l[1])/2,u.style.opacity=1,e.modShape(u.id);var h=s.distance(f,l);h>50?(this.labelShape.style.textFont="14px 微软雅黑",this.labelShape.scale[0]=this.labelShape.scale[1]=1):(this.labelShape.style.textFont="12px 微软雅黑",this.labelShape.scale[0]=this.labelShape.scale[1]=h/50)}},highlight:function(e){this.lineShape.style.lineWidth=3,this.lineShape.style.strokeColor=this.highlightColor,this.lineShape.style.opacity=1,this.lineShape.style.z=10.1,e.modShape(this.lineShape.id),this.labelShape&&(this.labelShape.ignore=!1,this.labelShape.style.color=this.highlightColor,this.labelShape.style.z=10.5,e.modShape(this.labelShape.id))},leaveHighlight:function(e){this.lineShape.style.lineWidth=1,this.lineShape.style.strokeColor=this.color,this.lineShape.style.opacity=.4,this.lineShape.style.z=.1,e.modShape(this.lineShape.id),this.labelShape&&(this.labelShape.ignore=!0,this.labelShape.style.color=this.color,this.labelShape.style.z=.5,e.modShape(this.labelShape.id))}});return c}),function e(t){if(typeof window=="undefined"||window!==t){self.tmd={},self.tmd.modules={},self.tmd.require=function(e){return self.tmd.modules[e]},self.define=function(e,t,n){if(arguments.length===0)return;arguments.length==1?(n=e,e="ForceLayout"):arguments.length==2&&(n=t),e.indexOf("ForceLayout")>=0&&(e="ForceLayout"),self.tmd.modules[e]=n(self.tmd.require)},define("zrender/tool/vector",["require"],function(e){return{create:function(e,t){var n=new Float32Array(2);return n[0]=e||0,n[1]=t||0,n},dist:function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},len:function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},normalize:function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,n){return e[0]=t,e[1]=n,e}}});var n=null;self.onmessage=function(e){if(e.data instanceof ArrayBuffer){if(!n)return;var t=new Float32Array(e.data),r=(t.length-1)/2;for(var i=0;i<r;i++){var s=n.nodes[i];s.position[0]=t[i*2+1],s.position[1]=t[i*2+2]}return}var o=self.tmd.modules.ForceLayout;switch(e.data.cmd){case"init":n||(n=new o),n.initNodes(e.data.nodesPosition,e.data.nodesMass,e.data.nodesSize),n.initEdges(e.data.edges,e.data.edgesWeight),n._token=e.data.token;break;case"updateConfig":if(n)for(var u in e.data.config)n[u]=e.data.config[u];break;case"update":var a=e.data.steps;if(n){var r=n.nodes.length,t=new Float32Array(r*2+1);n.temperature=e.data.temperature;if(e.data.temperature>.01){for(var i=0;i<a;i++)n.update(),n.temperature*=e.data.coolDown;for(var i=0;i<r;i++){var s=n.nodes[i];t[i*2+1]=s.position[0],t[i*2+2]=s.position[1]}t[0]=n._token}self.postMessage(t.buffer,[t.buffer])}else{var f=new Float32Array;self.postMessage(f.buffer,[f.buffer])}}}}define("echarts/chart/ForceLayoutWorker",["require","zrender/tool/vector"],function(t){function i(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new r(4),this.size=0}function s(){this.position=n.create(),this.force=n.create(),this.forcePrev=n.create(),this.speed=n.create(),this.speedPrev=n.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function o(e,t){this.source=e,this.target=t,this.weight=1}function u(){this.barnesHutOptimize=!1,this.barnesHutTheta=1.5,this.repulsionByDegree=!1,this.preventOverlap=!1,this.strongGravity=!0,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.center=[0,0],this.width=500,this.height=500,this.maxSpeedIncrease=1,this.nodes=[],this.edges=[],this.bbox=new r(4),this._rootRegion=new i,this._rootRegion.centerOfMass=n.create(),this._massArr=null,this._k=0}var n=t("zrender/tool/vector"),r=typeof Float32Array=="undefined"?Array:Float32Array;return i.prototype.beforeUpdate=function(){for(var e=0;e<this.nSubRegions;e++)this.subRegions[e].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},i.prototype.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var e=0;e<this.nSubRegions;e++)this.subRegions[e].afterUpdate()},i.prototype.addNode=function(e){if(this.nSubRegions===0){if(this.node==null){this.node=e;return}this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(e),this._updateCenterOfMass(e)},i.prototype.findSubRegion=function(e,t){for(var n=0;n<this.nSubRegions;n++){var r=this.subRegions[n];if(r.contain(e,t))return r}},i.prototype.contain=function(e,t){return this.bbox[0]<=e&&this.bbox[2]>=e&&this.bbox[1]<=t&&this.bbox[3]>=t},i.prototype.setBBox=function(e,t,n,r){this.bbox[0]=e,this.bbox[1]=t,this.bbox[2]=n,this.bbox[3]=r,this.size=(n-e+r-t)/2},i.prototype._newSubRegion=function(){var e=this.subRegions[this.nSubRegions];return e||(e=new i,this.subRegions[this.nSubRegions]=e),this.nSubRegions++,e},i.prototype._addNodeToSubRegion=function(e){var t=this.findSubRegion(e.position[0],e.position[1]),n=this.bbox;if(!t){var r=(n[0]+n[2])/2,i=(n[1]+n[3])/2,s=(n[2]-n[0])/2,o=(n[3]-n[1])/2,u=e.position[0]>=r?1:0,a=e.position[1]>=i?1:0,t=this._newSubRegion();t.setBBox(u*s+n[0],a*o+n[1],(u+1)*s+n[0],(a+1)*o+n[1])}t.addNode(e)},i.prototype._updateCenterOfMass=function(e){this.centerOfMass==null&&(this.centerOfMass=n.create());var t=this.centerOfMass[0]*this.mass,r=this.centerOfMass[1]*this.mass;t+=e.position[0]*e.mass,r+=e.position[1]*e.mass,this.mass+=e.mass,this.centerOfMass[0]=t/this.mass,this.centerOfMass[1]=r/this.mass},u.prototype.initNodes=function(e,t,n){this.temperature=1;var r=e.length/2;this.nodes.length=0;var i=typeof n!="undefined";for(var o=0;o<r;o++){var u=new s;u.position[0]=e[o*2],u.position[1]=e[o*2+1],u.mass=t[o],i&&(u.size=n[o]),this.nodes.push(u)}this._massArr=t,i&&(this._sizeArr=n)},u.prototype.initEdges=function(e,t){var n=e.length/2;this.edges.length=0;var r=typeof t!="undefined";for(var i=0;i<n;i++){var s=e[i*2],u=e[i*2+1],a=this.nodes[s],f=this.nodes[u];if(!a||!f)continue;a.outDegree++,f.inDegree++;var l=new o(a,f);r&&(l.weight=t[i]),this.edges.push(l)}},u.prototype.update=function(){var e=this.nodes.length;this.updateBBox(),this._k=.4*this.scaling*Math.sqrt(this.width*this.height/e);if(this.barnesHutOptimize){this._rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this._rootRegion.beforeUpdate();for(var t=0;t<e;t++)this._rootRegion.addNode(this.nodes[t]);this._rootRegion.afterUpdate()}else{var r=0,i=this._rootRegion.centerOfMass;n.set(i,0,0);for(var t=0;t<e;t++){var s=this.nodes[t];r+=s.mass,n.scaleAndAdd(i,i,s.position,s.mass)}n.scale(i,i,1/r)}for(var t=0;t<e;t++){var s=this.nodes[t];n.copy(s.forcePrev,s.force),n.copy(s.speedPrev,s.speed),n.set(s.force,0,0)}for(var t=0;t<e;t++){var o=this.nodes[t];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this._rootRegion,o);else for(var u=t+1;u<e;u++){var a=this.nodes[u];this.applyNodeToNodeRepulsion(o,a,!1)}this.gravity>0&&this.applyNodeGravity(o)}for(var t=0;t<this.edges.length;t++)this.applyEdgeAttraction(this.edges[t]);var f=n.create();for(var t=0;t<e;t++){var s=this.nodes[t],l=s.speed;n.scale(s.force,s.force,1/30);var c=n.len(s.force)+.1,h=Math.min(c,500)/c;n.scale(s.force,s.force,h),n.add(l,l,s.force),n.scale(l,l,this.temperature),n.sub(f,l,s.speedPrev);var p=n.len(f);if(p>0){n.scale(f,f,1/p);var d=n.len(s.speedPrev);d>0&&(p=Math.min(p/d,this.maxSpeedIncrease)*d,n.scaleAndAdd(l,s.speedPrev,f,p))}var v=n.len(l),h=Math.min(v,100)/(v+.1);n.scale(l,l,h),n.add(s.position,s.position,l)}},u.prototype.applyRegionToNodeRepulsion=function(){var e=n.create();return function(r,i){if(r.node)this.applyNodeToNodeRepulsion(r.node,i,!0);else{n.sub(e,i.position,r.centerOfMass);var s=e[0]*e[0]+e[1]*e[1];if(s>this.barnesHutTheta*r.size*r.size){var o=this._k*this._k*(i.mass+r.mass)/(s+1);n.scaleAndAdd(i.force,i.force,e,o*2)}else for(var u=0;u<r.nSubRegions;u++)this.applyRegionToNodeRepulsion(r.subRegions[u],i)}}}(),u.prototype.applyNodeToNodeRepulsion=function(){var e=n.create();return function(r,i,s){if(r==i)return;n.sub(e,r.position,i.position);var o=e[0]*e[0]+e[1]*e[1];if(o===0)return;var u,a=this._k*this._k,f=r.mass+i.mass;if(this.preventOverlap){var l=Math.sqrt(o);l=l-r.size-i.size,l>0?u=a*f/(l*l):l<=0&&(u=a*10*f)}else u=a*f/o;s||n.scaleAndAdd(r.force,r.force,e,u*2),n.scaleAndAdd(i.force,i.force,e,-u*2)}}(),u.prototype.applyEdgeAttraction=function(){var e=n.create();return function(r){var i=r.source,s=r.target;n.sub(e,i.position,s.position);var o=n.len(e),u;this.edgeWeightInfluence===0?u=1:this.edgeWeightInfluence==1?u=r.weight:u=Math.pow(r.weight,this.edgeWeightInfluence);var a;if(this.preventOverlap){o=o-i.size-s.size;if(o<=0)return}var a=-u*o/this._k;n.scaleAndAdd(i.force,i.force,e,a),n.scaleAndAdd(s.force,s.force,e,-a)}}(),u.prototype.applyNodeGravity=function(){var e=n.create();return function(t){n.sub(e,this.center,t.position),this.width>this.height?e[1]*=this.width/this.height:e[0]*=this.height/this.width;var r=n.len(e)/100;this.strongGravity?n.scaleAndAdd(t.force,t.force,e,r*this.gravity*t.mass):n.scaleAndAdd(t.force,t.force,e,this.gravity*t.mass/(r+1))}}(),u.prototype.updateBBox=function(){var e=Infinity,t=Infinity,n=-Infinity,r=-Infinity;for(var i=0;i<this.nodes.length;i++){var s=this.nodes[i].position;e=Math.min(e,s[0]),t=Math.min(t,s[1]),n=Math.max(n,s[0]),r=Math.max(r,s[1])}this.bbox[0]=e,this.bbox[1]=t,this.bbox[2]=n,this.bbox[3]=r},u.getWorkerCode=function(){var t=e.toString();return t.slice(t.indexOf("{")+1,t.lastIndexOf("}"))},u})}(window),define("js/Force",["require","./Graph","echarts/chart/ForceLayoutWorker","glmatrix"],function(e){var t=e("./Graph"),n=e("echarts/chart/ForceLayoutWorker"),r=e("glmatrix"),i=r.vec2,s=typeof Float32Array!="undefined"?Float32Array:Array,o=function(e){this.graph=e||new t,this._layout=new n,this.width=0,this.height=0,this.ratioScaling=1.3,this.steps=100};return o.prototype.init=function(){var e=this.width,t=this.height,n=this.graph,r=new s(n.nodes.length*2),i=new s(n.nodes.length),o=new s(n.nodes.length),u=Infinity,a=-Infinity,f={};for(var l=0;l<n.nodes.length;l++){var c=n.nodes[l];f[c.name]=l;var h=(Math.random()-.5)*500+e/2,p=(Math.random()-.5)*500+t/2;n.nodes[l].position||(n.nodes[l].position=[h,p]),r[l*2]=h,r[l*2+1]=p,i[l]=c.radius,c.radius>a&&(a=c.radius),c.radius<u&&(u=c.radius)}for(var l=0;l<i.length;l++)o[l]=i[l]/a;var d=new s(n.edges.length*2),v=new s(n.edges.length);for(var l=0;l<n.edges.length;l++){var m=n.edges[l];d[l*2]=f[m.source.name],d[l*2+1]=f[m.target.name],v[l]=m.weight||1}this._layout.initNodes(r,o,i),this._layout.initEdges(d,v),this.resize(this.width,this.height),this._layout.scaling=2,this._layout.gravity=.7,this._layout.preventOverlap=!0,this._temperature=1},o.prototype.resize=function(e,t){this.width=e,this.height=t,this._layout.center=[e/2,t/2],e>t?(this._layout.width=e*this.ratioScaling,this._layout.height=t/this.ratioScaling):(this._layout.width=e/this.ratioScaling,this._layout.height=t*this.ratioScaling)},o.prototype.warmUp=function(e){this._temperature=e},o.prototype.isCoolDown=function(){return this._temperature<.02},o.prototype.update=function(){var e=this.graph;for(var t=0;t<this.steps;t++)this._layout.update(),this._layout.temperature=this._temperature,this._temperature*=.99;for(var t=0;t<this._layout.nodes.length;t++)e.nodes[t].fixed?i.copy(this._layout.nodes[t].position,e.nodes[t].position):i.copy(e.nodes[t].position,this._layout.nodes[t].position)},o}),define("js/log",[],function(){return function(e,t,n){var r="http://nsclick.baidu.com/v.gif?pid=201&pj=www",i={fm:e,path:document.location.href,title:t,url:n||"",refer:document.referrer};for(var s in i)i.hasOwnProperty(s)&&(r+="&"+s+"="+encodeURIComponent(i[s]));var o=window["BD_PS_C"+(new Date).getTime()]=new Image;o.src=r}}),define("js/Level",["require","zrender/shape/Group","./NodeEntity","./EdgeEntity","./Force","qtek/core/mixin/notifier","qtek/core/util","./log"],function(e){var t=e("zrender/shape/Group"),n=e("./NodeEntity"),r=e("./EdgeEntity"),i=e("./Force"),s=e("qtek/core/mixin/notifier"),o=e("qtek/core/util"),u=e("./log"),a=function(e,n){this.graph=e,this.zr=n,this.root=new t,this.level=0,this.dom=null,this.disableHover=!1,this.mainNode=null,this.layout=null};return a.prototype.init=function(){var e=this.graph,t=this.zr,s=new i;s.width=window.innerWidth,s.height=window.innerHeight,s.graph=e,s.init(),this.layout=s,o.each(e.nodes,function(e){e.entity=new n({label:typeof e.title!="undefined"?e.title:e.name,image:e.image,level:this.level,radius:e.radius}),e.action&&e.action.indexOf("back")==0&&(e.entity.highlightColor="#3791dc"),e.entity.update(t),e.entity.group.position=e.position,this.root.addChild(e.entity.group),e.entity.on("mouseover",function(){if(this.disableHover)return;this.highlightNode(e)},this),e.entity.on("click",function(){this.trigger("action",e.action,e)},this)},this),o.each(e.edges,function(e){var t=new r({source:e.source.entity,target:e.target.entity,label:e.label,level:this.level});if(e.source.action&&e.source.action.indexOf("back")>=0||e.target.action&&e.target.action.indexOf("back")>=0)t.highlightColor="#3791dc";e.entity=t,this.root.addChild(t.lineShape),t.labelShape&&this.root.addChild(t.labelShape),e.entity.on("click",function(){var t=[e.source.name,e.target.name],n=t.join(" "),r=t.join("|");u("zhishitupuclick","edge/"+r),window.open("http://www.baidu.com/s?wd="+n)})},this),t.addGroup(this.root),this.updateGraphRendering()},a.prototype.startLayouting=function(){this.zr.animation.bind("frame",this.doLayout,this),this.trigger("startlayout")},a.prototype.stopLayouting=function(){this.zr.animation.unbind("frame",this.doLayout),this.trigger("stoplayout")},a.prototype.doLayout=function(){this.layout.update(),this.updateGraphRendering(),this.trigger("layout"),this.layout.isCoolDown()&&this.stopLayouting()},a.prototype.getDom=function(){return this.zr.painter.getLayer(this.level).dom},a.prototype.leaveHighlight=function(){var e=this.graph,t=this.zr;for(var n=0;n<e.nodes.length;n++)e.nodes[n].entity.leaveHighlight(t),e.nodes[n].entity.lineWidth=5,e.nodes[n].entity.update(t);for(var n=0;n<e.edges.length;n++)e.edges[n].entity.leaveHighlight(t);t.refreshNextFrame()},a.prototype.highlightAll=function(){var e=this.graph,t=this.zr;for(var n=0;n<e.nodes.length;n++)e.nodes[n].entity.highlight(t);for(var n=0;n<e.edges.length;n++)e.edges[n].entity.highlight(t);t.refreshNextFrame()},a.prototype.highlightNode=function(e){this.leaveHighlight();var t=this.zr;e.entity.highlight(t),e.entity.lineWidth=8,e.entity.update(t);for(var n=0;n<e.edges.length;n++){var r=e.edges[n];r.entity.highlight(t),r.source==e?r.target.entity.highlight(t):r.source.entity.highlight(t)}t.refreshNextFrame()},a.prototype.updateGraphRendering=function(){for(var e=0;e<this.graph.nodes.length;e++)this.zr.modGroup(this.graph.nodes[e].entity.group.id);for(var e=0;e<this.graph.edges.length;e++)this.graph.edges[e].entity.update(this.zr);this.zr.refreshNextFrame()},a.prototype.resize=function(){var e=this.zr;this.layout.resize(e.getWidth(),e.getHeight()),this.layout.warmUp(.9),this.startLayouting(),this.mainNode&&(this.mainNode.position[0]=e.getWidth()/2,this.mainNode.position[1]=e.getHeight()/2);if(this.graph)for(var t=0;t<this.graph.nodes.length;t++)this.graph.nodes[t].entity.update(e)},o.extend(a.prototype,s),a}),define("data/detail",[],function(){var e="imgs/juzhao/";return{"顾里":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"顾里","性别":"女","性格标签":"冷漠而高贵",href:"http://baike.baidu.com/view/1624913.htm","介绍":"她是很多女孩心中的憧憬，她头戴王冠但倔强而孤独，她像鲜红而高贵的玫瑰在绚丽的光影中傲然独立，她是冰雪般冷漠的女王，但她的灵魂炽热而明亮。"},"剧照":{img:e+"guli/1.jpg,"+e+"guli/2.jpg,"+e+"guli/3.jpg,"+e+"guli/4.jpg,"+e+"guli/5.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/1553147707/180/5696076213/0",title:"----Y-Q",content:"不可否认我们都希望像南湘那样漂亮、拥有林萧得幸运、喜欢唐婉如的追求、想成为顾里的心 。",time:"7月29日 21:06"},{img:"http://tp1.sinaimg.cn/3844264568/180/5701185270/0",title:"顾源LOVE顾里",content:"哭！哭！哭！ 顾里探监顾源时红了眼、让林萧搬出别墅大吵又哭、得知破产得知癌症时崩溃大哭！假装和席城睡了故意激怒顾源分手、癌症晕倒、癌症手术、因为化疗头发掉光！第四部里顾里简直快被虐死了最后还有可能死翘翘了！顾里党里萧党顾氏夫妇党全都要被虐成渣渣了 。",time:"7月29日 18:19"},{img:"http://tp1.sinaimg.cn/5095062836/180/5700526608/0",title:"我是黄诗娜",content:"不论是顾里放下高傲跟林萧道歉，顾源趴在雪地里掏下水道的戒指，真在在乎你的是不会走的无论友情还是爱情。",time:"7月30日 09:08"},{img:"http://tp2.sinaimg.cn/3774204045/180/5701508712/0",title:"里萧官配_Ambermi",content:"我也不知道过了多久，当我慢慢恢复力气，走到顾里身边蹲下来的时候，我看见了顾里的脸。平静的，没有扭曲的，没有眼泪的一张脸。只是嘴唇被牙齿咬破后留下来的一行淡淡的血迹，依然残留在她的嘴角。 她慢慢的把视线转到我的脸上，对我说：“林萧，你会原谅我吗？” 我从来没有看见过这样脆弱的顾里。",time:"7月29日 12:03"},{img:"http://tp1.sinaimg.cn/3801138436/180/5676158958/1",title:"牙碎了一地",content:"事实上 我没有林萧那样的好工作 帅气男朋友 我没有顾里那样的有钱 跟不用学习都能修双学位还能拿到奖学金的脑子 我没有南湘的优秀设计技巧 跟分分钟拿下高富帅的漂亮脸蛋 我也没有像唐宛如一样的 可以给自己住别墅 坐豪车的朋友们 现实就是小时代的反面 所以 别做梦了 该醒了?",time:"7月29日 13:41"}],"作品":[{"无敌珊宝妹":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"无敌珊宝妹",href:"http://baike.baidu.com/view/1702950.htm","主 演":"张栋梁，郭采洁，邱泽","上映时间":"2008年8月24日","导 演":"刘俊杰","介绍":"《无敌珊宝妹》是一部台湾偶像剧，由张栋梁、郭采洁和邱泽领衔主演，讲述一段卖三宝饭的女生和天香楼小开之间的爱情故事。"}},{"一页台北":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"一页台北",href:"http://baike.baidu.com/view/2572093.htm","主 演":"郭采洁，姚淳耀，张孝全","上映时间":"2010-04-02","导 演":"陈骏霖","介绍":"《一页台北》，2010年2月获得了第60届柏林电影节最佳亚洲电影奖。电影描述在书店上班的女孩和每天总是蹲在书店学法文的男孩，一个晚上在台北街头的浪漫奇遇的故事。"}},{"向前走向爱走":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"向前走向爱走",href:"http://baike.baidu.com/view/7058398.htm","主 演":"郭采洁，陈怡蓉，杨佑宁","上映时间":"2012年02月19日","导 演":"于中中","介绍":"《向前走向爱走》（又名追梦妹）由台湾三立电视自制，台湾导演于中中导演，陈慧如，王佩华编剧，陈怡蓉、郭采洁、杨佑宁与杨一展等人主演。该剧是一部以现代女性为议题的偶像剧。"}},{"隐形超人":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"隐形超人",href:"http://baike.baidu.com/view/1329225.htm","发行时间":"2007年12月25日","填词":"小寒","谱曲":"陈品颖","介绍":"渴望往前飞、像漫画中的超人见义勇为、虽然隐形就不怕绿陨石摧毁、仍不够完美、恋爱感觉才是我想体会、飞再远我也无所谓、四季的面孔、夏是热恋秋是天在脸红、观看时间最美丽的感动"}}],"人脉":[{"杨佑宁":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"杨祐宁",href:"http://baike.baidu.com/view/215732.htm","身 高":"180CM","出生日期":"1982年8月30日","代表作品":"《初恋风暴》《十七岁的天空》 ","主要成就":"第41届金马奖最佳新人奖 、入围第41届电视金钟奖最佳男主角","介绍":"杨祐宁，1982年8月30日生于中国台湾，中国台湾男演员。2004年，参演首部电影《十七岁的天空》，获得第41届金马奖最佳新人奖和第5届华语电影传媒大奖“最佳新演员”“最佳男演员”提名 。2006年，凭借《圣棱的星光》获第41届台湾电视金钟奖“戏剧节目最佳男主角奖”提名。2011年，参演首部电视剧《倾世皇妃》 ；同年，参演电视剧《前男友》获第47届台湾电视金钟奖戏剧节目最佳男主角奖提名 。"}},{"陈怡蓉":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"陈怡蓉",href:"http://baike.baidu.com/view/10164.htm","身 高":"160 cm","出生日期":"1979年3月13日","代表作品":"《薰衣草》，《雪地里的星星》","介绍":"陈怡蓉，1979年3月13日出生于台湾省高雄市，中国台湾女演员，毕业于天主教辅仁大学织品服装学系织品设计组。2000年在中国台湾综艺节目《我猜我猜我猜猜猜》中的寻找周杰伦MTV女主角单位甄选活动中被发掘进入娱乐圈，2001年出演偶像剧《薰衣草》受到关注；2003年首次出演中国内地剧《四大名捕斗将军》；2005年主演的武侠剧《天下第一》获得收视冠军，陈怡蓉饰演云罗郡主；2008年主演电视剧《光阴的故事》并凭借该剧入围第四十四届金钟奖戏剧类最佳女主角奖；2011年主演电视剧版《画皮》；2012年编剧作品《狗狗缠》获得中国台湾征选优良电影剧本优良剧本奖；2013年主演的古装言情剧《紫钗奇缘》于8月14日首播。"}},{"郑元畅":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"郑元畅",href:"http://baike.baidu.com/view/6435.htm","身 高":"188cm","出生日期":"1982年6月19日（农历四月廿八）","代表作品":"《蔷薇之恋》《爱情魔戒》","主要成就":"星空卫视花样美男排行榜前10名、娱乐十年最具影响力时尚男艺人","介绍":"郑元畅1982年6月19日出生于台湾省台中市北屯区，中国台湾男演员、模特。2003年，参演青春偶像剧《蔷薇之恋》，饰演韩葵而正式出道。2005年，参演偶像剧《恶作剧之吻》饰演江直树。2009年9月25日发行首张个人音乐EP《畅一首歌》。2012年8月8日，入伍服兵役，为期11月，梯次为陆军2142梯。"}}]},"顾源":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"顾源","性别":"男","性格标签":"英俊而温柔",href:"http://baike.baidu.com/subview/1893274/10360266.htm","介绍":"他是人见人爱的贵少爷，也是穿着白衬衣的曾经少年。他是顾里堕入黑暗前的最后一根稻草，也是她陷入绝望时最坚强的底牌。他是永恒守护的骑士，他的爱情忠诚而无畏。"},"剧照":{img:e+"guyuan/1.jpg,"+e+"guyuan/2.jpg,"+e+"guyuan/3.jpg,"+e+"guyuan/4.jpg,"+e+"guyuan/5.jpg"},"微博热议":[{img:"http://tp2.sinaimg.cn/2102501481/180/5698208962/0",title:"艺霖回来啦",content:"也许每一个女孩都应该先遇到一个抛弃自己爱上别人的简溪才会出现那个真正属于自己的周崇光吧，而无论生活怎样变迁我们每一个人都要像顾里一样勇敢，像顾里那样永远相信无论发生什么都会陪伴在自己身边的顾源。这个世界上一定会有一个爱你的人，他一定会穿越人海，遇见你，爱上你，陪你一生…。",time:"7月1日 13:35"},{img:"http://tp4.sinaimg.cn/2935544351/180/5701647659/0",title:"阮冰睿Rita",content:"我们都会在学生时代，遇到一个顾源，一个简溪，一个席城，一个卫海。有的人像顾里，最开始就遇到了顾源。有的人像林萧，简溪的背叛，得到了最美好的崇光。有的人像南湘，最爱席城却伤痕累累，卫海疗伤过渡，最后有顾准收场。而有的人像唐宛如，无论是暗恋还是明恋，始终没有得到那个自己深爱的人。 ",time:"7月28日 23:52"},{img:"http://tp1.sinaimg.cn/1969847400/180/5701182132/0",title:"LiCpauAzaMinnn",content:"单纯说主观感受，相比韩寒的后会无期，我还是更喜欢顾里顾源那种怎么闹都闹不翻怎么吵都吵不散的执着……什么特吗的面子尊严都抵不过失落崩溃的我看到你依然等在我家门口温暖这寒冬。",time:"7月29日 23:00"},{img:"http://tp2.sinaimg.cn/2691056873/180/5701393890/0",title:"安筱蕊想每天都开开心心",content:"小时代电视版简直zuo死、除了简溪卫海、剩下的我就呵呵了、本来陈意涵多可爱一妹子、活生生拍成了大嘴怪、唐宛如拍成了什么鬼、简直泰山再世、顾源是工地挖煤临时客串的么、好好的陈学冬为毛演一个跑腿的、我真的分分钟安慰自己八百次才看完的一集、导演、我读书少你不要骗我啊。",time:"7月29日 23:00"},{img:"http://tp2.sinaimg.cn/2579590457/180/5701624436/0",title:"吴世勋左肩借我靠",content:"顾源:“你愿意嫁给我吗，放我一辈子守护你！ 崇光:“............ 顾源:“怎么样，有感觉吗？” 崇光:“没有… 顾源:“连你都没感觉，那更别说顾里了！” 崇光:“顾源，如果我要是有感觉，顾里就更没感觉了! ",time:"7月28日15:36"}],"作品":[{"那些年我们一起追的女孩":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"那些年，我们一起追的女孩",href:"http://baike.baidu.com/view/10910307.htm?fromtitle=%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E8%BF%BD%E7%9A%84%E5%A5%B3%E5%AD%A9&fromid=713765&type=search","主 演":"柯震东，陈妍希，敖犬","上映时间":"2012年1月6日","导 演":"九把刀","介绍":"《那些年，我们一起追的女孩》是群星瑞智艺能有限公司和台湾索尼音乐娱乐股份有限公司联合出品的一部青春爱情电影，柴智屏监制，作家九把刀自编自导，陈妍希、柯震东等主演。该片讲述了柯景腾和沈佳宜之间令人唏嘘的爱情故事；该片于2011年6月25日在中国台湾上映，获得了1亿7746万新台币的票房并于2012年1月6日在中国内地上映，获得了7580万人民币的票房且创下了中国台湾电影在中国内地票房的新纪录。该片主创入围第四十八届台湾电影金马奖最佳女主角奖和最佳导演奖等奖项并获得最佳新人奖，此外该片还获得第31届香港电影金像奖最佳两岸华语电影奖。"}},{"这一刻，爱吧":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"这一刻，爱吧2014（终极版）",href:"http://baike.baidu.com/subview/8325034/11164114.htm","主 演":"柯震东","上映时间":"2013年4月12日/2012年4月9日","导 演":"安竹间（2014）","介绍":"2013年，可爱多继续推出《这一刻，爱吧2013》全新版本，再度甜蜜来袭！继去年引发了“爱情象限”全网大讨论后，今年《这一刻，爱吧》再创“爱情时态”全新概念，誓要勇敢爱到底！该片仍由陈柏霖领衔主演，台前幕后沿用原班人马，更有柯震东助力加盟，齐聚了“李大仁”与“柯景腾”两位少女杀手。全新的爱情概念，不变的高品质甜蜜小清新风格，演绎春夏之交的爱情狂潮。2012年，作为全国知名冰淇淋品牌，可爱多推出了青春爱情观点系列微电影《这一刻，爱吧！》整个微电影延续可爱多一贯的“青春爱情”路线，力邀亚洲当红偶像剧小生陈柏霖担任“爱情专家”，首创“爱情象限”理论，演绎当下青年男女的爱情观。"}},{"在一起":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"在一起",href:"http://baike.baidu.com/subview/457268/9479062.htm","主 演":"甄子丹，柯震东，Angelababy","上映时间":"2013年2月12日","导 演":"霍耀良","介绍":"影片《在一起》由霍耀良执导，甄子丹、柯震东、Angelababy、陈妍希领衔主演。该片于2013年2月12日上映。影片讲述了两段简单的爱情故事，两个男人，各自因为不同的原因囚禁在自己的孤独城堡里，然而两个美丽善良的女孩却无意中闯进他们心房。"}},{"有话直说":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"有话直说",href:"http://baike.baidu.com/view/3768121.htm#2","音乐风格":"流行","发行时间":"2011-11-11","曲目数量":"10","介绍":"专辑类型：录音室专辑 唱片公司：sony music 专辑简介：勇于表达爱、勇于追求梦想、勇于挑战一切好玩的事勇于一切的态度近乎蠢坦诚幼稚、坦诚无知、坦诚想爱、想被爱坦诚一切的真心,让人忍不住对他大呼:大笨蛋 柯震东!"}}],"人脉":[{"萧亚轩":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"萧亚轩",href:"http://baike.baidu.com/view/1508.htm","身 高":"162cm","出生日期":"1979年8月24日","代表作品":"最熟悉的陌生人、突然想起你 ","主要成就":"1999年台湾唱片销量王、IFPI认证全球华语最高销量歌手","介绍":"萧亚轩（Elva Hsiao），1979年8月24日出生于台湾桃园县，华语流行女歌手。1999年，萧亚轩发行首张同名专辑以50万销量成为中国台湾地区唱片销量第一名，并获IFPI认证2000年度“全球华语唱片最高销量艺人”奖。2001年荣获国际机构认可的最高荣誉“世界音乐大奖”“全球年度销售最佳华语歌手”。截至至2014年，萧亚轩共发行12张国语专辑，3张精选辑、1张英语专辑及其他音乐单曲作品，代表作品如《最熟悉的陌生人》、《突然想起你》、《吻》、《爱的主打歌》、《一个人的精彩》、《表白》等。2013年，萧亚轩创办的个人潮牌Carry Me于5月10日正式开放全系列商品的线上购买，并于2014年1月11日在台北东区试营运首间Carry Me旗舰店；同年8月1日，萧亚轩正式签约索尼音乐娱乐公司。2014年4月，萧亚轩为好莱坞电影《超凡蜘蛛侠2》献唱中文主题曲《天雷地火》；同年8月22日，将发行第13张音乐专辑《不解释亲吻》 。"}},{"白百合":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"白百合",href:"http://baike.baidu.com/view/1693914.htm?fromtitle=%E7%99%BD%E7%99%BE%E5%90%88&fromid=2124213&type=syn","身 高":"171cm","出生日期":"1984年3月1日","代表作品":"《失恋33天》《分手合约》","主要成就":"第31届大众电影百花奖最佳女主角","介绍":"白百何，1984年3月1日生于山东省青岛市市北区，中国大陆女演员，2006年毕业于中央戏剧学院表演系音乐剧班。2004年主演电视剧《与青春有关的日子》，在剧中扮演角色“乔乔”。2009年主演青春励志剧《我的青春谁做主》。2011年白百何在当代都市家庭剧《家的N次方》中扮演“赵雯”，出演一位拜金腹黑女 。2011年凭借电影《失恋33天》走红，凭借此片分别入围金马奖、华表奖最佳女主角，并于2012年荣获第31届大众电影百花奖最佳女主角奖。2012年再次和滕华涛导演合作，饰演都市职场情感电视剧《浮沉》女主角“乔莉”。同年主演导演刘家成执导的当代都市情感剧《离婚前规则》，白百何饰演女主角“蒋新瑶”。2013年白百何主演的电影《分手合约》和《被偷走的那五年》上映，取得中国内地电影市场2013年前三季度票房过亿的好成绩，被封为中国”小妞电影“代言人，并凭借《被偷走的那五年》入围第十六届上海国际电影节最佳女主角。   同年在电影《私人订制》中担任女主角，饰演角色“小白”。2014年陈可辛监制白百何领衔主演的国内首部整容题材喜剧电影《整容日记》已于4月4日中国上映 。由安乐影业出品白百何领衔主演的3D奇幻巨制《捉妖记》定于2015年春节贺岁档上映。 "}},{"郭书瑶":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"郭书瑶",href:"http://baike.baidu.com/view/2181663.htm","身 高":"155cm","出生日期":"1990年7月18日","代表作品":"爱的抱抱 honey ","介绍":"绰号瑶瑶，是台湾歌手、演员、主持人。原为各大外拍网站之知名外拍模特儿，因姣好的身材而有台湾版星野亚希的封号。随着杀online广告的热播，“杀很大”、“你不要走”、“你不要死”红遍网络，知名度暴涨，是公认的宅男杀手。2013年郭书瑶以“志气”一片拿下第五十届金马奖最佳新演员奖。"}}]},Kitty:{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"Kitty","性别":"女","性格标签":"精致 强悍","介绍":"她有着华丽的外表，精致的妆容，骄傲但不做作，但面对宫洺永远有着最柔软的内心。"},"剧照":{img:e+"kitty/1.jpg,"+e+"kitty/2.jpg,"+e+"kitty/3.jpg,"+e+"kitty/4.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/5104750175/50/5693284313/0",title:" 李千金的零食店店_",content:"锦荣和Kitty～小四的小时代已经不是重点了！重点在他们手里的软趣花束上～重点是锦荣说，他花粉过敏，这个软趣花束真的好贴心！！表示非常喜欢美好精致并且用心(超棒的礼物)帅哥美女配上高大上的软趣花束、简直无法直视！！因为画面太美～??",time:"7月29日21:49"},{img:"http://tp1.sinaimg.cn/1645005104/50/5681548767/0",title:"废话师_",content:"手里两张兑换券明天过期，不想浪费，今天带朋友又去看了小时代，出来我问“烂不烂！” “烂！” “郭碧婷好不好看？郭采洁！喜欢不喜欢！” “不，我就喜欢那个kitty” 凭什么！“因为整部戏只有她一个女性角色没有参与撕逼”",time:"7月19日15:32"},{img:"http://tp4.sinaimg.cn/1675723167/50/5670694546/0",title:"商侃Kiwi",content:"刚才在商场里售货小姐痴痴地看着我说「有没有人说你很像电影小时代里的Kitty啊？」我微笑着摇了摇头……两分钟后我看好了一件牛仔外套于是便痴痴地看着售货小姐说「如果是Kitty来买是不是可以打折啊」……#论节操碎了就再也拼不起来#",time:"2013-10-7 16:06"},{img:"http://tp3.sinaimg.cn/1658704130/50/40059592191/0",title:"米娜",content:"我们永远都在崇拜着那些闪闪发亮的人。 我们永远觉得他们像是神祗一样的存在。 他们用强大而不可抗拒的魅力和力量征服着世界。 比如现在正在打电话的宫洺，比如刚刚离开的Kitty。 但是我们永远不知道，他们用了什么样的代价，去换了闪亮的人生。——《小时代》",time:"2013-6-29 21:01"},{img:"http://tp1.sinaimg.cn/3076140080/50/5698758447/0",title:"盛峤峤峤denstiy_",content:"第一次接触小时代是在初中那时候,那些带英文的牌子我一个都不认识,我印象最深刻的一段话是,深夜里只喝了一杯咖啡就通宵工作的宫洺和kitty,在背后刻苦考双学位的顾里,为了生活拼搏的林萧和南湘,它让我明白了一个人表面有多风光背后就有多努力,从来就没有人的成功是容易的,只有拼命努力才对得起自己",time:"7月25日13:11"}],"作品":[{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"美丽的事","主 演":"倪萍，叶倩云","上映时间":"2008年","导 演":"杨亚洲",href:"http://baike.baidu.com/view/2511979.htm","介绍":"电视剧《美丽的事》是首部深度关注护士情感和生活的电视剧，通过何美丽与三个男人爱而无果的情感纠葛和迫不得已收养的9个孤儿的故事，表现了从文革后期到90年代平民百姓的生活状况和命运辗转，为观众呈现了一部精彩的小城“浮世绘”。"}]},Neil:{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"Neil","性别":"男","性格标签":"活泼搞怪",href:"http://baike.baidu.com/view/1959802.htm","介绍":"他顽劣时髦，带来欢乐，驱赶眼泪，他是让顾里头疼的小祖宗Neil。"},"剧照":{img:e+"neil/1.jpg,"+e+"neil/2.jpg,"+e+"neil/3.jpg,"+e+"neil/4.jpg,"+e+"neil/5.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/1756728003/180/22868943915/0",title:"逆向的相比星11er",content:"本来就是冲着李贤宰去的，电影还没看完我就要咆哮了！！雪中撑伞一幕我的心都要飞到Galaxy去了！！！！！ 郭导大神求改结局求不拆准neil说好不分离好吗TuT！！！“小金毛”“牛头梗！”什么的“他长得好看你舍不得了是吧！”什么的……我出不去了！#顾准neil在一起# cause you're my destiny~Wooowooo~",time:"7月18日 22:55"},{img:"http://tp1.sinaimg.cn/1772785672/180/40060570453/1",title:"cy_Sebastian",content:"Neil简直太好看太可爱太可爱太好看太好看太可爱太可爱太好看←已经丧失形容功能了，他把红酒不小心泼到顾准脸上后那一脸可爱的小表情萌到肝颤~他在电影中的颜值、可爱度还有顾准的基情已足够化解我昨晚陪小侄女看了2小时MV的心塞感。答应我，去舔舔这份安利好吗，太美了...（前五张为戏中形象）",time:"7月18日 15:12"},{img:"http://tp2.sinaimg.cn/3752429121/180/40060022546/0",title:"柚子2青年",content:"#顾准neil在一起##准Neil# 你是我的小金毛，我是你的牛头梗！[哈哈]我已经笑晕在厕所！你们这样真的好吗？[哈哈]厕所的门都打不开啦！@郭敬明 小四啊，《灵魂尽头》你就让他们在一起吧！永远也忘不了这两只喝咖啡的时候，小金毛特无辜的把咖啡洒了牛头梗一脸……[哈哈][心]",time:"7月22日 20:03"},{img:"http://tp3.sinaimg.cn/2796274002/50/40044830462/1",title:"Bags包先生",content:"#包先生的先生特辑#小时代3最令人印象深刻的不是时代姐妹花和双东，而是@李贤宰演的Neil!模糊的小口音，精壮的小身材，可爱的小表情，还有精灵王子的长发，超有魅力。每次高高的顾准一把就把他抓过来，不知抓住多少腐女的心。两人是小时代最吸睛情侣，别人都在雪中打架，他俩也”打架“，打得真火热...",time:"7月23日12:00"},{img:"http://tp3.sinaimg.cn/1642591402/180/5661564380/1",title:"新浪娱乐",content:"【#爱拍#《小时代3》顾准Neil来袭：那画面太基，你敢看吗？[羞嗒嗒]】在#小时代3#中新增的两位长腿欧巴——Neil和顾准绝对是最大亮点，没有之一。两位小鲜肉秀身材、亮完美腹肌，惊艳男色秒杀众生，就连拍摄的大叔都险些hold不住颤抖的相机……零距离拍摄@李贤宰@任言恺Ming >>>http://t.cn/RPLVaOo",time:"7月22日 09:34"}],"作品":[{"Be Mate":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"Be Mate","音乐风格":"摇滚","发行时间":"2009年04月27日 ","曲目数量":"10","介绍":""}},{"闭嘴！花美男乐队":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"闭嘴！花美男乐队",href:"http://baike.baidu.com/view/7400369.htm","主 演":"成俊，金明洙，金民锡","上映时间":"2012年01月30日","导 演":"李坤","介绍":"《闭嘴！花美男乐队》为韩国TvN电视台的月火剧。该剧以Rock-band为主的新剧，所以挑选全新的新人演员来演。这是一部针对女性观众的时尚偶像剧，讲述一群自由奔放且充满活力的年轻人，在友情和爱情以及音乐之间发生的浪漫青春爱情故事。"}},{"职场之神":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"职场之神",href:"http://baike.baidu.com/view/10181180.htm","主 演":"金惠秀，吴智昊，郑有美","上映时间":"2013年04月01日","导 演":"金昌根","介绍":"《职场之神》为韩国KBS自2013年4月1日起播出的月火连续剧，改编自2007年日剧《派遣员的品格》，由《花美男拉面店》尹兰中作家执笔与《我们家的女人们》全昌根导演携手打造，金惠秀、吴智昊、郑有美、李熙俊、全慧彬等人主演，讲述了合同工金小姐，在被派遣的公司展开肩负奋斗的职业生涯故事。"}},{"With Mate":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"With Mate","音乐风格":"摇滚","发行时间":"2010年01月20日 ","曲目数量":"6","介绍":""}}],"人脉":[]},"宫洺":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"宫洺","性别":"男","性格标签":"冷漠 深沉",href:"http://baike.baidu.com/view/1465763.htm","介绍":"他是始终处于这个故事的边缘，但又永远都在这场风暴的中心。他是难以描摹的那抹金属灰度，他是冷漠神秘的商业领袖，也是艺术边缘的吟游诗人。他是万众期待的冰雪王爵,他存在于千万人玲珑的梦境。他本该如刀锋般清冷凛冽，但他却如此柔软而无邪。他是林萧的迷宫，是顾里的憧憬，是崇光的羁绊。"},"剧照":{img:e+"gongluo/1.jpg,"+e+"gongluo/2.jpg,"+e+"gongluo/3.jpg,"+e+"gongluo/4.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/1745252855/50/5699421313/0",title:"橙子伊",content:"宫洺是总裁文男主角，陆烧崇光是少女漫画男主角，顾源是言情小说男主角，顾准和Neil是BL漫画男主角，席城是青春疼痛文学男主角……这总结真是神到位[拜拜]",time:"7月22日22:35"},{img:"http://tp4.sinaimg.cn/3085327787/50/40051937772/0",title:"发现instagram",content:"锦荣，中国台湾男演员兼模特，拥有完美的倒三角身材，略青的胡渣与整齐后梳的发型尽显熟男魅力，但私底下的他非常喜欢搞怪。正在热映的电影《小时代3》中饰演宫洺，一个有着严重洁癖又冷漠英俊的顶头上司，大家有喜欢上这个版本的宫洺吗[酷] ins:copyninja",time:"7月18日20:30"},{img:"http://tp4.sinaimg.cn/1445592647/50/5698561399/0",title:"万小e勇气",content:"#小时代3#在此怀念一下@凤小岳 版宫洺，看前两部之前觉得不够帅、不像，看完之后觉得他就是那个宫洺——“面瘫”之外，可以看到对弟弟的爱与利益的纠结、对林萧的小包容小可爱、完美主义的强迫。到了锦荣的版本，除了依旧面瘫，就只剩帅了。有了对比才知道，原来有一天，仅帅，居然也会是不够用的。",time:"7月17日21:39"},{img:"http://tp3.sinaimg.cn/1765072222/50/5672132789/1",title:"真维斯",content:"#真维斯·小时代#【人物解析】他是活在玻璃房子中的贵族，他万年不变的冰块脸下，封藏着不许悸动的小小温暖。雪夜送来的温暖咖啡，废墟里递过来的骷髅雨伞，为不熟识女孩的才华起身鼓掌。他是真正的王，需要我们膜拜。他就是宫洺。@锦荣VivianDawson",time:"7月11日15:30"},{img:"http://tp3.sinaimg.cn/1188552450/180/40006676792/1",title:"郭敬明",content:"漆黑的鬓角，终会刷上苍白的冰霜；雪夜送来的温暖咖啡，也会冷却为岁月的仓皇；那年废墟里递过来的骷髅雨伞，如今也无法遮挡更密集的箭雨。面目虽改，然而王者不败。宫洺，全面新生，披荆而来。很遗憾小岳的离开，但我想和你们一起期待 @锦荣VivianDawson 的全新演绎！请相信我。【锦荣加盟#小时代3#】",time:"2013-12-5 21:00"}],"作品":[{"宝岛双雄":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"宝岛双雄",href:"http://baike.baidu.com/view/6773785.htm","主 演":"房祖名, 夏雨， 陈汉典","上映时间":"2012年06月09日","导 演":"张训玮","介绍":"《宝岛双雄》由张训玮执导，房祖名、夏雨、邓家佳、陈汉典等两岸三地演员加盟，讲述夏雨饰演的大陆游客和房祖名饰演的小杰在宝岛台湾卷入一场夺宝任务中的故事。"}},{"对不起，我爱你":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"对不起，我爱你",href:"http://baike.baidu.com/subview/55494/11289464.htm","主 演":"锦荣，温心，黄恺杰","上映时间":"2014年1月30日","导 演":"杨子","介绍":"导演杨子执导电影《对不起，我爱你》改编自2004年由苏志燮和林秀晶主演的韩剧《对不起，我爱你》，由锦荣、温心、黄恺杰、王姬等主演。电影讲述的是以武克独白的方式展开，讲述其回国寻亲路上，与温心饰演的恩彩发生的一系列感情纠葛。"}},{"粉红女郎电影":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"粉红女郎电影",href:"http://baike.baidu.com/view/9543683.htm","主 演":"张馨予，刘凡菲，锦荣","上映时间":"2013年8月13日","导 演":"伍宗德","介绍":"《粉红女郎电影》由伍宗德执导，阿雅、张馨予、刘凡菲、黄一琳、范逸臣、锦荣主演的时尚爱情喜剧。影片将于8月暑期档在全国公映。《粉红女郎电影》在上映前先为观众送上餐前“甜品”——百则真人漫画。据伍宗德透露，这些真人漫画完全是用拍摄电影的规格在制作，不但前期要出策划案，而且后期也加入了不少特技、音效，并为每则漫画都单独配上了动画片头。希望通过这些真人漫画，让观众可以感受到剧组所有工作人员的诚意。据悉，《粉红女郎》真人漫画于7月5日开始在网上陆续播出"}},{"玩爱之徒":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"玩爱之徒",href:"http://baike.baidu.com/view/3988905.htm","发行时间":"2010年08月13日","填词":"陈天佑","谱曲":"Gabriel，sezibwa，Rene","介绍":"故事的内容主要描述男生劈腿，花花公子周旋在两个女生中间，令饰演女主角的Jolin伤心难过，但Jolin认为为什么女生被劈腿就该放声大哭，躲起来疗伤呢，因此MV中Jolin尽情展现自己的舞蹈魅力，当作跳舞是一种情绪上的疗伤和纾压方式。"}}],"人脉":[{"蔡依林":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"蔡依林",href:"http://baike.baidu.com/view/3179.htm","身 高":"161cm","出生日期":"1980年9月15日","代表作品":"看我72变、爱情36计","主要成就":"第18届台湾金曲奖最佳国语女歌手、MTV亚洲大奖时尚奖首位华人得主","介绍":"1998年，蔡依林在MTV音乐台举办的“新生卡位战”音乐大夺冠。1999年7月发行第一支个人单曲EP《和世界做邻居》开启了演唱生涯，9月发行首张专辑《Jolin 1019》并正式出道.2002年，蔡依林发表了自己的转型复出之作《骑士精神》，打响了2003年《看我72变》的前奏，专辑《看我72变》推出后获得当年台湾年度销量冠军。"}},{"温心":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"温心",href:"http://baike.baidu.com/view/1612713.htm","身 高":"169cm","出生日期":"1991年5月11日","代表作品":"原谅我，来不及爱你、对不起，我爱你","介绍":"温心，1991年5月11日出生于中国深圳，中国女演员、歌手。2011年7月被美籍华裔导演迟少艾选中，主演其执导的青春爱情电影《原谅我，来不及爱你》出演女一号罗知夏；2012年赴加拿大拍摄电影《对不起，我爱你》饰演女主角恩彩[1] 。2013年在电影《怒放之青春再见》饰演女一号[2] “李爱”；11月参演电视剧《风雷急》，剧中出演女主角温静玉[3] 。同年推出个人首张EP《逆风的蝴蝶》[4] ，EP《未知》2013年底发布[5] 。2014年担当电影《女生宿舍》女主角[6] 2014年参演的电影《不再说分手》。"}},{"夏雨":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"夏雨",href:"http://baike.baidu.com/subview/189416/5409667.htm","身 高":"178cm","出生日期":"1976年10月28日","代表作品":"阳光灿烂的日子、警察有约","主要成就":"威尼斯国际电影节最佳男主角、中国电影金鸡奖最佳男主角","介绍":"夏雨，1976年10月28日生于山东青岛，毕业于中央戏剧学院本科，中国男演员。1994年主演《阳光灿烂的日子》，凭借该片获得了威尼斯国际电影节最佳男演员、新加坡国际电影节最佳男演员、台湾金马奖影帝。1998年主演胡安导演的电影《西洋镜》。2000年与梁咏琪、姜武、陈实主演《我的兄弟姐妹》。2002年主演电影《警察有约》。2003年与姜易宏、江珊主演《电影往事》。2005年与李冰冰、龚蓓苾主演《独自等待》。2008年与闫妮、马苏主演电视剧《北风那个吹》。2013年，与郭富城、桂纶镁、秦海璐主演《圣诞玫瑰》。"}}]},"顾准":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"顾准","性别":"男","性格标签":"冰霜怪客",href:"http://baike.baidu.com/subview/21851/14957082.htm","介绍":"他弥漫暗影气息，带来秘密，收割死亡，他是顾里的亲弟弟顾准。"},"剧照":{img:e+"guzhun/1.jpg,"+e+"guzhun/2.jpg,"+e+"guzhun/3.jpg,"+e+"guzhun/4.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/1757022731/50/5683689143/1",title:"搜狗输入法",content:"如果小时代4里他俩在一起，多少人会成为郭敬明的脑残粉。如果他俩没有在一起，又有多少人会成为郭敬明的一生黑。#顾准neil在一起#顾准：neil，你的肥皂！neil：是你的肥皂！",time:"7月21日15:34"},{img:"http://tp4.sinaimg.cn/1851628791/50/40054566830/1",title:"Instagramtop",content:"任佑明，国际模特，身高186公分，《小时代3》中饰演顾里的弟弟顾准，剧中的他冷气逼人，理智神秘，而私底下的他平时喜欢打电玩和打球，还蛮阳光的一个男生哦！",time:"7月26日16:30"},{img:"http://tp3.sinaimg.cn/2952267414/50/40060968668/0",title:"瓜娃子缺心眼",content:"#小时代3看到林萧用玫瑰花砸顾里我没哭，看到唐宛如为南湘和讨债的人打起来我没哭，看到三姐妹扶着唐宛如我没哭，看到林萧大叫周崇光出来我没哭，但是，我看到顾准给Neil撑伞的时候直接飙泪。。。。我真的正常吗[拜拜][拜拜][拜拜]世界，再见",time:"7月29日21:40"},{img:"http://tp3.sinaimg.cn/1975610130/50/5701322926/1",title:"霸道大锤爱上我",content:"看小时代3的理由。 （4里这对CP要是真的成了分分钟郭小四脑残粉[拜拜] 【顾准简直帅瞎了。",time:"7月20日17:27"},{img:"http://tp4.sinaimg.cn/1806841515/50/5700480881/0",title:"PringlesM",content:"#每日安利#好了我已经突破了耻度下线, 大家都在花痴Neil, 但是顾准简直要死了要死了帅一脸没活路总裁啊啊←无法言语, 顾准的男友力已经突破了上限, 和Neil简直就是配到哭出声, 牛头梗X大金毛什么的, 除了他俩电影都是马赛克！而且顾准的演员——任言恺, 那种扑面而来的总裁感我觉得我已经不好了",time:"7月19日14:14"}],"作品":[{"寂寞寂寞就好":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"寂寞寂寞就好",href:"http://baike.baidu.com/view/4167491.htm","发行时间":"2010年09月03日","填词":"施人诚","谱曲":"杨子朴","介绍":"《寂寞寂寞就好》是华语流行乐女歌手田馥甄（Hebe）演唱的一首摇滚风格的抒情慢歌，此曲由施人诚填词，杨子朴谱曲，收录于田馥甄2010年9月3日的首张个人专辑《To Hebe》，亦是专辑的第二波主打歌。"}},{"潘朵拉":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"潘朵拉",href:"http://baike.baidu.com/subview/3289/7484388.htm","发行时间":"2006年01月05日","填词":"于光中","谱曲":"陈伟","介绍":"《潘朵拉》是台湾女歌手张韶涵演唱歌曲。由于光中作词、陈伟作曲，收录在2006年1月发行的同名专辑《潘朵拉》中。2006年这首歌曲获得2006年度雪碧音乐榜最优秀视像音乐奖、2007年获得KKBox颁奖典礼年度二十大单曲奖项。"}},{"愚人的国度":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"愚人的国度",href:"http://baike.baidu.com/view/2453550.htm","发行时间":"2009年05月15日","填词":"孙燕姿，李焯雄","谱曲":"李偲菘","介绍":"愚人的国度是是孙燕姿第十一张专辑《是时候》歌曲之一，李偲菘作曲、李焯雄、孙燕姿填词。"}},{"白白的":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"白白的",href:"http://baike.baidu.com/view/2792879.htm","发行时间":"2012年1月4日","填词":"李焯雄","谱曲":"陈伟、黄文萱","介绍":"歌手张韶涵专辑《第5季》中的歌曲，由李焯雄作词，陈伟作曲。"}}],"人脉":[{"萧亚轩":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"萧亚轩",href:"http://baike.baidu.com/view/1508.htm","身 高":"162cm","出生日期":"1979年8月24日","代表作品":"最熟悉的陌生人、突然想起你、一个人的精彩、爱的主打歌、吻、表白、类似爱情、潇洒小姐 ","主要成就":"1999年台湾唱片销量王、IFPI认证全球华语最高销量歌手、世界音乐大奖-全球最佳华语歌手、上海八万人体育场开唱最年轻歌手、香港红馆开唱最年轻台湾女歌手、《明天》专辑预购数量最高的艺人、首位站上葛莱美红毯的台湾歌手、华人首位在You2be直播演唱会歌手","介绍":"萧亚轩（Elva Hsiao），1979年8月24日出生于台湾桃园县，华语流行女歌手。1999年，萧亚轩发行首张同名专辑以50万销量成为中国台湾地区唱片销量第一名，并获IFPI认证2000年度“全球华语唱片最高销量艺人”奖。2001年荣获国际机构认可的最高荣誉“世界音乐大奖”“全球年度销售最佳华语歌手”。截至至2014年，萧亚轩共发行12张国语专辑，3张精选辑、1张英语专辑及其他音乐单曲作品，代表作品如《最熟悉的陌生人》、《突然想起你》、《吻》、《爱的主打歌》、《一个人的精彩》、《表白》等。"}},{"张韶涵":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"张韶涵",href:"http://baike.baidu.com/view/3765.htm","身 高":"158cm","出生日期":"1982年1月19日","代表作品":"歌曲:寓言、遗失的美好、欧若拉、隐形的翅膀、亲爱的那不是爱情 影视:海豚湾恋人、公主小妹","主要成就":"第5届中国新唱片新人奖、KKBox颁奖典礼年度十大专辑、2006年CCTV-MTV最受欢迎女歌手、第20届中歌排行榜年度最佳专辑","介绍":"张韶涵（Angela Chang），1982年1月19日出生于中国台湾省桃园县，中国台湾女歌手、演员，毕业于加拿大温斯顿爵士邱吉尔中等学校。2001年，张韶涵签约福茂唱片，其后主演偶像剧《MVP情人》[1] ；正式进入演艺圈。2003年主演偶像剧《海豚湾恋人》走红。2004年1月发行首张专辑《Over The Rainbow》；同年12月发行第二张专辑《欧若拉》，入围第16届“金曲奖”最佳国语女演唱人。2006年凭借《爱杀17》一饰两角入围金钟奖戏剧节目最佳女主角奖；同年推出专辑《潘朵拉》，主打歌《隐形的翅膀》走红并被选为北京高考作文题目，张韶涵凭借该作品登上2007年央视春晚演唱；2007年主演的电视剧《公主小妹》获得湖南卫视2008年年度冠军收视。"}},{"孙燕姿":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"孙燕姿",href:"http://baike.baidu.com/view/1577.htm","身 高":"162cm","出生日期":"1978年7月23日","代表作品":"天黑黑、开始懂了、绿光、遇见、第一天、我怀念的、愚人的国度","主要成就":"新加坡十大杰出青年、华语音乐传媒大奖最佳女歌手、TVB8金曲榜颁奖典礼最受欢迎、七次香港IFPI十大销量国语唱片奖、五届香港十大中文金曲最受欢迎、五届全球华语歌曲排行榜最受欢迎、四届新加坡金曲奖亚洲传媒大奖、四届音乐风云榜盛典最佳女歌手、四届音乐风云榜最受欢迎女歌手、全球华语榜中榜最受欢迎女歌手、三届加拿大至Hit排行榜最受欢迎","介绍":"孙燕姿（Stefanie Sun），新加坡人，华语流行女歌手，具有独特的嗓音和唱腔、扎实的音乐功底。2000年签约华纳音乐，发行首张专辑《孙燕姿同名专辑》，以《天黑黑》出道，并获得包括台湾金曲奖在内的亚洲各地15个最佳新人奖，至今仍为华语歌坛之纪录。2003年，发表新专辑《The Moment》，其中《遇见》一曲迅速为听众所熟悉，连年囊括各地颁奖礼最佳女歌手、身处事业巅峰期的她暂别歌坛一年。2004年携《Stefanie》专辑完美复出，并凭此专辑获得2005年第16届金曲奖最佳女歌手，之后又发表《逆光》、《是时候》等经典专辑。她的歌积极向上、给人力量，个人风格明显，深受听众喜爱。2007年发行第十张全新国语专辑《逆光》并获得MTV最受欢迎歌手奖；2009年担任the Carnaby品牌Yanzi for the Carnaby系列时装设计师，受邀参加新加坡总统御赏演艺大会；2014年发行专辑《克卜勒》。"}}]},"林萧":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"林萧","性别":"女","性格标签":"可爱 纯真",href:"http://baike.baidu.com/subview/982298/10314779.htm","介绍":"她喜欢文字，性格温和，没有主见，有时候有点孩子气，胆小怕事，对人依赖，一直以来觉得自己是一个小人物，但她从不气馁。她对未来充满幻想，对过去无限怀念，她也视友谊为生命。"},"剧照":{img:e+"linxiao/1.jpg,"+e+"linxiao/2.jpg,"+e+"linxiao/3.jpg,"+e+"linxiao/4.jpg,"+e+"linxiao/5.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/2716424431/180/5696758666/0",title:"白痴遇上二货",content:"我羡慕林萧，不是羡慕她有简溪或是崇光，而是即使争吵，顾里也会在她最脆弱得时候保护她。友情，远比爱情来的真实和踏实。其实友情也会分手，也会相处一段时间后发觉不合适，也要相互包容和原谅。也许爱情和友情的区别是爱情有不可原谅的错误，而友情没有。 ——致闺密。",time:"7月30日 08:57"},{img:"http://tp4.sinaimg.cn/5235423299/180/5701521614/0",title:"你怎会知道我是有多在乎你",content:"当林萧走出简溪的家看到狼狈的顾里 那是我要的友谊 当林萧走出机场看到微笑的周崇光 那是我要的爱情。",time:"7月30日 03:26"},{img:"http://tp1.sinaimg.cn/5044584952/180/5700712120/0",title:"_-Darker",content:"--世界上最遥远的距离不是我站在你面前你却不知道我是韩云溪，而是你是电影版的林萧，我是电视剧版的简溪。",time:"7月29日 18:40"},{img:"http://tp1.sinaimg.cn/2231061260/180/40021857307/0",title:"自渡_",content:"“我本来很平凡的，认识了他之后，我的人生好像被点亮了。我本来想一直陪在他身边的。可是后来我发现，光是认识他就已经花光了我这辈子所有的好运气了，我已经没有多余的运气去陪在他身边了。” 林萧。",time:"7月29日 17:41"},{img:"http://tp2.sinaimg.cn/2690874921/180/5700917655/0",title:"来自Asgard的软萌系Loki",content:"看电影版小时代心疼林萧，看电视剧版小时代心疼简溪。。这果然是个看脸的时代。。心疼峰峰。。。",time:"7月29日 13:56"}],"作品":[{"宫":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"宫锁心玉",href:"http://baike.baidu.com/view/3578254.htm","主 演":"杨幂，冯绍峰，何晟铭","上映时间":"2011年01月31日","导 演":"李慧珠；黄俊文","介绍":"《宫锁心玉》，又名《宫》，是《宫》系列的第一部，续集有《宫锁珠帘》和《宫锁连城》。该剧是由湖南经视文化传播有限公司出品，李慧珠执导，于正编剧，杨幂、冯绍峰、何晟铭、佟丽娅和刘雪华等明星主演。该剧讲述一个现代少女洛晴川，穿越到清朝，经历古代的宫廷生活，经历一番“宫心计”和男女情爱之后，回到现实中，更加懂得珍惜当下的故事。该剧已于2011年1月31日在湖南卫视首播，取得了不错的收视成绩。"}},{"分手大师":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"分手大师",href:"http://baike.baidu.com/subview/4696496/11206692.htm","主 演":"邓超，杨幂，梁超","上映时间":"2014年6月27日（中国大陆）","导 演":"邓超，俞白眉","介绍":"邓超首次自导自演的“超氏喜剧”电影《分手大师》是根据同名人气话剧改编，由内地编剧俞白眉改编剧本及联合导演，由邓超 、杨幂领衔主演，梁超、许可嘉、古力娜扎、柳岩等倾情加盟。  该片讲述了“分手大师”梅远贵，在开展“分手”业务的过程中，相识北漂彪悍女汉子叶小春，并由此上演了一出“史上最蠢却感人至深的爱情喜剧”。 该片于2014年6月27日国内上映，并在北美、澳洲、新西兰同步上映。"}},{"仙剑奇侠传3":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"仙剑奇侠传三",href:"http://baike.baidu.com/subview/4219/5215511.htm#viewPageContent","主 演":"胡歌，霍建华，杨幂","上映时间":"2010年2月14日","导 演":"梁胜权、林玉芬、黄俊文","介绍":"《仙剑奇侠传三》是由根据国产单机游戏《仙剑奇侠传三》改编的同名电视剧，由李国立执导，胡歌、霍建华、杨幂、刘诗诗、唐嫣、黄志玮等联袂主演[1] ，于2010年2月14日（大年初一）在江苏卫视首轮上星。该剧讲述了渝州城永安当的小伙计景天和唐门大小姐雪见受到两人随身玉佩的彼此吸引，他们二人“热闹而又尴尬”地相识了，成了一对欢喜冤家。其实雪见和景天正是彼此的有缘人，而他们都来历不凡，身藏几世的秘密，随着雪见家族的剧变，二人阴差阳错地步入了江湖的血雨腥风之中，并结识了徐长卿、紫萱和龙葵等，等待他们的是更加惊险的前程和重大的责任。"}},{"亲幂关系Close to Me":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"亲幂关系Close to Me",href:"http://baike.baidu.com/view/7051858.htm","音乐风格":"流行","发行时间":"2012年1月4日","曲目数量":"11","介绍":"2011年9月，杨幂在香港隆重签约少城时代，为自己的演艺事业开疆拓土，正式进军乐坛。2012年1月4日，杨幂首张个人专辑《亲幂关系Close to Me》隆重发行，杨幂勇做乐坛新人，大胆发声，打出签约少城时代进军乐坛后的首枚重弹。《亲幂关系Close to Me》由内地、香港、台湾三地精良团队合作制作，凭借少城时代与环球唱片的专业度与资源优势对音乐质量进行双重保障，令杨幂以超级新人强势姿态进军歌坛。2012开年梦幻巨作，11首歌曲在杨幂的演绎下，仿佛注入灵动的生命，杨幂随性而自在地唱出一个25岁女生的私密心事，洋溢令人神往的无限遐想。"}}],"人脉":[{"刘恺威":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"刘恺威",href:"http://baike.baidu.com/view/172294.htm?fr=aladdin","身 高":"178cm","出生日期":"1974年10月13日","代表作品":"千山暮雪 盛夏晚晴天 ","主要成就":"2014福布斯中国名人榜综合排名19、2013福布斯中国名人榜综合排名49","介绍":"刘恺威，1974年10月13日生于香港，中国影视男演员、歌手、电视剧制片人。1993年获加拿大华人歌手选拔赛冠军，1994年进入TVB正式踏足演艺圈。 2005年，在主演的《甜孙爷爷》获得收视佳绩后，刘恺威离开了TVB，北上发展。2007年正式将事业重心转向内地。2008年凭《凤穿牡丹》中霍冬青一角在内地崭露头角，获得福建电视台“我爱我剧”颁奖典礼“最受观众喜爱的男演员奖“。2010年主演电视剧《国色天香》；同年凭借《娘妻》获得江苏电视剧颁奖典礼“最佳男演员奖” 。2011年主演电视剧《千山暮雪》，饰演 莫绍谦。2012年刘恺威制片并主演了刘恺威工作室承制的都市商战悬爱剧《盛夏晚晴天》，收视和网络播放量均表现不俗，首次制片作品就获得成功。2013年担任主演电视剧《一念向北》制片人。2014年，由其主演的电视剧《喋血孤岛》、《江南四大才子》、《妻子的秘密》相继播出。此外，其主演的《一念向北》、《风云天地》、《千金女贼》、《抓住彩虹的男人》等电视剧也即将与广大观众见面。"}},{"周笔畅":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"周笔畅",href:"http://baike.baidu.com/view/2637.htm","身 高":"165cm","出生日期":"1985年7月26日（农历六月初九）","代表作品":"笔记、谁动了我的琴弦","主要成就":"亚洲音乐节最佳歌手、新加坡金曲奖海外杰出歌手","介绍":"周笔畅（BiBi Zhou），华语流行女歌手、词曲创作人、演员，Begins品牌主理人兼设计总监，1985年7月26日出生于湖南长沙。2005年参加超级女声获全国亚军出道。2006年获香港新城国语力颁奖礼“全国最受欢迎女歌手” 。2007年她前往美国洛杉矶音乐学院进修并以全A成绩毕业 。回国后以双碟连发形式推出《Now》《Wow》双子专辑 。2008年获东方风云榜和MusicRadio中国TOP排行榜“最佳女歌手”  。2010年她以长发造型转型并发布《I鱼光镜》专辑，在该专辑发行的首周获得了台湾G-music榜的双榜冠军 。截至2013年，她连续7年蝉联中国内地唱片年度销售冠军，并成为首位囊括音乐风云榜等六大颁奖礼“最佳女歌手、最受欢迎女歌手、最佳专辑”奖的中国内地歌手。除演唱事业外，周笔畅同时涉足商业圈，2011年自创潮流品牌Begins，并与多个国际品牌合作推出联名产品 。此外，她热心公益，担任多项公益宣传大使，多次参与壹基金、我要上学、爱心包裹等公益活动，2013年获华人明星中国慈善名人榜第17名 。"}},{"唐嫣":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"唐嫣",href:"http://baike.baidu.com/view/590814.htm","身 高":"165cm","出生日期":"1983年12月6日","代表作品":"《仙剑奇侠传三》、《夏家三千金》","介绍":"唐嫣（Tiffany Tang），1983年12月6日 出生于中国上海，祖籍浙江省宁波市，中国女演员。2006年毕业于中央戏剧学院表演系本科班。2004年，唐嫣被张艺谋亲定为“奥运宝贝”赴雅典参与“中国8分钟”的闭幕式表演 。2009年因《仙剑奇侠传三》中紫萱一角走红，后主演《夏家三千金》、《爱情睡醒了》、《X女特工》等电视剧。2012年，成立唐嫣工作室，担任其主演微电影《逐爱之旅》的制作人。在“2013BQ江南红人榜梦想无界限”颁奖盛典上，唐嫣荣获“年度最受欢迎演员”奖项。 11月参演电视剧《千金女贼》 ，饰演角色蒋心。2014年4月21日，唐嫣搭档霍建华主演电视剧《金玉良缘》开播，剧中饰演江湖女子玉麒麟"}}]},"南湘":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"南湘","性别":"女","性格标签":"美艳 神秘",href:"http://baike.baidu.com/view/1863232.htm","介绍":"她那一头漆黑的长发，是所有男人的招魂幡。她是美艳动人的文艺女神，也是黑暗冷酷的复仇天使，她爱恨淋漓，命运多舛。她是所有男人的梦幻，她是潘多拉魔盒里永远无法猜透的秘密。"},"剧照":{img:e+"nanxiang/1.jpg,"+e+"nanxiang/2.jpg,"+e+"nanxiang/3.jpg,"+e+"nanxiang/4.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/1729370543/50/5681988346/0",title:"郭碧婷",content:"身不由己的叛變，不被理解的無奈，破裂的姐妹情誼，蛻變為梅杜莎的南湘衝破蠶繭蓄勢待發。想看我不一樣的突破改變嗎？7/17帶著好朋友進戲院觀賞吧！",time:"7月16日21:24"},{img:"http://tp3.sinaimg.cn/3934052618/50/5681536803/0",title:"星力天际",content:"刺金时代正在热映，南湘@郭碧婷 的演技广获认可。为了这一次的全新蜕变，郭碧婷下足功夫，在开拍前就开始上表演课，为解放自己几度崩溃，演技大爆发，受到无数好评。但也有不少网友表示，女神你那么美，不用那么辛苦我们也爱你（最后一句话为系统自动转发）",time:"7月19日12:24"},{img:"http://tp2.sinaimg.cn/2369508537/50/5700731025/0",title:"我是帆儿Wendy",content:"当时代姐妹花吵架的时候，林萧说你什么都有而我失去了什么都没有，顾里说我可以养你阿，林萧说你能养我一辈子吗，顾里说我可以。宛如将南湘推倒在地，却在南湘被讨债人追的时候可以不顾生命危险救南湘。朋友就是刚知道你做错时，会生气埋怨，但总会慢慢理解对方的难处，最终都可以原谅。#小时代3#",time:"7月18日16:54"},{img:"http://tp2.sinaimg.cn/1937051105/50/40040328009/0",title:"Anna陌小柒",content:"#小时代4# 南湘在争吵完的第二天，就从家里搬走了。她没有和我们告别，只是和顾准两个人在她的房间里平静地收拾着东西。我擦掉脸上的眼泪说：“我好恨你。”南湘啪地把行李箱合上，她拖着箱子，走到我面前，目光没有丝毫退缩和让步，她一字一句地盯着我的鼻尖，对我说：“林萧，你以为我不恨你么？”",time:"7月18日19:56"},{img:"http://tp4.sinaimg.cn/1877356683/50/5698859770/0",title:"丶柴小源",content:"周末自己来看小时代，虽说一部比一部拍的狗血，但基于喜爱原著，还是支持下。在本部刺金时代里，不论是顾源趴在雪地里掏下水道的戒指，南湘为了保护宛如把她锁到院墙内，还是崇光变成陆烧也要守在林萧身边。那些真正爱你的人即使有千万种理由也不会离开你，不论友情还是爱情。期待小时代4灵魂尽头",time:"7月19日17:51"}],"作品":[{"金色年华":{"中文名":"金色年华","主 演":"黄圣依，蓝正龙，郭碧婷",href:"http://baike.baidu.com/subview/606612/5833161.htm","上映时间":"2005年","导 演":"李大为","介绍":"《金色年华》是《金粉世家》的姐妹篇，由李大为导演，于正编剧，黄圣依、蓝正龙以及严宽领衔主演。故事发生在1930年——1932年的旧中国，成子华从国外留学归来回到上海，一是重塑自我，二是寻找5年前被父母拆散的情侣艾晚晴，希望能再续前缘；曾经被成子华深深伤害的艾晚晴，已经是一个精神、经济独立的小学老师，而深爱艾晚晴多年的方国维如何面对情敌的挑战，许曼丽疯狂地爱恋着成子华怎能容忍自己的恋人被别人夺走，剧情深入发展，矛盾冲突迭出……"}},{"假如没有你":{"中文名":"假如没有你","主 演":"张宁江，郭碧婷，汤晶媚",href:"http://baike.baidu.com/view/4731462.htm","上映时间":"2011年10月14日","导 演":"杨昆荣","介绍":"《假如没有你》由杨昆荣指导，张宁江，郭碧婷等人主演，影片讲述了一对患难夫妻的爱情故事。影片于2011年10月14日正式上映。即将新婚的安楚儿（郭碧婷饰）为挽救因车祸肝脏破裂的游泳运动员易华天（张宁江饰），将自己肝脏的一半移植给了易华天，从此他们的生命便融为了一体。安楚儿因肝脏移植与男友分手，同时易华天在车祸中也失去了左腿，两人在一种莫名力量的牵引下，渐渐走到了一起。在安楚儿的鼓励下易华天重新站立起来面对生活，通过残联的帮助易华天找到一份早餐店的工作，自力更生，并恢复了游泳运动的训练，伴着安楚儿的支持，易华天十年磨剑终在残奥会获得冠军。安楚儿此时却提出了离婚……"}},{"一线钟情":{"中文名":"一线钟情","主 演":"李敏镐，郭碧婷",href:"http://baike.baidu.com/view/13070526.htm","上映时间":"2014年5月9日","导 演":"张太侑","介绍":"韩国“长腿男神”李敏镐和中国女星郭碧婷拍摄的爱情微剧《一线钟情》在5月9日在爱奇艺[1] 与观众见面。《一线钟情》是由《来自星星的你》制作团队和韩国最强的浪漫电视剧拍摄团队共同合作，该影片讲诉了韩国最强音乐制作人与一个中国普通女孩儿的甜蜜爱情故事，可谓韩国版的《广岛之恋》。"}},{"街角的小王子":{"中文名":"街角的小王子","主 演":"杨佑宁，郭碧婷，杨子珊",href:"http://baike.baidu.com/view/2787344.htm","上映时间":"2010年9月3日","导 演":"林孝谦","介绍":"《街角的小王子》是中国台湾首部宠物愈疗系电影，本片由王明霞、林孝谦编剧，林孝谦执导，郭碧婷、杨佑宁领衔主演 。一则忧伤甜美的爱情故事，一段温柔疗愈的生命旅程，一只街角的小猫咪，串起了一段爱情故事，也揭开了一个十多年来未解的谜 。"}}],"人脉":[{"杨子姗":{"中文名":"杨子姗","身 高":"165cm","出生日期":"1986年11月6日","代表作品":"致我们终将逝去的青春 街角的小王子",href:"http://baike.baidu.com/view/664975.htm?fromtitle=%E6%9D%A8%E5%AD%90%E7%8F%8A&fromid=6152667&type=search","主要成就":"2006江苏卫视名师高徒全国亚军第29届金鸡奖最佳女主角提名奖","介绍":"杨子姗，1986年11月6日出生于江苏南京，中国女演员、歌手。毕业于南京艺术学院音乐表演专业。2005年，发行EP单曲《Baby Baby》，正式进入演艺圈。2007年获得江苏卫视《名师高徒》全国总决赛亚军 ；同年发行EP专辑《十八般舞功》。2010年出演电影《近在咫尺的爱恋》，饰演丁小玲一角。2012年凭借在电影《致我们终将逝去的青春》中饰演的郑微一角而成名 。2013年，凭借《致我们终将逝去的青春》获得第29届中国电影金鸡奖最佳女主角提名以及第五届英国万像国际华语电影节最佳女主角奖；同年出演电视剧《一个和八个》，并担任女一号 。"}},{"林孝谦":{"中文名":"林孝谦","出生日期":"1980年5月4日","代表作品":"《自由大道》、《街角的小王子》","主要成就":"《自由大道》获台湾金穗奖首奖《自由大道》获台湾最佳剪辑奖",href:"http://baike.baidu.com/view/8255657.htm","介绍":"林孝谦，台湾导演，毕业于国立台湾艺术大学应用媒体艺术研究所、美国匹兹堡州立大学传播学研究所。2005年，其执导的电影《自由大道》获台湾最重要的独立电影制作奖－金穗奖首奖，影片同时还获得了最佳剪辑奖。 第一部35mm剧情长片《街角的小王子》入围了上海国际电影节、北京国际电影节。第二部剧情长片《与爱别离》除了作为两岸电影展的开幕影片之外，还入围了日本SKIP CITY国际影展竞赛片、高雄电影节，并入围了金钟奖最佳迷你剧集，最佳编剧，最佳女主角等四项大奖。凭借着丰沛的创作能量以及独特的人文背景，其作品分别入选了东京影展创投、釜山亚洲电影学院、金马奖创投、以及北京青年导演论坛，为台湾备受期待的新锐导演之一。"}},{"陈匡怡":{"中文名":"陈匡怡","出生日期":"1987年11月20日","代表作品":"《威廉王子》、《小时代之折纸时代》",href:"http://baike.baidu.com/view/1612127.htm","介绍":"陈匡怡，1987年11月20日生于中国台湾，模特、演员。毕业于台湾大学，被誉为台大五姬之一。2008年主演周杰伦MV《说好的幸福呢》及林宥嘉MV《神秘嘉宾》走红，之后参演王力宏《伯牙绝弦》等MV作品颇受好评。2010年8月签约华研国际音乐，2011年出演《我可能不会爱你》“Maggie”一角踏入影视剧行业。2013年出演电视剧版《小时代》，电影《阳光橱窗》上映。"}}]},"唐宛如":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"唐宛如","性别":"女","性格标签":"欢乐 坚定 可爱",href:"http://baike.baidu.com/view/1722871.htm","介绍":"很多人眼里，她也许只是一个笑料甚至是一个笑话，但她可爱善良，为姐妹两肋插刀，她肆无忌惮，缺有着让人感动的善良。"},"剧照":{img:e+"tangwanru/1.jpg,"+e+"tangwanru/2.jpg,"+e+"tangwanru/3.jpg,"+e+"tangwanru/4.jpg,"+e+"tangwanru/5.jpg"},"微博热议":[{img:"http://tp2.sinaimg.cn/2042222537/180/40056747633/0",title:"冷暖自知_YuLin",content:"100个女生里面有70个唐宛如20个林萧9个南湘1个顾里。100个男生里面有0个席城0个崇光0个宫洺0个顾源。",time:"7月30日 00:34"},{img:"http://tp4.sinaimg.cn/1553147707/180/5696076213/0",title:"----Y-Q",content:"我们可以这样总结.刚开始面对爱情.我们都像唐婉如那么花痴，安静得时候我们都是南湘.工作得时候我们都是林萧那么努力.等我们成功后就是顾里。",time:"7月29日 21:06"},{img:"http://tp4.sinaimg.cn/2851463735/180/22880503721/1",title:"啧啧啧-酸",content:"大部分女汉子现在是和唐宛如一般彪悍的存在而她们往往都希望成为和顾里一般的女王而男生往往会封南湘一般的女生为女神然后找林萧一般的女生谈恋爱。",time:"7月29日 20:13"},{img:"http://tp3.sinaimg.cn/5225490866/180/5701412909/0",title:"feng璐瑶_",content:"我也想做顾里可惜我没有那么坚强我也想成为南湘可惜我没有那么漂亮我也想成为林萧可惜我没有崇光那样的爱人 我也想做唐宛如可惜我没有那么无忧无虑。",time:"7月29日 16:28"},{img:"http://tp4.sinaimg.cn/1925055851/180/5698799255/0",title:"Colour如",content:"顾里虽然好面子，但是她是主心骨。林萧虽然心太软，但是她是调和剂。南湘虽然会背叛，但是她是有骨气。唐宛如虽然依赖人，但是她是开心果。四个人里，即使有争执，也分不清楚谁对谁错，因为她们是彼此相爱的，所以即使吵也吵不散。",time:"7月30日 08:54"}],"作品":[{"我为相亲狂":{"中文名":"我为相亲狂","主 演":"韩雪，李佳航，杜海涛","上映时间":"2013年11月1日",href:"http://baike.baidu.com/view/10436014.htm","导 演":"韩晶","介绍":"由韩晶执导，韩雪、李佳航、杜海涛、Hold住姐谢依霖、冯铭潮等联袂主演的电影《我为相亲狂》，是一部以“寻找真爱、早日脱光”为主题的脱光系热门话题电影。影片通过极品抠门男与奇葩屌丝女、高富帅与白富美、宅男与腐女的相亲奇遇，展现了一个狂热而快乐的全民相亲时代，演绎出一系列令人捧腹又发人深省的爱情故事，并对剩男剩女、宅男宅女等具有鲜明时代特征的群落的生活状态，有出神入化的刻画，是一部紧扣社会热门话题的潮爆爱情喜剧电影。《我为相亲狂》已经在2013年11月1日全国上映。"}},{"我的男男男男朋友":{"中文名":"我的男男男男朋友","主 演":"谢娜，汪东城，胡兵","上映时间":"2013年11月15日",href:"http://baike.baidu.com/view/8487377.htm","导 演":"赵崇基","介绍":"影片讲述的是雯婷小时候是个贪心的小姑娘。什么东西都想要，妈妈说她不要太贪心，她却说，自己只是贪好。雯婷19岁的时候交了一个男友，不图帅，不图有钱，结果“裸恋”10年，惨遭抛弃。雯婷觉得自己的青春完全被浪费了，决心对爱情开始分散投资。于是“白富美”的雯婷在30岁那年展充分展现女人三十之“盛女的诱惑”，一个女生周旋于四个男生，最终她觉得自己这样的爱情观是不可取的，在最后一刻她清醒了找到了自己的最爱。"}},{"撒娇女人最好命":{"中文名":"撒娇女人最好命","主 演":"周迅，黄晓明，谢依霖","上映时间":"2015年1月1日",href:"http://baike.baidu.com/view/8428438.htm?fromtitle=%E6%92%92%E5%A8%87%E5%A5%B3%E4%BA%BA%E6%9C%80%E5%A5%BD%E5%91%BD&fromid=6167426&type=syn","导 演":"彭浩翔","介绍":"电影《撒娇女人最好命》改编自罗曼夫的畅销情感书籍《会撒娇的女人最好命》，由华谊兄弟、黄晓明工作室和周迅工作室联合出品，香港导演彭浩翔指导，周迅和黄晓明领衔主演的一部都市爱情喜剧电影。该片将于2015年1月1日元旦上映。"}},{"钱多多炼爱记":{"中文名":"钱多多炼爱记","主 演":"高以翔，尹航，朱丹","上映时间":"2013年10月22日 ",href:"http://baike.baidu.com/view/10907255.htm","导 演":"林孝谦","介绍":"《《钱多多炼爱记》由搜狐视频2013年出品，是由著名导演陈正道监制，林孝谦执导的爱情时尚情趣剧。主演阵容囊括了高以翔、尹航、王阳明、MIKE隋、周韦彤、赵奕欢、朱丹、谢依霖一众时下当红的时尚明星。"}}],"人脉":[{"陈学冬":{"中文名":"陈学冬","出生日期":"1990年6月28日",href:"http://baike.baidu.com/view/3798145.htm","代表作品":"小时代·折纸时代、小时代：青木时代","介绍":"陈学冬（Cheney Chen），1990年6月28日出生于浙江温州，中国男演员、模特。2007年，17岁的陈学冬开始做兼职模特。2011年，他赴韩国的Cube Entertainment娱乐公司接受培训并参加演出。2013年，陈学冬在郭敬明执导的《小时代》系列电影中饰演崇光一角而走红。2014年7月17日，陈学冬出演的电影《小时代3》在中国公映。"}}]},"卫海":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"卫海","性别":"男","性格标签":"健康阳光 充满朝气",href:"http://baike.baidu.com/view/3134118.htm","介绍":"他以一张单纯而懵懂的面容引爆了一颗又一颗炸弹，将这个本就硝烟弥漫的故事，掀动得更加波澜壮阔。"},"剧照":{img:e+"weihai/1.jpg,"+e+"weihai/2.jpg,"+e+"weihai/3.jpg,"+e+"weihai/4.jpg"},"微博热议":[{img:"http://tp3.sinaimg.cn/1765072222/50/5672132789/1",title:"真维斯",content:"#真维斯·小时代#【人物解析】他是单纯天真的运动男孩，他是唐宛如一见钟情的MR.Right。他健康阳光，充满朝气。他木讷老实却又魅力四射。他用简单而干净的面容引爆了一颗又一颗炸弹，将这个本就硝烟弥漫的故事，掀动得更加波澜壮阔。他就是卫海。",time:"7月4日09:01"},{img:"http://tp4.sinaimg.cn/2215605707/50/5611042327/1",title:"最火热电影",content:"分享一下《小时代》电视剧里唐宛如与卫海女友的撕逼现场，也是把我给看醉了。[偷笑][偷笑]（via 全世界最英俊的人）",time:"7月30日07:51"},{img:"http://tp4.sinaimg.cn/1783199611/50/5694083945/0",title:"臣妾是开玩笑的",content:"南湘虽然穷，但是因为漂亮而交到了卫海。顾里虽然刻薄，但是因为有钱而有了富二代男友。林萧虽然平凡，但是因为身材好而有了周崇光。但你们都不如唐宛如~独立自守！#你有你的小苹果，我有我的小白桃#",time:"7月22日14:54"},{img:"http://tp4.sinaimg.cn/1909546283/50/5698934498/0",title:"舌尖上的郭果果",content:"林萧那么爱简溪最后还是碰到了那个牵着他手走进教堂的崇光 南湘就算为席城堕胎 脱离家庭 中间碰到卫海 最后还是被顾准命环紧扣 可是 这就是生活给你的一切 早安 新的一天",time:"7月22日10:09"},{img:"http://tp2.sinaimg.cn/2951796501/50/5701214522/1",title:"杜天皓Calvin",content:"大家好，我是杜天皓，在小時代裡飾演衛海。明天《小時代3》就要上映了，希望大家會喜歡。我在電影裡面有一場非常精彩的戲，歡迎大家一起進戲院來看。7/17 見，「成長無憾，為你而戰」，謝謝所有支持小時代的朋友們。",time:"7月16日21:53"}],"作品":[],"人脉":[]},"席城":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"席城","性别":"男","性格标签":"危险又迷人",href:"http://baike.baidu.com/view/2140017.htm","介绍":"他是南湘从高中爱到现在的男人，他也是让南湘一度走向毁灭的灾难。他在顾里璀璨的王冠上留下过致命的污点，也因此几乎摧毁了四姐妹的友情堤坝。他是平静的大海，寒冷而又狂热，他是带着风暴气息的旅人，他是漩涡。"},"剧照":{img:e+"xicheng/1.jpg,"+e+"xicheng/2.jpg,"+e+"xicheng/3.jpg,"+e+"xicheng/4.jpg"},"微博热议":[{img:"http://tp4.sinaimg.cn/2845801063/50/5700981171/0",title:"幂总攻i",content:"小时代有个神奇的角色叫席城 他的功能就是每一部突然跑出来打别个一耳光然后神秘的消失",time:"7月20日13:50"},{img:"http://tp4.sinaimg.cn/2121111891/50/5700820762/0",title:"sunne祝姜潮0812生日快乐",content:"小时代3这部唯美的悲情戏爆笑加激情并存，重点要为人物关系点赞。我最爱的角色是席城，因为他打人的样子草鸡帅，做梦都想挨打呀有木有，求#姜潮再打我一次# @姜潮 。",time:"7月17日23:23"},{img:"http://tp2.sinaimg.cn/1925629305/50/40052537946/0",title:"ForeverandAlways曦",content:"#七月待刺金，姜潮席全城# 浪子席城他并不是没有心他只是太爱南湘但是用错了方式。他没有顾源崇光那样的好家室，如果他有我觉得南湘也会和林萧一样很幸福。因为他没有，所以他能做的只有在南湘一直往前走偶尔回头的时候他在。 从小时代1到小时代3我眼中不变的闪光点@姜潮 #暖男姜潮，浪子席城#",time:"7月17日 23:27"},{img:"http://tp4.sinaimg.cn/2050056535/50/40060366513/1",title:"六爷Sixy",content:"席城，你造吗？我要和你分手的原因是，你的九连拍",time:"7月17日19:52"},{img:"http://tp2.sinaimg.cn/2753011033/50/22867111998/0",title:"姜潮亚洲后援会",content:"#七月待刺金，姜潮席全城# 你的镜头并不多，所以每个样子我总会特别珍惜地收藏着！也许是你唱歌时的一个侧脸，专注演戏的一个低头，因为不想错过，所以每一个你都如此珍贵，以前是，现在是，以后也是！[爱你]姜席城，在我们的心里你最棒",time:"7月17日22:59"}],"作品":[{"落跑甜心":{"中文名":"落跑甜心","主 演":"陈翔，郑靓歆，姜潮","上映时间":"2011年8月11日",href:"http://baike.baidu.com/subview/4497222/7657052.htm","导 演":"王明台","介绍":"电视剧《落跑甜心》是根据石文华的同名小说改编而成，讲述的是一帮年轻人面临理想与现实的冲突和融合，寻找爱情和友情的故事。该片由当红人气艺人陈翔 、姜潮、谈莉娜、柴格、武艺等出演。总共有30集，它是一部校园、青春、励志、偶像剧。"}},{"夏日甜心":{"中文名":"夏日甜心","主 演":"陈翔，柴格，曾轶可","上映时间":"2011年7月21日",href:"http://baike.baidu.com/view/1119294.htm","导 演":"金卓","介绍":"《夏日甜心》是一部青春偶像剧，由陈翔、曾轶可、刘美含、武艺、刘惜君等主演。其沿用湖南卫视2011年夏重点力推项目——电视剧《落跑甜心》的人物主线，讲述电视剧之外的“外传故事”，讲述了剧中人物或青春年少、或意气风发、或懵懂纯情的青春故事。"}},{"青春荷尔蒙":{"中文名":"青春荷尔蒙","主 演":"莫熙儿，蓝燕，姜潮","上映时间":"2012年12月",href:"http://baike.baidu.com/view/8126300.htm","导 演":"郭雷","介绍":"叛逆女孩莫菲从小生长在一个单亲家庭，为了梦想，莫菲私自转学，瞒着父亲来到现代音乐学院街舞系做了插班生，结识了林妙妙、胜美、于晓曼等人，然后与两个大男孩崔俊昊和姜潮产生了情感纠葛，引出了一系列令人啼笑皆非的故事。"}},{"成都一夜":{"中文名":"成都一夜","主 演":"付梦妮，姜潮","上映时间":"2013年05月28日","导 演":"邵源",href:"http://baike.baidu.com/view/10620755.htm","介绍":"熊猫饲养员姜潮打算带着行李离开成都，因为他一直饲养的大熊猫圆圆将要送给新西兰作为友好交流的礼物，在途中想起了给友人带的熊猫玩偶还没有取，结果在店外遇到失恋的付梦妮，两个同样面临失去的年轻人，在成都的夜色下将发生一段怎样的化学反应。"}}],"人脉":[{"谈莉娜":{"中文名":"谈莉娜","身 高":"167cm","出生日期":"1989年8月30日","代表作品":"一起又看流星雨","主要成就":"快乐女声全国6强",href:"http://baike.baidu.com/view/2534354.htm","介绍":"谈莉娜1989年8月30日出生于广西南宁，中国女歌手、影视演员。毕业于广西创艺艺术职业学校。2009年参加“快乐女声”比赛，获得全国第六名[1] ；同年签约天娱传媒，正式在演艺圈出道。2010年参演电视剧《一起又看流星雨》，凭借饰演的蒋媛一角而成名[2] 。2011年出演电视剧《夏日甜心》，饰演范妮莎一角。"}},{"莫熙儿":{"中文名":"莫熙儿","身 高":"166cm","出生日期":"1988年12月16日","代表作品":"青春失乐园、青春荷尔蒙",href:"http://baike.baidu.com/view/6541532.htm","介绍":"莫熙儿（Winnie），1988年12月16日出生于四川省成都市，北京天悦东方文化传媒有限公司旗下歌手，毕业于四川省艺术学院。2011年推出了自己的首支单曲《飞行云端》，被国内期刊《新锐杂志》选中，成为由该刊主办的全国校花大赛官方主题歌，并指定歌手莫熙儿为该期校花大赛主题曲唯一演唱歌手而受到关注[1] 。2012年主演电影《青春荷尔蒙》，参与演唱电影中的插曲《爱疯了》，人气上升。2013年6月8日，发行首张个人专辑《莫日爱》 。同年出任励志青春电影《青春荷尔蒙2躁动时代》女主角[4] ，莫熙儿亲自演唱片尾曲《如果回到20岁那年》和插曲《毕业季》。"}},{"付梦妮":{"中文名":"付梦妮","身 高":"161cm","出生日期":"1989年06月25日","代表作品":"大叔我爱你，唱战记",href:"http://baike.baidu.com/view/4409484.htm","介绍":"付梦妮，1989年6月25日生于贵州省贵阳市云岩区，歌手、演员、模特，中国大陆新生代女艺人。担任“QQ幻想世界”魅力天使代言人，腾讯游戏《地下城与勇士》第九章DNF女郎代言人，2011湖南卫视王牌选秀《快乐女声》杭州唱区亚军，全国总决赛第八名。赛后签约’天娱传媒‘发行个人单曲《Mr.恋人》，她与武艺共同主演的微电影《在一起》点击量过亿，荣获“新媒体节首届微视频大赛十佳作品”。个人主演电影《大叔我爱你》于2013年1月11日上映。2014年1月参演湖南卫视定制剧《唱战记》，剧中饰演角色姚雪琪，于4月13日开播。"}}]},"叶传萍":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"叶传萍","性别":"女","性格标签":"霸道 神气 刻薄","介绍":"她是唯一能够和顾里这个伶牙俐齿的冷面美人对抗的顾源妈妈叶传萍.她霸道,神气,刻薄,难缠.却对自己的儿子有着最深沉的爱。"},"剧照":{img:e+"yechuanping/1.jpg,"+e+"yechuanping/2.jpg,"+e+"yechuanping/3.jpg,"+e+"yechuanping/4.jpg"},"微博热议":[{img:"http://tp1.sinaimg.cn/3434193540/50/5699602293/0",title:"晓婕儿_",content:"还有我在叶传萍的身上看到了雪姨的影子顾准和Neil两个帅哥在一起在一起期待明天春节的小时代4只求导演@郭敬明 不要把小说的结尾搬到电影里太让人伤心了",time:"7月25日01:38"},{img:"http://tp1.sinaimg.cn/5000296024/50/5692590692/1",title:"张澈sodiao_",content:"为什么我看到叶传萍的时候老是忘不了她演情深深雨蒙蒙里面雪姨的样子……她说什么话我都觉得像是在说，有胆子强男人有胆子开门啊",time:"7月29日 15:04"},{img:"http://tp3.sinaimg.cn/1188552450/50/40006676792/1",title:"郭敬明",content:"不管你开门还是不开门，飞扬跋扈的叶传萍还在（门口）；不管你好大的口气，霸气威武的叶传萍还在；这绝对是一场好戏，因为@演员王琳 还在！气场升级的叶传萍，刺金时代敲门归来！【#小时代3#王琳回归】",time:"2013-12-12 21:00"},{img:"http://tp1.sinaimg.cn/2809126820/50/5683946282/1",title:"WooKamfai",content:"她是”小时代“中唯一能够和顾里这个伶牙俐齿的冷面美人对抗的顾源妈妈叶传萍.她霸道,神气,刻薄,难缠.而最适合这个角色的,自然是红透全网络的”雪姨“。两大网络热点人物hold住姐和雪姨齐聚电影小时代!2012,雪姨很忙,2013,雪姨更忙,因为她是叶传萍,她是王琳。",time:"7月28日23:39"},{img:"http://tp2.sinaimg.cn/3219481701/50/40059962464/1",title:"小卷子说不是假发是桂_",content:"我看完了说实话没有想象中那么好还是喜欢原著啊最好的就是唐宛如 ←_← 还有顾源崇光挺好！雪姨演叶传萍真心好！一脸奸样！话说宫洺和简溪我不满意！特别是宫洺没有纸片人的感觉不过看他们四个的感情还是挺感动的",time:"2013-6-28 12:35"}],"作品":[{"情深深雨蒙蒙":{"中文名":"情深深雨蒙蒙","主 演":"赵薇，林心如，苏有朋","上映时间":"2001年4月3日","导 演":"李平",href:"http://baike.baidu.com/view/4188513.htm?fromtitle=%E6%83%85%E6%B7%B1%E6%B7%B1%E9%9B%A8%E8%92%99%E8%92%99&fromid=1350114&type=syn","介绍":"《情深深雨濛濛》是继《还珠格格》之后原班人马打造的新一部爱恨情仇的电视连续剧，由中国海峡两岸合拍，改编自琼瑶的原著小说《烟雨濛濛》，同时也是1986年秦汉、刘雪华版《烟雨濛濛》的翻拍，以20世纪30年代的上海陆家为故事主轴，由赵薇、林心如、苏有朋、古巨基等明星主演。"}},{"宫锁连城":{"中文名":"宫锁连城","主 演":"陆毅，袁姗姗，戴娇倩","上映时间":"2014年04月08日","导 演":"李慧珠，邓伟恩，温伟基",href:"http://baike.baidu.com/view/9803471.htm","介绍":"《宫锁连城》是《宫锁心玉》和《宫锁珠帘》的续作。该剧由于正编剧，李慧珠担任总导演，湖南经视、东阳欢娱、东阳星瑞公司联合出品。由袁姗姗、陆毅、戴娇倩、杨蓉、高云翔等明星主演，寇振海、王琳、贾静雯、张雅萌、徐幸、汤镇业等演员倾力加盟。该剧讲述清朝乾隆年间，连城、恒泰、醒黛三人的爱情故事。"}},{"倾世皇妃":{"中文名":"倾世皇妃","主 演":"林心如，霍建华，严宽","上映时间":"2011年09月30日","导 演":"梁辛全,林峰",href:"http://baike.baidu.com/subview/1640361/5052651.htm","介绍":"《倾世皇妃》是一部改编自慕容湮儿的同名小说的古装剧；由林心如工作室联合湖南广播电视台等出品，林心如首次担任制片，梁辛全与林峰联合导演，林心如、霍建华、严宽等主演，该剧于2011年09月30日于湖南卫视播出，最高收视率达3.47，居同时段全国省级收视排名第一。"}},{"美人无泪":{"中文名":"美人无泪","主 演":"袁姗姗，刘恺威，张檬","上映时间":"2012年12月17日","导 演":"梁胜权",href:"http://baike.baidu.com/view/6872702.htm","介绍":"《山河恋·美人无泪》无泪之殇是于正继《美人心计》、《美人天下》后的第三部美人的收官之作，由袁姗姗、刘恺威、张檬、 韩栋、蔡少芬领衔主演。该剧以孝庄文皇后的一生为线索，讲述了从皇太极征战天下到其孙康熙继位的那段清初历史。于2012年12月17日在江苏卫视全国首播。"}}],"人脉":[{"赵薇":{"中文名":"赵薇","身 高":"166cm","出生日期":"1976年3月12日",href:"http://baike.baidu.com/subview/3255/13363150.htm","代表作品":"情人结、花木兰、画皮、赤壁、还珠格格、情深深雨濛濛、京华烟云 ","主要成就":"上海国际电影节最佳女演员、中国电影华表奖优秀女演员、大众电影百花奖最佳女主角、长春国际电影节最佳女主角、中国电视金鹰奖最佳女主角、北京大学生电影节最受欢迎女演员、中国电影金鸡奖最佳导演处女作奖","介绍":"赵薇（Vicki），1976年3月12日生于安徽芜湖，中国大陆影视女演员、歌手、导演，北京电影学院导演系硕士，在影、视、歌、导四个领域都有成就的多栖明星。1998年凭借电视剧《还珠格格》成名，并荣获金鹰奖最佳女主角奖。次年《还珠格格Ⅱ》以65%的收视率创造了中国电视剧收视记录，其后主演的《情深深雨蒙蒙》、《京华烟云》均打破央视收视记录。"}},{"林心如":{"中文名":"林心如","身 高":"167cm","出生日期":"1976年1月27日",href:"http://baike.baidu.com/view/5765.htm","代表作品":"《还珠格格》《半生缘》《男才女貌》《美人心计》","主要成就":"2011度最佳制作人奖、2011华鼎电影最佳女配角、国剧盛典港台地区最受欢迎女演员、2012国剧盛典最具号召力演员、2013福布斯中国名人榜第30名、首尔国际电视节中国最受欢迎演员、2012年福布斯中国名人榜第34名、首尔国际电视节中国最受欢迎演员、青少年公益电影节最喜爱女演员奖","介绍":"林心如，1976年1月27日出生于台湾台北，中国台湾女演员、影视制作人。1993年以兼职广告模特开始了演艺生涯；1994年因与郭富城合拍广告踏入演艺圈；1998年主演电视剧《还珠格格》“夏紫薇”一角一炮走红，之后主演的电视剧《男才女貌》收视率仅次于《新闻联播》，创下时装偶像剧收视先河。之后更相继参演了《半生缘》、《大祠堂》、新版《三国》、《美人心计》等经典长红剧。"}},{"白冰":{"中文名":"白冰","身 高":"165cm","出生日期":"1986年5月2日",href:"http://baike.baidu.com/subview/566399/5949290.htm","代表作品":"《隋唐演义》、《神话》、《画皮之真爱无悔》","主要成就":"2009华鼎奖最佳表现女演员","介绍":"白冰（Michelle），中国内地女演员。1986年5月2日出生于陕西西安，毕业于西北政法大学。大二时参加央视梦想中国后签约英皇娱乐，从而踏入了演艺圈。2007年，在电影《爱情呼叫转移》中崭露头角。2010年，在央视大剧《神话》中出演女主角玉漱公主而人气上升，受到观众关注。2011年担任电视剧《凰图腾》女一号“缪风燕”；3月凭借担任《隐婚男女》女主角，在“2010华鼎电影盛典——不能没有你”典礼上荣获“中国年度新锐演员奖”。2012年主演《苦咖啡》，白冰在剧中饰演女一号，与胡歌续《神话》后再次合作，饰演一对恋人。"}}]},"周崇光":{"角色":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/zuopin.jpg","中文名":"周崇光","性别":"男","性格标签":"顽皮而又温柔",href:"http://baike.baidu.com/view/3253721.htm","介绍":"他擅长用文字营造出海市蜃楼的梦幻。他用文字编织了无数个柔软的梦。他本活在游戏的虚拟世界，却被林萧带进了真实的生活。他是带着血光气息的少年，他穿越汹涌的人潮，朝你走来，他对你说，你要等。他是宇宙里的一枚小小星辰，闪烁在寂静的夜空。"},"剧照":{img:e+"zhouchongguang/1.jpg,"+e+"zhouchongguang/2.jpg,"+e+"zhouchongguang/3.jpg,"+e+"zhouchongguang/4.jpg,"+e+"zhouchongguang/5.jpg"},"微博热议":[{img:"http://tp3.sinaimg.cn/3627982790/180/5700404492/0",title:"我是路飞阿",content:"林萧那么爱简溪最后还是碰到了那个牵着他手走进教堂的崇光 南湘就算为席城堕胎 脱离家庭 中间碰到卫海 最后还是被顾准命环紧扣 可是 这就是生活给你的安排。",time:"7月22日 11:15"},{img:"http://tp2.sinaimg.cn/1977511937/180/22864788750/0",title:"千年羽化终成王",content:"周崇光。明媚而孤独。你是当红偶像作家。你是ME爆红模特陆烧。同一个人不同的样子用同一个生命同样的爱守护着林萧。我多么希望你们在一起。四爷一直是这样。在巨大的华丽背后一个简单的谢幕。然后陷入墨水一般浓稠的黑暗里。黑暗无边。与你并肩。崇萧。平行时空里。你们在一起。",time:"7月30日 02:01"},{img:"http://tp3.sinaimg.cn/3499318494/180/5700996432/0",title:"陈学冬的祝礼",content:"如果说顾里是林萧的第一男主角的话，那顾源心中的“贤妻良母”一定非崇光莫属。",time:"7月29日 19:58"},{img:"http://tp4.sinaimg.cn/2698467691/180/5701312137/0",title:"杨苹apple",content:"#小时代3#我以为小时代3火的是柯震东可是火的是陈学冬[哼]我以为小时代3火的是吴亦凡的时间煮雨可是火的是陈学冬的不再见[哼]我以为小时代3火的是顾氏夫妇可是火的是林萧和崇光的爱情。",time:"7月23日 10:53"},{img:"http://tp2.sinaimg.cn/1785001313/180/5696463016/0",title:"奇葩涵_",content:"死孩子 因为你又去看了一遍 我不需要高富帅顾源 只要有一个整容之后变换身份还愿意默默陪伴在林萧身边的崇光就好了啊~[不要][拜拜]@陈学冬",time:"7月29日 15:04"}],"作品":[{"小时代":{"中文名":"小时代","主 演":"杨幂，柯震东，郭采洁，郭碧婷，谢依霖，陈学冬，凤小岳","上映时间":"2013年06月27日",href:"http://baike.baidu.com/subview/1231654/9686197.htm","导 演":"郭敬明","介绍":"影片《小时代》根据郭敬明同名小说《小时代》改编，由郭敬明担任影片的编剧及导演，李力制片，杨幂、柯震东、郭采洁、郭碧婷等领衔主演，该片是《小时代》系列电影的第一部。影片于2013年06月27日在中国内地上映。影片以上海为背景，讲述四个从小感情深厚、有着不同价值观和人生观的女生，经历了友情、爱情、亲情的巨大转变。在一个宿舍朝夕相处的四个女生，开始找工作实习的忙碌生活，面对巨大压力，在看似平静的校园相继发生着让她们措手不及的事情。"}},{"小时代·青木时代":{"中文名":"小时代·青木时代","主 演":"杨幂，柯震东，郭采洁，郭碧婷","上映时间":"2013年08月08日（中国大陆）",href:"http://baike.baidu.com/view/10744733.htm?fromtitle=%E5%B0%8F%E6%97%B6%E4%BB%A3%C2%B7%E9%9D%92%E6%9C%A8%E6%97%B6%E4%BB%A3&fromid=2503765&type=syn","导 演":"郭敬明","介绍":"电影《小时代》和《小时代：青木时代》都改编自郭敬明原著《小时代》第一本《小时代1.0之折纸时代》。由郭敬明编剧及导演，柴智屏监制，安晓芬与崔震东制片，杨幂、柯震东领衔主演。故事讲述了毕业制作圆满落幕，顾里的生日宴会也随之到来，这其实是一场枪林弹雨的鸿门宴。顾里与南湘的男友席城的一个肮脏秘密被揭开，导致姊妹反目、兄弟阋墙、顾父事故、林泉出现等一系列变故接踵而来。"}},{"小时代·刺金时代":{"中文名":"小时代·刺金时代","主 演":"杨幂，柯震东，郭采洁，郭碧婷，谢依霖，陈学冬",href:"http://baike.baidu.com/view/11734657.htm?fromtitle=%E5%B0%8F%E6%97%B6%E4%BB%A3%C2%B7%E5%88%BA%E9%87%91%E6%97%B6%E4%BB%A3&type=syn","上映时间":"2014年07月17日（中国大陆）","导 演":"郭敬明","介绍":"电影《小时代3：刺金时代》改编自郭敬明同名小说并由其亲自执导，杨幂、柯震东、郭采洁、陈学冬、郭碧婷、谢依霖等主演。于2014年7月17日全国公映。影片主要讲述了林萧、顾里、南湘、唐宛如，四个从小一起长大的好姐妹大学毕业进入职场，开始了新的旅程。"}},{"小时代之折纸时代":{"中文名":"小时代之折纸时代","主演":"陈意涵，江铠同，陈匡怡，徐冬梅，陈学冬",href:"http://baike.baidu.com/view/8742057.htm","上映时间":"2014年7月10日","导演":"瞿友宁","介绍":"《小时代之折纸时代》又名《小时代之青春时代》，是改编自郭敬明小说《小时代1.0》，此部剧由瞿友宁导演，集合了两岸三地诸多演员2011年9月，剧集主要讲述了以经济飞速发展的上海为背景，讲述了林萧、南湘、顾里、唐宛如四个从小感情深厚、有着不同价值观和人生观的女生，先后所经历的友情、爱情， 乃至亲情的巨大转变。该剧于2014年7月10日暑假档网络首播。"}}],"人脉":[{"谢依霖":{"中文名":"谢依霖","出生日期":"1990年3月19日","代表作品":"小时代、小时代2 ","主要成就":"2011暴红女素人奖",href:"http://baike.baidu.com/view/6319645.htm","介绍":"谢依霖（Evonne），1990年3月19日出生于中国台湾。中国台湾影视演员，毕业于台湾中国文化大学戏剧学系。谢依霖因2011年8月9日在综艺节目《大学生了没》节目中扮丑搞怪而走红。后签约经纪公司金星娱乐，正式成为艺人并往综艺咖方向发展，2013年出演电影《小时代》中的女主角之一“唐宛如”，从而正式成为演员，并开始接拍电视剧。她出演的《小时代2：青木时代》于2013年8月8日公映。2014年7月17日，她出演的《小时代3：刺金时代》上映。"}},{"李晨":{"中文名":"李晨","身 高":"180cm","出生日期":"1982年8月28日","代表作品":"Channel [V]《音乐飙榜》、东方卫视《舞林大会》",href:"http://baike.baidu.com/subview/66723/5628019.htm#viewPageContent","介绍":"自2002年9月加入Channel[V]，李晨凭借着其年轻，充满朝气的邻家大男孩般的形象，以及三年来自身不断地努力，从一个初出茅庐的新人成为了国内知名的主持人。"}},{"李悦铭":{"中文名":"李悦铭","身 高":"178cm","出生日期":"1985年1月5日","代表作品":"小时代、火力少年王2、火蓝刀锋",href:"http://baike.baidu.com/view/3296926.htm","介绍":"李悦铭，1985年1月5日出生于杭州，中国内地男演员。2003年毕业于北京电影学院表演系。2007年出演电视剧《火力少年王2》中“丘岳”一角出道。2013年出演郭敬明导演电影《小时代》中“简溪”一角而被广大观众所熟知。"}}]},"郭敬明":{"作品":[{"小时代":{"中文名":"小时代","主 演":"杨幂，柯震东，郭采洁，郭碧婷，谢依霖，陈学冬，凤小岳","上映时间":"2013年06月27日","导 演":"郭敬明",href:"http://baike.baidu.com/subview/1231654/9686197.htm","介绍":"影片《小时代》根据郭敬明同名小说《小时代》改编，由郭敬明担任影片的编剧及导演，李力制片，杨幂、柯震东、郭采洁、郭碧婷等领衔主演，该片是《小时代》系列电影的第一部。影片于2013年06月27日在中国内地上映。影片以上海为背景，讲述四个从小感情深厚、有着不同价值观和人生观的女生，经历了友情、爱情、亲情的巨大转变。在一个宿舍朝夕相处的四个女生，开始找工作实习的忙碌生活，面对巨大压力，在看似平静的校园相继发生着让她们措手不及的事情。"}},{"小时代-青木时代":{"中文名":"小时代·青木时代","主 演":"杨幂，柯震东，郭采洁，郭碧婷","上映时间":"2013年08月08日（中国大陆）","导 演":"郭敬明",href:"http://baike.baidu.com/view/10744733.htm?fromtitle=%E5%B0%8F%E6%97%B6%E4%BB%A3%C2%B7%E9%9D%92%E6%9C%A8%E6%97%B6%E4%BB%A3&fromid=2503765&type=syn","介绍":"电影《小时代》和《小时代：青木时代》都改编自郭敬明原著《小时代》第一本《小时代1.0之折纸时代》。由郭敬明编剧及导演，柴智屏监制，安晓芬与崔震东制片，杨幂、柯震东领衔主演。故事讲述了毕业制作圆满落幕，顾里的生日宴会也随之到来，这其实是一场枪林弹雨的鸿门宴。顾里与南湘的男友席城的一个肮脏秘密被揭开，导致姊妹反目、兄弟阋墙、顾父事故、林泉出现等一系列变故接踵而来。"}},{"小时代-刺金时代":{"中文名":"小时代·刺金时代","主 演":"杨幂，柯震东，郭采洁，郭碧婷，谢依霖，陈学冬","上映时间":"2014年07月17日（中国大陆）","导 演":"郭敬明",href:"http://baike.baidu.com/view/11734657.htm?fromtitle=%E5%B0%8F%E6%97%B6%E4%BB%A3%C2%B7%E5%88%BA%E9%87%91%E6%97%B6%E4%BB%A3&type=syn","介绍":"电影《小时代3：刺金时代》改编自郭敬明同名小说并由其亲自执导，杨幂、柯震东、郭采洁、陈学冬、郭碧婷、谢依霖等主演。于2014年7月17日全国公映。影片主要讲述了林萧、顾里、南湘、唐宛如，四个从小一起长大的好姐妹大学毕业进入职场，开始了新的旅程。"}},{"小时代之折纸时代":{"中文名":"小时代之折纸时代","主演":"陈意涵，江铠同，陈匡怡，徐冬梅，陈学冬","上映时间":"2014年7月10日","导演":"瞿友宁","介绍":"《小时代之折纸时代》又名《小时代之青春时代》，是改编自郭敬明小说《小时代1.0》，此部剧由瞿友宁导演，集合了两岸三地诸多演员2011年9月，剧集主要讲述了以经济飞速发展的上海为背景，讲述了林萧、南湘、顾里、唐宛如四个从小感情深厚、有着不同价值观和人生观的女生，先后所经历的友情、爱情， 乃至亲情的巨大转变。该剧于2014年7月10日暑假档网络首播。"}}],"人脉":[{"韩寒":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"韩寒",href:"http://baike.baidu.com/subview/5972/10680834.htm","身高":"174","出生日期":"1982年9月23日","代表作品":"三重门、毒、零下一度","主要成就":"《外交政策》年度全球百大思想家、第五届中国作家富豪榜第8位、《时代周刊》“全球最具影响力一百人”娱乐类排名第二","介绍":"韩寒，1982年9月23日出生于上海市金山区，中国作家、导演、职业赛车手。韩寒初中开始写作和投稿，1999年，他以《杯中窥人》一文获得首届全国新概念作文比赛一等奖。2000年，在上高一的韩寒退学，后出版首部长篇小说《三重门》。2001年，他出版文集《零下一度》，该书获得当年全国图书畅销排行榜第一名。2002年，他出版小说《像少年啦飞驰》。2003开始职业赛车生涯。2004年3月，他出版文集《韩寒五年》。2005年开通博客，开始博客写作。2009年，他主编《独唱团》。2010年，韩寒被《时代周刊》评选为100名影响世界人物之一。2011年，他出版杂文集《青春》。2012年6月，韩寒发布了APP阅读应用“ONE·一个” 。2013年，他出版《一个：很高兴见到你》。2014年7月24日，韩寒执导的电影《后会无期》上映"}},{"郭采洁":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"郭采洁",href:"http://baike.baidu.com/view/1227253.htm","身 高":"158cm","出生日期":"1986年2月19日","代表作品":"诚实地想你、烟火、我的未来式","主要成就":"2007年EZPEER排行榜西洋单曲排、行榜连夺八周冠军及三十二周上榜、2008年台湾偶像剧年度最佳新人奖、2010年华娱卫视十大亚洲红人之一、第二周G-music、五大唱片冠军","介绍":"郭采洁（Amber Kuo），1986年2月19日出生于台湾台北，中国台湾女歌手、演员、模特。2007年，郭采洁发表首张音乐专辑《隐形超人》，以“优格女孩”为号出道。2008年，出演偶像剧《无敌珊宝妹》担当女主角走红，并荣获2008年台湾偶像剧年度最佳新人奖。2009年，她发行第二张个人专辑《爱异想》。2010年，出演电影《一页台北》，并获得2010台北电影节台北电影奖最佳新演员奖，成为2010年华娱卫视十大亚洲红人。2012年，郭采洁推出第三张专辑《给他》，次年出演电影《小时代》，担任女主角顾里，并提名第16届上海国际电影节之电影频道传媒大奖最佳女主角。"}},{"杨幂":{img:"http://zhanghuijie.fe.baidu.com/images/yangmi/head.jpg","中文名":"杨幂",href:"http://baike.baidu.com/view/3871.htm","身 高":"168cm","出生日期":"1986年9月12日","代表作品":"仙剑奇侠传三、神雕侠侣、宫、孤岛惊魂、小时代","介绍":"杨幂（1986年9月12日—），中国女演员、歌手、电视剧制片人。出生于北京。毕业于北京电影学院表演系2005级本科班。她曾获得第24届、第26届中国电视金鹰奖提名，第17届上海电视节白玉兰奖两项提名，并且获得一项白玉兰奖。在2009年4月的“80后新生代娱乐大明星”评选活动中，成为内地新“四小花旦”（与黄圣依、王珞丹以及刘亦菲）之一。"}}]}}}),define("js/detail",["require","./log","../data/detail"],function(e){var t=e("./log"),n=function(e){return new n.fn.init(e)},r=e("../data/detail"),i=!!window.ActiveXObject,s=function(){function c(e){return(e+n.length)%n.length}function h(e){if(!/(msie) ([\w.]+)/.exec(a)){if(!o)return;o=!1}i=e,u=n.length;for(var t=0;t<n.length;t++)n[t].className="",n[t].onclick=null;n[c(i-2)].className="left2",n[c(i-1)].className="left",n[i].className="cur",n[c(i+1)].className="right",n[c(i+2)].className="right2",p()}function p(){var e=!1;n[c(i-1)].onclick=s[0].onclick,n[i].onclick=function(){e?this.className="active":this.className="cur",e=!e},n[c(i+1)].onclick=s[1].onclick}var e=document.getElementById("tip-pow"),t=document.getElementById("tip-pow-ul"),n=t.getElementsByTagName("li"),r=0,i=0,s=e.getElementsByTagName("a"),o=!0,u=0,a=navigator.userAgent.toLowerCase();s[0].onclick=function(){h((i-1+n.length)%n.length)},s[1].onclick=function(){h((i+1)%n.length)};if(!/(msie) ([\w.]+)/.exec(a)){var f=[{b:"webkit",e:"webkitTransitionEnd"},{b:"firefox",e:"transitionend"}];function l(e){var t=e.srcElement||e.target;if(t.tagName!="LI")return;u--,u<=0&&(o=!0)}for(var r=0;r<f.length;r++)if(navigator.userAgent.toLowerCase().search(f[r].b)!=-1){document.addEventListener(f[r].e,l,!1);break}}p(),document.onkeydown=function(e){var t=e||event;switch(t.keyCode){case 37:s[0].onclick();break;case 39:s[1].onclick()}};var d=null;setTimeout(function(){s[1].onclick()},0)},o=function(e){function h(){var a=document.getElementById("scrollcontent"),f=a.getElementsByTagName("div"),c=0,h=1,p=a.offsetHeight*.05;for(var d=0;d<t;d++)for(var v=0;v<n;v++,h++){var m=document.createElement("div"),g=(a.offsetWidth-o)/2,p=(a.offsetHeight-u)/2;m.className="active",m.index=h,m.zns_row=d,m.zns_col=v,m.zns_left=g+m.zns_col*(i+1),m.zns_top=p+m.zns_row*(s+1)+200,m.zns_bg="url("+e[0]+") "+ -m.zns_col*i+"px "+ -m.zns_row*s+"px",m.style.left=m.zns_left+"px",m.style.top=m.zns_top+"px",m.style.width=i+"px",m.style.height=s+"px",m.style.background=m.zns_bg,a.appendChild(m)}var y=document.createElement("div");y.className="btn",y.style.top="320px",y.innerHTML='<a class="prev" id="prev" href="javascript:;"></a><a class="next" id="next" href="javascript:;"></a>',a.appendChild(y);var b=document.getElementById("prev"),w=document.getElementById("next");b.onclick=w.onclick=function(){this==b?(c--,c<0&&(c=l-1)):(c++,c>=l&&(c=0));var t=[];for(v=0;v<r;v++)t[v]=v;t.sort(function(){return Math.random()-.5});var n=setInterval(function(){var r=t.pop();f[r].style.background="url("+e[c]+") "+ -f[r].zns_col*i+"px "+ -f[r].zns_row*s+"px",t.length||clearInterval(n)},20)}}var t=2,n=4,r=8,i=126,s=105,o=0,u=0,a=0,f=0,l=e.length;for(f=0;f<l;f++){var c=new Image;c.onload=function(){o=this.width,u=this.height,++a==l&&h()},c.src=e[f]}},u=function(e,t,n,r,i,s,o){function p(n){var d=n||window.event,v=d.deltaX*-30||d.wheelDeltaX/4||0,m=d.deltaY*-1||d.wheelDeltaY/4||d.wheelDeltaY===undefined&&d.wheelDelta/4||d.detail*-10||0;u&&(v/=30,m/=30),a&&d.type!=="DOMMouseScroll"&&e.removeEventListener("DOMMouseScroll",p,!1);var g=t.getBoundingClientRect(),y=g.right-g.left,b=g.bottom-g.top;if(d.altKey)v&&(c-=v,c=Math.min(c,y),c=Math.max(c,50),e.style.width=c+"px"),m&&(h-=m,h=Math.min(h,b),h=Math.max(h,50),e.style.height=h+"px");else{if(v){f=t.offsetLeft;var w=Math.min(c-y,0);f=Math.max(f+v,w),f=Math.min(f,0),t.style.left=f+"px"}if(m){l=t.offsetTop;var w=Math.min(h-b,0);l=Math.max(l+m,w),l=Math.min(l,0),t.style.top=l+"px",r.style.top=-l/s*i+o+"px"}}return d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation(),d.cancelBubble=!0,d.returnValue=!1,!1}var u=navigator.userAgent.indexOf("Macintosh")!==-1&&navigator.userAgent.indexOf("WebKit")!==-1,a=navigator.userAgent.indexOf("Gecko")!==-1,f=t.offsetLeft,l=t.offsetTop,c=e.offsetWidth,h=e.offsetHeight;e.onwheel=p,e.onmousewheel=p,a&&e.addEventListener("DOMMouseScroll",p,!1)},a=function(){function c(n){n=n||window.event,f=n.clientY,l=e.offsetTop,a=t.offsetTop,document.onmousemove=function(){h()},document.onmouseup=function(){p()},document.getElementsByTagName("body")[0].onselectstart=function(){return!1}}function h(n){n=n||window.event;var r=n.clientY-f+l,u=a-(n.clientY-f)/s*i;r<o?(r=o,u=0):r>s+o&&(u=-i,r=s+o),e.style.top=r+"px",t.style.top=u+"px"}function p(e){document.onmousemove=null,document.onmouseup=null,document.getElementsByTagName("body")[0].onselectstart=function(){return!0}}var e,t,n,r,i,s,o,a,f=0,l=0;return{init:function(a,f,l,h){e=document.getElementById(h),t=document.getElementById(f),n=document.getElementById(l),r=document.getElementById(a),t.offsetHeight<r.offsetHeight?n.style.display="none":(e.style.height=n.offsetHeight/t.offsetHeight*n.offsetHeight+"px",o=e.offsetTop,i=t.offsetHeight-r.offsetHeight,s=n.offsetHeight-o*2-e.offsetHeight,e.onmousedown=c,u(r,t,n,e,s,i,o))}}}(),f=function(){function n(e,t,n){switch(e){case"作品":case"人脉":case"角色":var r="",s="";(e=="作品"||e=="人脉"||e=="角色")&&t.href&&(s='<a class="baike-more" href="'+t.href+'" target="_blank">查看更多>></a>');for(var o in t)if(o!=="img"&&o!=="介绍"&&o!=="href")if(o=="中文名"){var u=t[o];r+="<li><span>"+o+'：</span><a target="_blank" href="http://www.baidu.com/s?wd='+u+'">'+u+"</a></li>"}else r+="<li><span>"+o+'：</span><span class="tip-juese-head-item">'+t[o]+"</span></li>";var a='<div class="top-juese-head"><div class="top-juese-leftimg"><img src="'+t.img+'" style="width:100%;height:100%" /><span class="top-juese-leftimg-shadow"></span></div>'+'<div class="top-juese-rightlist">'+"<ul>"+r+"</ul>"+"</div>"+"</div>"+'<div class="top-juese-jianjie">'+(t["介绍"]||"")+s+"</div>";break;case"微博热议":var a="";t=t.sort(function(e,t){return t.time.localeCompare(e.time)});for(var f=0;f<t.length;f++){var l=t[f];a+='<div class="top-weibo-list"><div class="top-weibo-left"><img src="'+l.img+'" /></div>'+'<div class="top-weibo-right">'+'<span class="top-weibo-right-title">'+l.title+"</span>"+'<div class="top-weibo-right-content">'+l.content+"</div>"+'<div class="top-weibo-time">'+l.time+"</div>"+"</div>"+"</div>"}var c="http://s.weibo.com/wb/"+n+"&sort=time";a+='<a class="baike-more" href="'+c+'" target="_blank">查看更多>></a>';break;case"剧照":var h=t.img.split(","),a="";if(!i){for(var f=0;f<h.length;f++)a+='<li class=""><img src="'+h[f]+'"><span></span></li>';var a='<div class="top-juzhao" id="tip-pow"><ul id="tip-pow-ul">'+a+"</ul>"+'<div class="btn">'+'<a class="prev" href="javascript:;"></a>'+'<a class="next" href="javascript:;"></a>'+"</div>"+"</div>"}}return a}var e={},r=function(r,i,s){var o=document.body.clientHeight||document.documentElement.clientHeight,u="tipbg.png",a=document.createElement("div");a.className="tip-container";var f=document.createElement("div");f.className="tip-title";if(r=="人脉")var l="人物简介";else if(r=="作品")var l="作品简介";else if(r=="角色")var l="角色概况";else var l=r;f.innerHTML=l,a.appendChild(f);var c=document.createElement("div");c.className="tip-scroll-panel",c.id="scrollpanel",c.style.overflow=r=="剧照"?"":"hidden",a.appendChild(c);var h=document.createElement("div");h.id="scrollcontent",h.style.top="0px",h.style.overflow=r=="剧照"?"":"hidden",h.className="tip-content",h.innerHTML=n(r,i,s),c.appendChild(h);if(r!="剧照"){var p=document.createElement("div");p.className="tip-scroll-scrollbar",p.id="scrollbar",p.innerHTML='<div class="tip-scroll-scrollblock" id="scrollblock"></div>',a.appendChild(p)}var d=document.createElement("div");return d.className="tip-close",a.appendChild(d),e.tipclose=d,document.body.appendChild(a),e.elements=a,c.addEventListener("click",function(e){e.target.nodeName.toUpperCase()=="A"&&t("zhishitupuclick","",e.target.href)}),a};return e={add:function(e,t,n){r(e,t,n),e=="剧照"?i?o(t.img.split(",")):s():a.init("scrollpanel","scrollcontent","scrollbar","scrollblock")},remove:function(){}}}();return n.fn={haveData:function(){return!!this.tipData},show:function(){return f.add(this.type,this.tipData,this.person),this.elements=f.elements,this.tipclose=f.tipclose,this},close:function(e){var t=this;this.tipclose,t.tipclose.onclick=function(){t.elements.style.display="none",document.body.removeChild(t.elements),e()}}},n.fn.init=function(e){this.elements=f.elements;var t=e.path;this.person=t.name,this.type=t.type,this.prodcname=t.extra?t.extra:"",this.personimg=e.image?e.image:"";if(r[this.person]){var n=r[this.person][this.type];if(this.type=="作品"||this.type=="人脉")for(var i=0;i<n.length;i++)n[i][this.prodcname]&&(this.tipData=n[i][this.prodcname],this.personimg&&(this.tipData.img=this.personimg));else this.tipData=n,this.type!=="剧照"&&(this.tipData.img=this.personimg)}return this},n.fn.init.prototype=n.fn,n}),define("qtek/math/Quaternion",["require","glmatrix"],function(e){var t=e("glmatrix"),n=t.quat,r=function(e,t,r,i){e=e||0,t=t||0,r=r||0,i=i===undefined?1:i,this._array=n.fromValues(e,t,r,i),this._dirty=!0};return r.prototype={constructor:r,get x(){return this._array[0]},set x(e){this._array[0]=e,this._dirty=!0},get y(){return this._array[1]},set y(e){this._array[1]=e,this._dirty=!0},get z(){return this._array[2]},set z(e){this._array[2]=e,this._dirty=!0},get w(){return this._array[3]},set w(e){this._array[3]=e,this._dirty=!0},add:function(e){return n.add(this._array,this._array,e._array),this._dirty=!0,this},calculateW:function(){return n.calculateW(this._array,this._array),this._dirty=!0,this},set:function(e,t,n,r){return this._array[0]=e,this._array[1]=t,this._array[2]=n,this._array[3]=r,this._dirty=!0,this},setArray:function(e){return this._array[0]=e[0],this._array[1]=e[1],this._array[2]=e[2],this._array[3]=e[3],this._dirty=!0,this},clone:function(){return new r(this.x,this.y,this.z,this.w)},conjugate:function(){return n.conjugate(this._array,this._array),this._dirty=!0,this},copy:function(e){return n.copy(this._array,e._array),this._dirty=!0,this},dot:function(e){return n.dot(this._array,e._array)},fromMat3:function(e){return n.fromMat3(this._array,e._array),this._dirty=!0,this},fromMat4:function(){var e=t.mat3,r=e.create();return function(t){return e.fromMat4(r,t._array),e.transpose(r,r),n.fromMat3(this._array,r),this._dirty=!0,this}}(),identity:function(){return n.identity(this._array),this._dirty=!0,this},invert:function(){return n.invert(this._array,this._array),this._dirty=!0,this},len:function(){return n.len(this._array)},length:function(){return n.length(this._array)},lerp:function(e,t,r){return n.lerp(this._array,e._array,t._array,r),this._dirty=!0,this},mul:function(e){return n.mul(this._array,this._array,e._array),this._dirty=!0,this},mulLeft:function(e){return n.multiply(this._array,e._array,this._array),this._dirty=!0,this},multiply:function(e){return n.multiply(this._array,this._array,e._array),this._dirty=!0,this},multiplyLeft:function(e){return n.multiply(this._array,e._array,this._array),this._dirty=!0,this},normalize:function(){return n.normalize(this._array,this._array),this._dirty=!0,this},rotateX:function(e){return n.rotateX(this._array,this._array,e),this._dirty=!0,this},rotateY:function(e){return n.rotateY(this._array,this._array,e),this._dirty=!0,this},rotateZ:function(e){return n.rotateZ(this._array,this._array,e),this._dirty=!0,this},rotationTo:function(e,t){return n.rotationTo(this._array,e._array,t._array),this._dirty=!0,this},setAxes:function(e,t,r){return n.setAxes(this._array,e._array,t._array,r._array),this._dirty=!0,this},setAxisAngle:function(e,t){return n.setAxisAngle(this._array,e._array,t),this._dirty=!0,this},slerp:function(e,t,r){return n.slerp(this._array,e._array,t._array,r),this._dirty=!0,this},sqrLen:function(){return n.sqrLen(this._array)},squaredLength:function(){return n.squaredLength(this._array)},setFromEuler:function(e){},toString:function(){return"["+Array.prototype.join.call(this._array,",")+"]"}},r.add=function(e,t,r){return n.add(e._array,t._array,r._array),e._dirty=!0,e},r.set=function(e,t,r,i,s){n.set(e._array,t,r,i,s),e._dirty=!0},r.copy=function(e,t){return n.copy(e._array,t._array),e._dirty=!0,e},r.calculateW=function(e,t){return n.calculateW(e._array,t._array),e._dirty=!0,e},r.conjugate=function(e,t){return n.conjugate(e._array,t._array),e._dirty=!0,e},r.identity=function(e){return n.identity(e._array),e._dirty=!0,e},r.invert=function(e,t){return n.invert(e._array,t._array),e._dirty=!0,e},r.dot=function(e,t){return n.dot(e._array,t._array)},r.len=function(e){return n.length(e._array)},r.lerp=function(e,t,r,i){return n.lerp(e._array,t._array,r._array,i),e._dirty=!0,e},r.slerp=function(e,t,r,i){return n.slerp(e._array,t._array,r._array,i),e._dirty=!0,e},r.mul=function(e,t,r){return n.multiply(e._array,t._array,r._array),e._dirty=!0,e},r.multiply=r.mul,r.rotateX=function(e,t,r){return n.rotateX(e._array,t._array,r),e._dirty=!0,e},r.rotateY=function(e,t,r){return n.rotateY(e._array,t._array,r),e._dirty=!0,e},r.rotateZ=function(e,t,r){return n.rotateZ(e._array,t._array,r),e._dirty=!0,e},r.setAxisAngle=function(e,t,r){return n.setAxisAngle(e._array,t._array,r),e._dirty=!0,e},r.normalize=function(e,t){return n.normalize(e._array,t._array),e._dirty=!0,e},r.sqrLen=function(e){return n.sqrLen(e._array)},r.squaredLength=r.sqrLen,r.fromMat3=function(e,t){return n.fromMat3(e._array,t._array),e._dirty=!0,e},r.setAxes=function(e,t,r,i){return n.setAxes(e._array,t._array,r._array,i._array),e._dirty=!0,e},r.rotationTo=function(e,t,r){return n.rotationTo(e._array,t._array,r._array),e._dirty=!0,e},r}),define("qtek/Node",["require","./core/Base","./math/Vector3","./math/Quaternion","./math/Matrix4","glmatrix"],function(e){var t=e("./core/Base"),n=e("./math/Vector3"),r=e("./math/Quaternion"),i=e("./math/Matrix4"),s=e("glmatrix"),o=s.mat4,u=0,a=t.derive({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,parent:null,scene:null,autoUpdateLocalTransform:!0,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name="NODE_"+u++),this.position||(this.position=new n),this.rotation||(this.rotation=new r),this.scale||(this.scale=new n(1,1,1)),this.worldTransform=new i,this.localTransform=new i,this._children=[]},{visible:!0,isRenderable:function(){return!1},setName:function(e){this.scene&&(delete this.scene._nodeRepository[this.name],this.scene._nodeRepository[e]=this),this.name=e},add:function(e){this._inIterating&&console.warn("Add operation can cause unpredictable error when in iterating");if(e.parent===this)return;e.parent&&e.parent.remove(e),e.parent=this,this._children.push(e),this.scene&&this.scene!==e.scene&&e.traverse(this._addSelfToScene,this)},remove:function(e){this._inIterating&&console.warn("Remove operation can cause unpredictable error when in iterating");var t=this._children.indexOf(e);if(t<0)return;this._children.splice(t,1),e.parent=null,this.scene&&e.traverse(this._removeSelfFromScene,this)},_removeSelfFromScene:function(e){e.scene.removeFromScene(e),e.scene=null},_addSelfToScene:function(e,t){t.scene.addToScene(e),e.scene=t.scene},isAncestor:function(e){var t=e.parent;while(t){if(t===this)return!0;t=t.parent}return!1},children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},getChildByName:function(e){for(var t=0;t<this._children.length;t++)if(this._children[t].name===e)return this._children[t]},getDescendantByName:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];if(n.name===e)return n;var r=n.getDescendantByName(e);if(r)return r}},traverse:function(e,t,n){this._inIterating=!0,(n===undefined||this.constructor===n)&&e(this,t);var r=this._children;for(var i=0,s=r.length;i<s;i++)r[i].traverse(e,this,n);this._inIterating=!1},setLocalTransform:function(e){o.copy(this.localTransform._array,e._array),this.decomposeLocalTransform()},decomposeLocalTransform:function(){this.localTransform.decomposeMatrix(this.scale,this.rotation,this.position)},setWorldTransform:function(e){o.copy(this.worldTransform._array,e._array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var e=o.create();return function(t){this.parent?(o.invert(e,this.parent.worldTransform._array),o.multiply(this.localTransform._array,e,this.worldTransform._array)):o.copy(this.localTransform._array,t._array),this.localTransform.decomposeMatrix(this.scale,this.rotation,this.position)}}(),updateLocalTransform:function(){var e=this.position,t=this.rotation,n=this.scale;if(e._dirty||n._dirty||t._dirty){var r=this.localTransform._array;o.fromRotationTranslation(r,t._array,e._array),o.scale(r,r,n._array),t._dirty=!1,n._dirty=!1,e._dirty=!1,this._needsUpdateWorldTransform=!0}},updateWorldTransform:function(){this.parent?o.multiply(this.worldTransform._array,this.parent.worldTransform._array,this.localTransform._array):o.copy(this.worldTransform._array,this.localTransform._array)},update:function(e){this.autoUpdateLocalTransform?this.updateLocalTransform():e=!0;if(e||this._needsUpdateWorldTransform)this.updateWorldTransform(),e=!0,this._needsUpdateWorldTransform=!1;for(var t=0,n=this._children.length;t<n;t++)this._children[t].update(e)},getWorldPosition:function(e){var t=this.worldTransform._array;return e?(e._array[0]=t[12],e._array[1]=t[13],e._array[2]=t[14],e):new n(t[12],t[13],t[14])},clone:function(){var e=new this.constructor;e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var t=0;t<this._children.length;t++)e.add(this._children[t].clone());return e},rotateAround:function(){var e=new n,t=new i;return function(n,r,i){e.copy(this.position).subtract(n),this.localTransform.identity(),this.localTransform.translate(n),this.localTransform.rotate(i,r),t.fromRotationTranslation(this.rotation,e),this.localTransform.multiply(t),this.localTransform.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var e=new i,t=new n;return function(n,r){e.lookAt(this.position,n,r||this.localTransform.up).invert(),e.decomposeMatrix(t,this.rotation,this.position)}}()});return a}),define("qtek/Renderable",["require","./Node","./core/glenum"],function(e){function a(e,t,n){this.availableAttributes=e,this.availableAttributeSymbols=t,this.indicesBuffer=n,this.vao=null}var t=e("./Node"),n=e("./core/glenum"),r=0,i=null,s=!0,o,u=function(){this.faceNumber=0,this.vertexNumber=0,this.drawCallNumber=0},f=t.derive({material:null,geometry:null,mode:n.TRIANGLES,_drawCache:null,_renderInfo:null},function(){this._drawCache={},this._renderInfo=new u},{lineWidth:1,culling:!0,cullFace:n.BACK,frontFace:n.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&this.visible},render:function(e,t){var u=t||this.material,f=u.shader,l=this.geometry,c=this.mode,h=null,p=l.hint==n.STATIC_DRAW,d=l.getVertexNumber(),v=l.isUseFace(),m=this._renderInfo;m.vertexNumber=d,m.faceNumber=0,m.drawCallNumber=0;var g=!1;o=e.__GLID__+"-"+l.__GUID__+"-"+f.__GUID__,d>l.chunkSize&&v||h&&p?g=!0:l._cache.isDirty()?g=!0:o!==r&&(g=!0),g=!0,r=o;if(!g)s?(e.drawElements(c,i.count,e.UNSIGNED_SHORT,0),m.faceNumber=i.count/3):e.drawArrays(c,0,d),m.drawCallNumber=1;else{var y=this._drawCache[o];if(!y){var b=l.getBufferChunks(e);if(!b)return;y=[];for(var w=0;w<b.length;w++){var E=b[w],S=E.attributeBuffers,x=E.indicesBuffer,T=[],N=[];for(var C=0;C<S.length;C++){var k=S[C],L=k.name,A=k.semantic,O;if(A){var M=f.attribSemantics[A];O=M&&M.symbol}else O=L;O&&f.attributeTemplates[O]&&(T.push(k),N.push(O))}var _=new a(T,N,x);y.push(_)}p&&(this._drawCache[o]=y)}for(var D=0;D<y.length;D++){var _=y[D],P=!0;h&&p&&(_.vao==null?_.vao=h.createVertexArrayOES():P=!1,h.bindVertexArrayOES(_.vao));var T=_.availableAttributes,N=_.availableAttributeSymbols,x=_.indicesBuffer;if(P){var H=f.enableAttributes(e,_.availableAttributeSymbols);for(var C=0;C<T.length;C++){var B=H[C];if(B===-1)continue;var k=T[C],j=k.buffer,F=k.size,I;switch(k.type){case"float":I=e.FLOAT;break;case"byte":I=e.BYTE;break;case"ubyte":I=e.UNSIGNED_BYTE;break;case"short":I=e.SHORT;break;case"ushort":I=e.UNSIGNED_SHORT;break;default:I=e.FLOAT}e.bindBuffer(e.ARRAY_BUFFER,j),e.vertexAttribPointer(B,F,I,!1,0,0),h&&p&&e.enableVertexAttribArray(B)}}(c==n.LINES||c==n.LINE_STRIP||c==n.LINE_LOOP)&&e.lineWidth(this.lineWidth),i=x,s=l.isUseFace(),s?(P&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,x.buffer),e.drawElements(c,x.count,e.UNSIGNED_SHORT,0),m.faceNumber+=x.count/3):e.drawArrays(c,0,d),h&&p&&h.bindVertexArrayOES(null),m.drawCallNumber++}}return m},clone:function(){var e=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling"];return function(){var n=t.prototype.clone.call(this);n.geometry=this.geometry,n.material=this.material;for(var r=0;r<e.length;r++){var i=e[r];n[i]!==this[i]&&(n[i]=this[i])}return n}}()});return f.beforeFrame=function(){r=0},f.POINTS=n.POINTS,f.LINES=n.LINES,f.LINE_LOOP=n.LINE_LOOP,f.LINE_STRIP=n.LINE_STRIP,f.TRIANGLES=n.TRIANGLES,f.TRIANGLE_STRIP=n.TRIANGLE_STRIP,f.TRIANGLE_FAN=n.TRIANGLE_FAN,f.BACK=n.BACK,f.FRONT=n.FRONT,f.FRONT_AND_BACK=n.FRONT_AND_BACK,f.CW=n.CW,f.CCW=n.CCW,f.RenderInfo=u,f}),define("qtek/Geometry",["require","./core/Base","./core/glenum","./core/Cache"],function(e){function i(e,t,n,r,i){this.name=e,this.type=t,this.size=n,r&&(this.semantic=r),i?(this._isDynamic=!0,this.value=[]):(this._isDynamic=!1,this.value=null)}function s(e,t,n,r,i){this.name=e,this.type=t,this.buffer=n,this.size=r,this.semantic=i,this.symbol=""}function o(e,t){this.buffer=e,this.count=t}function u(){console.warn("Geometry doesn't implement this method, use DynamicGeometry or StaticGeometry instead")}var t=e("./core/Base"),n=e("./core/glenum"),r=e("./core/Cache");i.prototype.init=function(e){if(!this._isDynamic){if(!this.value||this.value.length!=e*this.size){var t;switch(this.type){case"byte":t=Int8Array;break;case"ubyte":t=Uint8Array;break;case"short":t=Int16Array;break;case"ushort":t=Uint16Array;break;default:t=Float32Array}this.value=new t(e*this.size)}}else console.warn("Dynamic geometry not support init method")},i.prototype.clone=function(e){var t=new i(this.name,this.type,this.size,this.semantic,this._isDynamic);return e&&console.warn("todo"),t};var a=t.derive({boundingBox:null,attributes:{},faces:null,useFace:!0,chunkSize:65535},function(){this._cache=new r,this._attributeList=Object.keys(this.attributes)},{dirty:u,createAttribute:u,removeAttribute:u,getVertexNumber:u,getFaceNumber:u,isUseFace:u,isStatic:u,getEnabledAttributes:u,getBufferChunks:u,generateVertexNormals:u,generateFaceNormals:u,isUniqueVertex:u,generateUniqueVertex:u,generateTangents:u,generateBarycentric:u,applyTransform:u,dispose:u});return a.STATIC_DRAW=n.STATIC_DRAW,a.DYNAMIC_DRAW=n.DYNAMIC_DRAW,a.STREAM_DRAW=n.STREAM_DRAW,a.AttributeBuffer=s,a.IndicesBuffer=o,a.Attribute=i,a}),define("qtek/StaticGeometry",["require","./Geometry","./core/util","./math/BoundingBox","glmatrix","./core/glenum"],function(e){var t=e("./Geometry"),n=e("./core/util"),r=e("./math/BoundingBox"),i=e("glmatrix"),s=e("./core/glenum"),o=i.mat4,u=i.vec3,a=t.derive(function(){return{attributes:{position:new t.Attribute("position","float",3,"POSITION",!1),texcoord0:new t.Attribute("texcoord0","float",2,"TEXCOORD_0",!1),texcoord1:new t.Attribute("texcoord1","float",2,"TEXCOORD_1",!1),normal:new t.Attribute("normal","float",3,"NORMAL",!1),tangent:new t.Attribute("tangent","float",4,"TANGENT",!1),color:new t.Attribute("color","float",4,"COLOR",!1),weight:new t.Attribute("weight","float",3,"WEIGHT",!1),joint:new t.Attribute("joint","float",4,"JOINT",!1),barycentric:new t.Attribute("barycentric","float",3,null,!1)},hint:s.STATIC_DRAW,faces:null,_normalType:"vertex",_enabledAttributes:null}},{dirty:function(){this._cache.dirtyAll(),this._enabledAttributes=null},getVertexNumber:function(){return this.attributes.position.value?this.attributes.position.value.length/3:0},getFaceNumber:function(){return this.faces.length/3},isUseFace:function(){return this.useFace&&this.faces!=null},isStatic:function(){return!0},createAttribute:function(e,n,r,i){var s=new t.Attribute(e,n,r,i,!1);return this.attributes[e]=s,this._attributeList.push(e),s},removeAttribute:function(e){var t=this._attributeList.indexOf(e);return t>=0?(this._attributeList.splice(t,1),delete this.attributes[e],!0):!1},getEnabledAttributes:function(){if(this._enabledAttributes)return this._enabledAttributes;var e=[],t=this.getVertexNumber();for(var n=0;n<this._attributeList.length;n++){var r=this._attributeList[n],i=this.attributes[r];i.value&&i.value.length===t*i.size&&e.push(r)}return this._enabledAttributes=e,e},getBufferChunks:function(e){return this._cache.use(e.__GLID__),this._cache.isDirty()&&(this._updateBuffer(e),this._cache.fresh()),this._cache.get("chunks")},_updateBuffer:function(e){var n=this._cache.get("chunks"),r=!1;n||(n=[],n[0]={attributeBuffers:[],indicesBuffer:null},this._cache.put("chunks",n),r=!0);var i=n[0],s=i.attributeBuffers,o=i.indicesBuffer,u=this.getEnabledAttributes(),a=0,f=0;for(var l=0;l<u.length;l++){var c=u[l],h=this.attributes[c],p;if(!r){for(var d=a;d<s.length;d++)if(s[d].name===c){p=s[d],a=d+1;break}if(!p)for(var d=a-1;d>=0;d--)if(s[d].name===c){p=s[d],a=d;break}}var v;p?v=p.buffer:v=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,v),e.bufferData(e.ARRAY_BUFFER,h.value,this.hint),s[f++]=new t.AttributeBuffer(c,h.type,v,h.size,h.semantic)}s.length=f,!o&&this.isUseFace()&&(o=new t.IndicesBuffer(e.createBuffer(),this.faces.length),i.indicesBuffer=o,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.faces,this.hint))},generateVertexNormals:function(){var e=this.faces,t=this.attributes.position.value,n=this.attributes.normal.value;if(!n||n.length!==t.length)n=this.attributes.normal.value=new Float32Array(t.length);else for(var r=0;r<n.length;r++)n[r]=0;var i=u.create(),s=u.create(),o=u.create(),a=u.create(),f=u.create(),l=u.create();for(var c=0;c<e.length;){var h=e[c++],p=e[c++],d=e[c++];u.set(i,t[h*3],t[h*3+1],t[h*3+2]),u.set(s,t[p*3],t[p*3+1],t[p*3+2]),u.set(o,t[d*3],t[d*3+1],t[d*3+2]),u.sub(a,i,s),u.sub(f,s,o),u.cross(l,a,f);for(var r=0;r<3;r++)n[h*3+r]=n[h*3+r]+l[r],n[p*3+r]=n[p*3+r]+l[r],n[d*3+r]=n[d*3+r]+l[r]}for(var r=0;r<n.length;)u.set(l,n[r],n[r+1],n[r+2]),u.normalize(l,l),n[r++]=l[0],n[r++]=l[1],n[r++]=l[2]},generateFaceNormals:function(){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.faces,t=this.attributes.position.value,n=this.attributes.normal.value,r=u.create(),i=u.create(),s=u.create(),o=u.create(),a=u.create(),f=u.create();n||(n=this.attributes.position.value=new Float32Array(t.length));for(var l=0;l<e.length;){var c=e[l++],h=e[l++],p=e[l++];u.set(r,t[c*3],t[c*3+1],t[c*3+2]),u.set(i,t[h*3],t[h*3+1],t[h*3+2]),u.set(s,t[p*3],t[p*3+1],t[p*3+2]),u.sub(o,r,i),u.sub(a,i,s),u.cross(f,o,a),u.normalize(f,f);for(var d=0;d<3;d++)n[c*3+d]=f[d],n[h*3+d]=f[d],n[p*3+d]=f[d]}},generateTangents:function(){var e=this.getVertexNumber();this.attributes.tangent.value||(this.attributes.tangent.value=new Float32Array(e*4));var t=this.attributes.texcoord0.value,n=this.attributes.position.value,r=this.attributes.tangent.value,i=this.attributes.normal.value,s=[],o=[];for(var a=0;a<e;a++)s[a]=[0,0,0],o[a]=[0,0,0];var f=[0,0,0],l=[0,0,0];for(var a=0;a<this.faces.length;){var c=this.faces[a++],h=this.faces[a++],p=this.faces[a++],d=t[c*2],v=t[h*2],m=t[p*2],g=t[c*2+1],y=t[h*2+1],b=t[p*2+1],w=n[c*3],E=n[h*3],S=n[p*3],x=n[c*3+1],T=n[h*3+1],N=n[p*3+1],C=n[c*3+2],k=n[h*3+2],L=n[p*3+2],A=E-w,O=S-w,M=T-x,_=N-x,D=k-C,P=L-C,H=v-d,B=m-d,j=y-g,F=b-g,I=1/(H*F-j*B);f[0]=(F*A-j*O)*I,f[1]=(F*M-j*_)*I,f[2]=(F*D-j*P)*I,l[0]=(H*O-B*A)*I,l[1]=(H*_-B*M)*I,l[2]=(H*P-B*D)*I,u.add(s[c],s[c],f),u.add(s[h],s[h],f),u.add(s[p],s[p],f),u.add(o[c],o[c],l),u.add(o[h],o[h],l),u.add(o[p],o[p],l)}var q=u.create(),R=u.create(),U=u.create();for(var a=0;a<e;a++){U[0]=i[a*3],U[1]=i[a*3+1],U[2]=i[a*3+2];var z=s[a];u.scale(q,U,u.dot(U,z)),u.sub(q,z,q),u.normalize(q,q),u.cross(R,U,z),r[a*4]=q[0],r[a*4+1]=q[1],r[a*4+2]=q[2],r[a*4+3]=u.dot(R,o[a])<0?-1:1}},isUniqueVertex:function(){return this.isUseFace()?this.getVertexNumber()===this.faces.length:!0},generateUniqueVertex:function(){var e=[];for(var t=0,n=this.getVertexNumber();t<n;t++)e[t]=0;var r=this.getVertexNumber(),i=this.attributes,s=this.faces,o=this.getEnabledAttributes();for(var u=0;u<o.length;u++){var a=o[u],f=new Float32Array(this.faces.length*i[a].size),n=i[a].value.length;for(var t=0;t<n;t++)f[t]=i[a].value[t];i[a].value=f}for(var t=0;t<s.length;t++){var l=s[t];if(e[l]>0){for(var u=0;u<o.length;u++){var a=o[u],c=i[a].value,h=i[a].size;for(var p=0;p<h;p++)c[r*h+p]=c[l*h+p]}s[t]=r,r++}e[l]++}},generateBarycentric:function(){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.attributes.barycentric.value;if(e&&e.length===this.faces.length*3)return;e=this.attributes.barycentric.value=new Float32Array(this.faces.length*3);for(var t=0;t<this.faces.length;)for(var n=0;n<3;n++){var r=this.faces[t++];e[r+n]=1}},convertToDynamic:function(e){for(var t=0;t<this.faces.length;t+=3)e.faces.push(this.face.subarray(t,t+3));var n=this.getEnabledAttributes();for(var i in n){var s=n[i],o=e.attributes[i];o||(o=e.attributes[i]={type:s.type,size:s.size,value:[]},s.semantic&&(o.semantic=s.semantic));for(var t=0;t<s.value.length;t+=s.size)s.size===1?o.value.push(s.array[t]):o.value.push(s.subarray(t,t+s.size))}return this.boundingBox&&(e.boundingBox=new r,e.boundingBox.min.copy(this.boundingBox.min),e.boundingBox.max.copy(this.boundingBox.max)),e},applyTransform:function(e){this.boundingBox&&this.boundingBox.applyTransform(e);var t=this.attributes.position.value,n=this.attributes.normal.value,r=this.attributes.tangent.value;e=e._array;var i=o.create();o.invert(i,e),o.transpose(i,i),u.forEach(t,3,0,null,u.transformMat4,e),n&&u.forEach(n,3,0,null,u.transformMat4,i),r&&u.forEach(r,4,0,null,u.transformMat4,i)},dispose:function(e){this._cache.use(e.__GLID__);var t=this._cache.get("chunks");if(t)for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<r.attributeBuffers.length;i++){var s=r.attributeBuffers[i];e.deleteBuffer(s.buffer)}}this._cache.deleteContext(e.__GLID__)}});return a}),define("qtek/particleSystem/particle.essl",[],function(){return"@export buildin.particle.vertex\n\nuniform mat4 worldView : WORLDVIEW;\nuniform mat4 projection : PROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec3 normal : NORMAL;\n\n#ifdef UV_ANIMATION\nattribute vec2 texcoord0 : TEXCOORD_0;\nattribute vec2 texcoord1 : TEXCOORD_1;\n\nvarying vec2 v_Uv0;\nvarying vec2 v_Uv1;\n#endif\n\nvarying float v_Age;\n\nvoid main() {\n    v_Age = normal.x;\n    float rotation = normal.y;\n\n    vec4 worldViewPosition = worldView * vec4(position, 1.0);\n    gl_Position = projection * worldViewPosition;\n    float w = gl_Position.w;\n    // TODO\n    gl_PointSize = normal.z * projection[0].x / w;\n\n    #ifdef UV_ANIMATION\n        v_Uv0 = texcoord0;\n        v_Uv1 = texcoord1;\n    #endif\n}\n\n@end\n\n@export buildin.particle.fragment\n\nuniform sampler2D sprite;\nuniform sampler2D gradient;\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\n\nvarying float v_Age;\n\n#ifdef UV_ANIMATION\nvarying vec2 v_Uv0;\nvarying vec2 v_Uv1;\n#endif\n\nvoid main() {\n    vec4 color = vec4(color, alpha);\n    #ifdef SPRITE_ENABLED\n        #ifdef UV_ANIMATION\n            color *= texture2D(sprite, mix(v_Uv0, v_Uv1, gl_PointCoord));\n        #else\n            color *= texture2D(sprite, gl_PointCoord);\n        #endif\n    #endif\n    #ifdef GRADIENT_ENABLED\n        color *= texture2D(gradient, vec2(v_Age, 0.5));\n    #endif\n    gl_FragColor = color;\n}\n\n@end"}),define("qtek/particleSystem/ParticleRenderable",["require","../Renderable","../math/Vector3","../core/glenum","../StaticGeometry","../Material","../Shader","glmatrix","./particle.essl"],function(e){var t=e("../Renderable"),n=e("../math/Vector3"),r=e("../core/glenum"),i=e("../StaticGeometry"),s=e("../Material"),o=e("../Shader"),u=e("glmatrix"),a=u.vec3;o["import"](e("./particle.essl"));var f=new o({vertex:o.source("buildin.particle.vertex"),fragment:o.source("buildin.particle.fragment")});f.enableTexture("sprite");var l=t.derive({loop:!0,oneshot:!1,duration:1,spriteAnimationTileX:1,spriteAnimationTileY:1,spriteAnimationRepeat:0,mode:t.POINTS,_elapsedTime:0,_emitting:!0},function(){this.geometry=new i({hint:r.DYNAMIC_DRAW}),this.material||(this.material=new s({shader:f,transparent:!0,depthMask:!1})),this._particles=[],this._fields=[],this._emitters=[]},{culling:!1,frustumCulling:!1,castShadow:!1,receiveShadow:!1,addEmitter:function(e){this._emitters.push(e)},removeEmitter:function(e){this._emitters.splice(this._emitters.indexOf(e),1)},addField:function(e){this._fields.push(e)},removeField:function(e){this._fields.splice(this._fields.indexOf(e),1)},reset:function(){for(var e=0;e<this._particles.length;e++){var t=this._particles[e];t.emitter.kill(t)}this._particles.length=0,this._elapsedTime=0,this._emitting=!0},updateParticles:function(e){e/=1e3,this._elapsedTime+=e;var t=this._particles;if(this._emitting){for(var n=0;n<this._emitters.length;n++)this._emitters[n].emit(t);this.oneshot&&(this._emitting=!1)}var r=t.length;for(var n=0;n<r;){var i=t[n];i.age+=e,i.age>=i.life?(i.emitter.kill(i),t[n]=t[r-1],t.pop(),r--):n++}for(var n=0;n<r;n++){var i=t[n];if(this._fields.length>0)for(var s=0;s<this._fields.length;s++)this._fields[s].applyTo(i.velocity,i.position,i.weight,e);i.update(e)}},_updateVertices:function(){var e=this._particles,t=this.geometry,n=this.spriteAnimationTileX,r=this.spriteAnimationTileY,i=this.spriteAnimationRepeat,s=r*n*i,o=s>1,u=t.attributes.position.value,a=t.attributes.normal.value,f=t.attributes.texcoord0.value,l=t.attributes.texcoord1.value,c=this._particles.length;if(!u||u.length!==c*3)u=t.attributes.position.value=new Float32Array(c*3),a=t.attributes.normal.value=new Float32Array(c*3),o&&(f=t.attributes.texcoord0.value=new Float32Array(c*2),l=t.attributes.texcoord1.value=new Float32Array(c*2));var h=1/n;for(var p=0;p<c;p++){var d=this._particles[p],v=p*3;for(var m=0;m<3;m++)u[v+m]=d.position._array[m],a[v]=d.age/d.life,a[v+1]=0,a[v+2]=d.spriteSize;var g=p*2;if(o){var y=d.age/d.life,b=Math.round(y*(s-1))*i,w=Math.floor(b*h),E=b-w*n;f[g]=E/n,f[g+1]=1-w/r,l[g]=(E+1)/n,l[g+1]=1-(w+1)/r}}t.dirty()},render:function(e){return this._updateVertices(),t.prototype.render.call(this,e)},isFinished:function(){return this._elapsedTime>this.duration&&!this.loop},dispose:function(e){for(var t=0;t<this._particles.length;t++){var n=this._particles[t];n.emitter.kill(n)}this.geometry.dispose(e)},clone:function(){var e=new l({material:this.material});e.loop=this.loop,e.duration=this.duration,e.oneshot=this.oneshot,e.spriteAnimationRepeat=this.spriteAnimationRepeat,e.spriteAnimationTileY=this.spriteAnimationTileY,e.spriteAnimationTileX=this.spriteAnimationTileX,e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var t=0;t<this._children.length;t++)e.add(this._children[t].clone());return e}});return l}),define("qtek/particleSystem/Particle",["require","../math/Vector3","glmatrix"],function(e){var t=e("../math/Vector3"),n=e("glmatrix"),r=n.vec3,i=function(){this.position=new t,this.rotation=new t,this.velocity=null,this.angularVelocity=null,this.life=1,this.age=0,this.spriteSize=1,this.weight=1,this.emitter=null};return i.prototype.update=function(e){this.velocity&&r.scaleAndAdd(this.position._array,this.position._array,this.velocity._array,e),this.angularVelocity&&r.scaleAndAdd(this.rotation._array,this.rotation._array,this.angularVelocity._array,e)},i}),define("qtek/math/Value",["require","./Vector3","./Vector2"],function(e){var t=e("./Vector3"),n=e("./Vector2"),r=function(){};r.prototype.get=function(e){};var i=function(e){this.get=function(){return e}};i.prototype=new r,i.prototype.constructor=i;var s=function(e){var t=e.constructor;this.get=function(n){return n||(n=new t),n.copy(e),n}};s.prototype=new r,s.prototype.constructor=s;var o=function(e,t){var n=t-e;this.get=function(){return Math.random()*n+e}};o.prototype=new r,o.prototype.constructor=o;var u=function(e,t){var r=t.x-e.x,i=t.y-e.y;this.get=function(t){return t||(t=new n),n.set(t,r*Math.random()+e._array[0],i*Math.random()+e._array[1]),t}};u.prototype=new r,u.prototype.constructor=u;var a=function(e,n){var r=n.x-e.x,i=n.y-e.y,s=n.z-e.z;this.get=function(n){return n||(n=new t),t.set(n,r*Math.random()+e._array[0],i*Math.random()+e._array[1],s*Math.random()+e._array[2]),n}};return a.prototype=new r,a.prototype.constructor=a,r.constant=function(e){return new i(e)},r.vector=function(e){return new s(e)},r.random1D=function(e,t){return new o(e,t)},r.random2D=function(e,t){return new u(e,t)},r.random3D=function(e,t){return new a(e,t)},r}),define("qtek/particleSystem/Emitter",["require","../core/Base","../math/Vector3","./Particle","../math/Value","glmatrix"],function(e){var t=e("../core/Base"),n=e("../math/Vector3"),r=e("./Particle"),i=e("../math/Value"),s=e("glmatrix"),o=s.vec3,u=t.derive({max:1e3,amount:20,life:null,position:null,rotation:null,velocity:null,angularVelocity:null,spriteSize:null,weight:null,_particlePool:null},function(){this._particlePool=[];for(var e=0;e<this.max;e++){var t=new r;t.emitter=this,this._particlePool.push(t),this.velocity&&(t.velocity=new n),this.angularVelocity&&(t.angularVelocity=new n)}},{emit:function(e){var t=Math.min(this._particlePool.length,this.amount),n;for(var r=0;r<t;r++)n=this._particlePool.pop(),this.position&&this.position.get(n.position),this.rotation&&this.rotation.get(n.rotation),this.velocity&&this.velocity.get(n.velocity),this.angularVelocity&&this.angularVelocity.get(n.angularVelocity),this.life&&(n.life=this.life.get()),this.spriteSize&&(n.spriteSize=this.spriteSize.get()),this.weight&&(n.weight=this.weight.get()),n.age=0,e.push(n)},kill:function(e){this._particlePool.push(e)}});return u.constant=i.constant,u.vector=i.vector,u.random1D=i.random1D,u.random2D=i.random2D,u.random3D=i.random3D,u}),define("qtek/math/Plane",["require","./Vector3","glmatrix"],function(e){var t=e("./Vector3"),n=e("glmatrix"),r=n.vec3,i=n.mat4,s=n.vec4,o=function(e,n){this.normal=e||new t(0,1,0),this.distance=n||0};return o.prototype={constructor:o,distanceToPoint:function(e){return r.dot(e._array,this.normal._array)-this.distance},projectPoint:function(e,n){n||(n=new t);var i=this.distanceToPoint(e);return r.scaleAndAdd(n._array,e._array,this.normal._array,-i),n._dirty=!0,n},normalize:function(){var e=1/r.len(this.normal._array);r.scale(this.normal._array,e),this.distance*=e},intersectFrustum:function(e){var t=e.vertices,n=this.normal._array,i=r.dot(t[0]._array,n)>this.distance;for(var s=1;s<8;s++)if(r.dot(t[s]._array,n)>this.distance!=i)return!0},intersectLine:function(){var e=r.create();return function(n,i,s){var o=this.distanceToPoint(n),u=this.distanceToPoint(i);if(o>0&&u>0||o<0&&u<0)return null;var a=this.normal._array,f=this.distance,l=n._array;r.sub(e,i._array,n._array),r.normalize(e,e);var c=r.dot(a,e);if(c==0)return null;s||(s=new t);var h=(r.dot(a,l)-f)/c;return r.scaleAndAdd(s._array,l,e,-h),s._dirty=!0,s}}(),applyTransform:function(){var e=i.create(),t=s.create(),n=s.create();return n[3]=1,function(o){o=o._array,r.scale(n,this.normal._array,this.distance),s.transformMat4(n,n,o),this.distance=r.dot(n,this.normal._array),i.invert(e,o),i.transpose(e,e),t[3]=0,r.copy(t,this.normal._array),s.transformMat4(t,t,e),r.copy(this.normal._array,t)}}(),copy:function(e){r.copy(this.normal._array,e.normal._array),this.normal._dirty=!0,this.distance=e.distance},clone:function(){var e=new o;return e.copy(this),e}},o}),define("qtek/math/Frustum",["require","./Vector3","./BoundingBox","./Plane","glmatrix"],function(e){var t=e("./Vector3"),n=e("./BoundingBox"),r=e("./Plane"),i=e("glmatrix"),s=i.vec3,o=function(){this.planes=[];for(var e=0;e<6;e++)this.planes.push(new r);this.boundingBox=new n,this.vertices=[];for(var e=0;e<8;e++)this.vertices[e]=s.fromValues(0,0,0)};return o.prototype={setFromProjection:function(e){var t=this.planes,n=e._array,r=n[0],i=n[1],o=n[2],u=n[3],a=n[4],f=n[5],l=n[6],c=n[7],h=n[8],p=n[9],d=n[10],v=n[11],m=n[12],g=n[13],y=n[14],b=n[15];s.set(t[0].normal._array,u-r,c-a,v-h),t[0].distance=-(b-m),t[0].normalize(),s.set(t[1].normal._array,u+r,c+a,v+h),t[1].distance=-(b+m),t[1].normalize(),s.set(t[2].normal._array,u+i,c+f,v+p),t[2].distance=-(b+g),t[2].normalize(),s.set(t[3].normal._array,u-i,c-f,v-p),t[3].distance=-(b-g),t[3].normalize(),s.set(t[4].normal._array,u-o,c-l,v-d),t[4].distance=-(b-y),t[4].normalize(),s.set(t[5].normal._array,u+o,c+l,v+d),t[5].distance=-(b+y),t[5].normalize();if(b===0){var w=f/r,E=-y/(d-1),S=-y/(d+1),x=-S/f,T=-E/f;this.boundingBox.min.set(-x*w,-x,S),this.boundingBox.max.set(x*w,x,E);var N=this.vertices;s.set(N[0],-x*w,-x,S),s.set(N[1],-x*w,x,S),s.set(N[2],x*w,-x,S),s.set(N[3],x*w,x,S),s.set(N[4],-T*w,-T,E),s.set(N[5],-T*w,T,E),s.set(N[6],T*w,-T,E),s.set(N[7],T*w,T,E)}else{var C=(-1-m)/r,k=(1-m)/r,L=(1-g)/f,A=(-1-g)/f,O=(-1-y)/d,M=(1-y)/d;this.boundingBox.min.set(C,A,M),this.boundingBox.max.set(k,L,O);for(var _=0;_<8;_++)s.copy(this.vertices[_],this.boundingBox.vertices[_])}},getTransformedBoundingBox:function(){var e=s.create();return function(t,n){var r=this.vertices,i=n._array,o=t.min._array,u=t.max._array,a=r[0];s.transformMat4(e,a,i),s.copy(o,e),s.copy(u,e);for(var f=1;f<8;f++)a=r[f],s.transformMat4(e,a,i),o[0]=Math.min(e[0],o[0]),o[1]=Math.min(e[1],o[1]),o[2]=Math.min(e[2],o[2]),u[0]=Math.max(e[0],u[0]),u[1]=Math.max(e[1],u[1]),u[2]=Math.max(e[2],u[2]);return t.min._dirty=!0,t.max._dirty=!0,t}}()},o}),define("qtek/math/Ray",["require","../core/Base","./Vector3","glmatrix"],function(e){var t=e("../core/Base"),n=e("./Vector3"),r=e("glmatrix"),i=r.vec3,s=1e-5,o=function(e,t){this.origin=e||new n,this.direction=t||new n};return o.prototype={constructor:o,intersectPlane:function(e,t){var r=e.normal._array,s=e.distance,o=this.origin._array,u=this.direction._array,a=i.dot(r,u);if(a==0)return null;t||(t=new n);var f=(i.dot(r,o)-s)/a;return i.scaleAndAdd(t._array,o,u,-f),t._dirty=!0,t},mirrorAgainstPlane:function(e){var t=i.dot(e.normal._array,this.direction._array);i.scaleAndAdd(this.direction._array,this.direction._array,e.normal._array,-t*2),this.direction_dirty=!0},intersectBoundingBox:function(e,t){var r=this.direction._array,s=this.origin._array,o=e.min._array,u=e.max._array,a=1/r[0],f=1/r[1],l=1/r[2],c,h,p,d,v,m;a>=0?(c=(o[0]-s[0])*a,h=(u[0]-s[0])*a):(h=(o[0]-s[0])*a,c=(u[0]-s[0])*a),f>=0?(p=(o[1]-s[1])*f,d=(u[1]-s[1])*f):(d=(o[1]-s[1])*f,p=(u[1]-s[1])*f);if(c>d||p>h)return null;if(p>c||c!==c)c=p;if(d<h||h!==h)h=d;l>=0?(v=(o[2]-s[2])*l,m=(u[2]-s[2])*l):(m=(o[2]-s[2])*l,v=(u[2]-s[2])*l);if(c>m||v>h)return null;if(v>c||c!==c)c=v;if(m<h||h!==h)h=m;if(h<0)return null;var g=c>=0?c:h;return t||(t=new n),i.scaleAndAdd(t._array,s,r,g),t},intersectTriangle:function(){var e=i.create(),t=i.create(),r=i.create(),o=i.create();return function(u,a,f,l,c){var h=this.direction._array,p=this.origin._array;u=u._array,a=a._array,f=f._array,i.sub(e,a,u),i.sub(t,f,u),i.cross(o,t,h);var d=i.dot(e,o);if(l){if(d>-s)return null}else if(d>-s&&d<s)return null;i.sub(r,p,u);var v=i.dot(o,r)/d;if(v<0||v>1)return null;i.cross(o,e,r);var m=i.dot(h,o)/d;if(m<0||m>1||v+m>1)return null;i.cross(o,e,t);var g=-i.dot(r,o)/d;return g<0?null:(c||(c=new n),i.scaleAndAdd(c._array,p,h,g),c)}}(),applyTransform:function(e){n.add(this.direction,this.direction,this.origin),n.transformMat4(this.origin,this.origin,e),n.transformMat4(this.direction,this.direction,e),n.sub(this.direction,this.direction,this.origin),n.normalize(this.direction,this.direction)},copy:function(e){n.copy(this.origin,e.origin),n.copy(this.direction,e.direction)},clone:function(){var e=new o;return e.copy(this),e}},o}),define("qtek/Camera",["require","./Node","./math/Matrix4","./math/Frustum","./math/BoundingBox","./math/Ray","glmatrix"],function(e){var t=e("./Node"),n=e("./math/Matrix4"),r=e("./math/Frustum"),i=e("./math/BoundingBox"),s=e("./math/Ray"),o=e("glmatrix"),u=o.mat4,a=o.vec3,f=o.vec4,l=t.derive(function(){return{projectionMatrix:new n,invProjectionMatrix:new n,viewMatrix:new n,frustum:new r,sceneBoundingBoxLastFrame:new i}},function(){this.update(!0)},{update:function(e){t.prototype.update.call(this,e),u.invert(this.viewMatrix._array,this.worldTransform._array),this.updateProjectionMatrix(),u.invert(this.invProjectionMatrix._array,this.projectionMatrix._array),this.frustum.setFromProjection(this.projectionMatrix)},updateProjectionMatrix:function(){},castRay:function(){var e=f.create();return function(t,n){var r=n!==undefined?n:new s,i=t._array[0],o=t._array[1];return f.set(e,i,o,-1,1),f.transformMat4(e,e,this.invProjectionMatrix._array),f.transformMat4(e,e,this.worldTransform._array),a.scale(r.origin._array,e,1/e[3]),f.set(e,i,o,1,1),f.transformMat4(e,e,this.invProjectionMatrix._array),f.transformMat4(e,e,this.worldTransform._array),a.scale(e,e,1/e[3]),a.sub(r.direction._array,e,r.origin._array),a.normalize(r.direction._array,r.direction._array),r.direction._dirty=!0,r.origin._dirty=!0,r}}()});return l}),define("qtek/camera/Perspective",["require","../Camera"],function(e){var t=e("../Camera"),n=t.derive({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},clone:function(){var e=t.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}});return n}),define("qtek/light/light.essl",[],function(){return"@export buildin.header.directional_light\nuniform vec3 directionalLightDirection[ DIRECTIONAL_LIGHT_NUMBER ] : unconfigurable;\nuniform vec3 directionalLightColor[ DIRECTIONAL_LIGHT_NUMBER ] : unconfigurable;\n@end\n\n@export buildin.header.ambient_light\nuniform vec3 ambientLightColor[ AMBIENT_LIGHT_NUMBER ] : unconfigurable;\n@end\n\n@export buildin.header.point_light\nuniform vec3 pointLightPosition[ POINT_LIGHT_NUMBER ] : unconfigurable;\nuniform float pointLightRange[ POINT_LIGHT_NUMBER ] : unconfigurable;\nuniform vec3 pointLightColor[ POINT_LIGHT_NUMBER ] : unconfigurable;\n@end\n\n@export buildin.header.spot_light\nuniform vec3 spotLightPosition[SPOT_LIGHT_NUMBER] : unconfigurable;\nuniform vec3 spotLightDirection[SPOT_LIGHT_NUMBER] : unconfigurable;\nuniform float spotLightRange[SPOT_LIGHT_NUMBER] : unconfigurable;\nuniform float spotLightUmbraAngleCosine[SPOT_LIGHT_NUMBER] : unconfigurable;\nuniform float spotLightPenumbraAngleCosine[SPOT_LIGHT_NUMBER] : unconfigurable;\nuniform float spotLightFalloffFactor[SPOT_LIGHT_NUMBER] : unconfigurable;\nuniform vec3 spotLightColor[SPOT_LIGHT_NUMBER] : unconfigurable;\n@end"}),define("qtek/Light",["require","./Node","./Shader","./light/light.essl"],function(e){var t=e("./Node"),n=e("./Shader"),r=t.derive(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512}},{type:"",clone:function(){var e=t.prototype.clone.call(this);return e.color=Array.prototype.slice.call(this.color),e.intensity=this.intensity,e.castShadow=this.castShadow,e.shadowResolution=this.shadowResolution,e}});return n["import"](e("./light/light.essl")),r}),define("qtek/Scene",["require","./Node","./Light"],function(e){function i(e,t){if(t.castShadow&&!e.castShadow)return!0}var t=e("./Node"),n=e("./Light"),r=t.derive(function(){return{material:null,autoUpdate:!0,opaqueQueue:[],transparentQueue:[],lights:[],_lightUniforms:{},_lightNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0,AMBIENT_LIGHT:0},_opaqueObjectCount:0,_transparentObjectCount:0,_nodeRepository:{}}},function(){this.scene=this},{addToScene:function(e){e.name&&(this._nodeRepository[e.name]=e)},removeFromScene:function(e){e.name&&delete this._nodeRepository[e.name]},getNode:function(e){return this._nodeRepository[e]},update:function(e){if(!this.autoUpdate&&!e)return;t.prototype.update.call(this,e);var n=this.lights,r=this.material&&this.material.transparent;this._opaqueObjectCount=0,this._transparentObjectCount=0,n.length=0,this._updateRenderQueue(this,r),this.opaqueQueue.length=this._opaqueObjectCount,this.transparentQueue.length=this._transparentObjectCount;for(var i in this._lightNumber)this._lightNumber[i]=0;for(var s=0;s<n.length;s++){var o=n[s];this._lightNumber[o.type]++}this._updateLightUniforms()},_updateRenderQueue:function(e,t){if(!e.visible)return;for(var r=0;r<e._children.length;r++){var i=e._children[r];i instanceof n&&this.lights.push(i),i.isRenderable()&&(i.material.transparent||t?this.transparentQueue[this._transparentObjectCount++]=i:this.opaqueQueue[this._opaqueObjectCount++]=i),i._children.length>0&&this._updateRenderQueue(i)}},_updateLightUniforms:function(){var e=this.lights;e.sort(i);var t=this._lightUniforms;for(var n in t)t[n].value.length=0;for(var r=0;r<e.length;r++){var s=e[r];for(n in s.uniformTemplates){var o=s.uniformTemplates[n];t[n]||(t[n]={type:"",value:[]});var u=o.value(s),a=t[n];a.type=o.type+"v";switch(o.type){case"1i":case"1f":a.value.push(u);break;case"2f":case"3f":case"4f":for(var f=0;f<u.length;f++)a.value.push(u[f]);break;default:console.error("Unkown light uniform type "+o.type)}}}},isShaderLightNumberChanged:function(e){return e.lightNumber.POINT_LIGHT!==this._lightNumber.POINT_LIGHT||e.lightNumber.DIRECTIONAL_LIGHT!==this._lightNumber.DIRECTIONAL_LIGHT||e.lightNumber.SPOT_LIGHT!==this._lightNumber.SPOT_LIGHT||e.lightNumber.AMBIENT_LIGHT!==this._lightNumber.AMBIENT_LIGHT},setShaderLightNumber:function(e){for(var t in this._lightNumber)e.lightNumber[t]=this._lightNumber[t];e.dirty()},setLightUniforms:function(e,t){for(var n in this._lightUniforms){var r=this._lightUniforms[n];e.setUniform(t,r.type,n,r.value)}},dispose:function(){this.material=null,this.opaqueQueue=[],this.transparentQueue=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});return r}),define("qtek/texture/Texture2D",["require","../Texture","../core/glinfo","../core/glenum"],function(e){var t=e("../Texture"),n=e("../core/glinfo"),r=e("../core/glenum"),i=t.derive(function(){return{image:null,pixels:null,mipmaps:[]}},{update:function(e){e.bindTexture(e.TEXTURE_2D,this._cache.get("webgl_texture")),this.beforeUpdate(e);var i=this.format,s=this.type;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.wrapT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this.magFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.minFilter);var o=n.getExtension(e,"EXT_texture_filter_anisotropic");o&&this.anisotropic>1&&e.texParameterf(e.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic);if(s===36193){var u=n.getExtension(e,"OES_texture_half_float");u||(s=r.FLOAT)}this.image?e.texImage2D(e.TEXTURE_2D,0,i,i,s,this.image):i<=t.COMPRESSED_RGBA_S3TC_DXT5_EXT&&i>=t.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,0,i,this.width,this.height,0,this.pixels):e.texImage2D(e.TEXTURE_2D,0,i,this.width,this.height,0,i,s,this.pixels);if(this.useMipmap)if(this.mipmaps.length){if(this.image)for(var a=0;a<this.mipmaps.length;a++)this.mipmaps[a]&&e.texImage2D(e.TEXTURE_2D,a,i,i,s,this.mipmaps[a]);else if(this.pixels){var f=this.width,l=this.height;for(var a=0;a<this.mipmaps.length;a++)this.mipmaps[a]&&(i<=t.COMPRESSED_RGBA_S3TC_DXT5_EXT&&i>=t.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,0,i,f,l,0,this.mipmaps[a]):e.texImage2D(e.TEXTURE_2D,a,i,f,l,0,i,s,this.mipmaps[a])),f/=2,l/=2}}else!this.NPOT&&!this.mipmaps.length&&e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)},generateMipmap:function(e){e.bindTexture(e.TEXTURE_2D,this._cache.get("webgl_texture")),e.generateMipmap(e.TEXTURE_2D)},isPowerOfTwo:function(){if(this.image)var e=this.image.width,t=this.image.height;else var e=this.width,t=this.height;return(e&e-1)===0&&(t&t-1)===0},isRenderable:function(){return this.image?this.image.nodeName==="CANVAS"||this.image.complete:this.width&&this.height},bind:function(e){e.bindTexture(e.TEXTURE_2D,this.getWebGLTexture(e))},unbind:function(e){e.bindTexture(e.TEXTURE_2D,null)},load:function(e){var t=new Image,n=this;return t.onload=function(){n.dirty(),n.trigger("success",n),t.onload=null},t.onerror=function(){n.trigger("error",n),t.onerror=null},t.src=e,this.image=t,this}});return i}),define("qtek/animation/easing",[],function(){var e={Linear:function(e){return e},QuadraticIn:function(e){return e*e},QuadraticOut:function(e){return e*(2-e)},QuadraticInOut:function(e){return(e*=2)<1?.5*e*e:-0.5*(--e*(e-2)-1)},CubicIn:function(e){return e*e*e},CubicOut:function(e){return--e*e*e+1},CubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},QuarticIn:function(e){return e*e*e*e},QuarticOut:function(e){return 1- --e*e*e*e},QuarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},QuinticIn:function(e){return e*e*e*e*e},QuinticOut:function(e){return--e*e*e*e*e+1},QuinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},SinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},SinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},SinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},ExponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},ExponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},ExponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},CircularIn:function(e){return 1-Math.sqrt(1-e*e)},CircularOut:function(e){return Math.sqrt(1- --e*e)},CircularInOut:function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},ElasticIn:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)))},ElasticOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/r)+1)},ElasticInOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)*.5+1)},BackIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},BackOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},BackInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)},BounceIn:function(e){return 1-Easing.BounceOut(1-e)},BounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},BounceInOut:function(e){return e<.5?Easing.BounceIn(e*2)*.5:Easing.BounceOut(e*2-1)*.5+.5}};return e}),define("js/particles",["require","qtek/particleSystem/ParticleRenderable","qtek/particleSystem/Emitter","qtek/Renderer","qtek/camera/Perspective","qtek/Scene","qtek/math/Vector3","qtek/texture/Texture2D","qtek/animation/easing","glmatrix"],function(e){function v(e){var t=document.createElement("canvas");t.width=e,t.height=e;var n=t.getContext("2d");n.beginPath(),n.arc(e/2,e/2,60,0,Math.PI*2,!1),n.closePath();var r=n.createRadialGradient(e/2,e/2,0,e/2,e/2,e/2);return r.addColorStop(0,"rgba(255,255,255,1)"),r.addColorStop(.3,"rgba(255,255,255,1)"),r.addColorStop(.6,"rgba(255,255,255,0.4)"),r.addColorStop(1,"rgba(255,255,255,0.0)"),n.fillStyle=r,n.fill(),t}function m(){var e=document.createElement("canvas");e.width=64,e.height=10;var t=e.getContext("2d"),n=t.createLinearGradient(0,0,e.width,0),r=[46,95,208,1],i=[221,71,5,.3],s=[];n.addColorStop(0,"rgba("+r.join(",")+")");var o=3;for(var u=0;u<o;u++){var a=(u+1)/(o+1);l.lerp(s,r,i,f.CubicInOut(a)),s[3]=Math.random();for(var c=0;c<3;c++)s[c]=Math.round(s[c]);n.addColorStop(a,"rgba("+s.join(",")+")")}return n.addColorStop(1,"rgba("+i.join(",")+")"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}function g(){c=new i({canvas:t}),c.resize(window.innerWidth,window.innerHeight),p=new o,h=new s({aspect:c.width/c.height}),h.position.z=100,d=new n;var e=new r({max:1e3,amount:4,life:r.random1D(2,4),spriteSize:r.constant(400*(window.devicePixelRatio||1)),position:r.random3D(new u(-100,-80,60),new u(100,0,-60)),velocity:r.random3D(new u(-3,3,-3),new u(3,4,3))}),f=new r({max:1e3,amount:3,life:r.random1D(2,4),spriteSize:r.constant(400*(window.devicePixelRatio||1)),position:r.random3D(new u(-100,0,60),new u(100,40,-60)),velocity:r.random3D(new u(-3,2,-3),new u(3,2,3))});d.addEmitter(e),d.addEmitter(f),d.material.set("color",[2,2,2]),d.material.shader.enableTexture("sprite"),d.material.shader.enableTexture("gradient"),d.material.blend=function(e){e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)};var l=v(32),g=m();d.material.set("sprite",new a({image:l})),d.material.set("gradient",new a({image:g})),p.add(d)}function y(e){d.updateParticles(e),c.render(p,h)}function b(){c.resize(window.innerWidth,window.innerHeight),h.aspect=c.width/c.height}var t=document.getElementById("bg-particles"),n=e("qtek/particleSystem/ParticleRenderable"),r=e("qtek/particleSystem/Emitter"),i=e("qtek/Renderer"),s=e("qtek/camera/Perspective"),o=e("qtek/Scene"),u=e("qtek/math/Vector3"),a=e("qtek/texture/Texture2D"),f=e("qtek/animation/easing"),l=e("glmatrix").vec4,c,h,p,d;return{start:g,frame:y,resize:b}}),define("qtek/compositor/Graph",["require","../core/Base"],function(e){var t=e("../core/Base"),n=t.derive(function(){return{nodes:[]}},{addNode:function(e){this.nodes.push(e),this._dirty=!0},removeNode:function(e){this.nodes.splice(this.nodes.indexOf(e),1),this._dirty=!0},findNode:function(e){for(var t=0;t<this.nodes.length;t++)if(this.nodes[t].name===e)return this.nodes[t]},update:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];if(!t.inputs)continue;for(var n in t.inputs){var r=t.inputs[n],i=this.findPin(r);i?t.link(n,i.node,i.pin):console.warn("Pin of "+r.node+"."+r.pin+" not exist")}}},findPin:function(e){var t;if(typeof e.node=="string")for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n];r.name===e.node&&(t=r)}else t=e.node;if(t&&t.outputs[e.pin])return{node:t,pin:e.pin}}});return n}),define("qtek/compositor/Compositor",["require","./Graph"],function(e){var t=e("./Graph"),n=t.derive(function(){return{_outputs:[]}},{addNode:function(e){t.prototype.addNode.call(this,e),e.outputs||this.addOutput(e)},render:function(e,t){this._dirty&&(this.update(),this._dirty=!1);for(var n=0;n<this.nodes.length;n++)this.nodes[n].beforeFrame();for(var n=0;n<this._outputs.length;n++)this._outputs[n].updateReference();for(var n=0;n<this._outputs.length;n++)this._outputs[n].render(e,t);for(var n=0;n<this.nodes.length;n++)this.nodes[n].afterFrame()},addOutput:function(e){this._outputs.indexOf(e)<0&&this._outputs.push(e)},removeOutput:function(e){this._outputs.splice(this._outputs.indexOf(e),1)}});return n}),define("qtek/camera/Orthographic",["require","../Camera"],function(e){var t=e("../Camera"),n=t.derive({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},clone:function(){var e=t.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}});return n}),define("qtek/DynamicGeometry",["require","./Geometry","./core/util","./math/Vector3","./math/BoundingBox","./core/glenum","glmatrix"],function(e){var t=e("./Geometry"),n=e("./core/util"),r=e("./math/Vector3"),i=e("./math/BoundingBox"),s=e("./core/glenum"),o=e("glmatrix"),u=o.vec3,a=o.vec2,f=o.mat2,l=o.mat4,c=Array.prototype.slice,h=t.derive(function(){return{attributes:{position:new t.Attribute("position","float",3,"POSITION",!0),texcoord0:new t.Attribute("texcoord0","float",2,"TEXCOORD_0",!0),texcoord1:new t.Attribute("texcoord1","float",2,"TEXCOORD_1",!0),normal:new t.Attribute("normal","float",3,"NORMAL",!0),tangent:new t.Attribute("tangent","float",4,"TANGENT",!0),color:new t.Attribute("color","float",4,"COLOR",!0),weight:new t.Attribute("weight","float",3,"WEIGHT",!0),joint:new t.Attribute("joint","float",4,"JOINT",!0),barycentric:new t.Attribute("barycentric","float",3,null,!0)},hint:s.DYNAMIC_DRAW,faces:[],_enabledAttributes:null,_arrayChunks:[]}},{updateBoundingBox:function(){this.boundingBox||(this.boundingBox=new i),this.boundingBox.updateFromVertices(this.attributes.position.value)},dirty:function(e){if(!e){this.dirty("indices");for(var t in this.attributes)this.dirty(t);return}this._cache.dirtyAll(e),this._cache.dirtyAll(),this._enabledAttributes=null},getVertexNumber:function(){return this.attributes.position.value.length},getFaceNumber:function(){return this.faces.length},isUseFace:function(){return this.useFace&&this.faces.length>0},isSplitted:function(){return this.getVertexNumber()>this.chunkSize},isStatic:function(){return!1},createAttribute:function(e,n,r,i){var s=new t.Attribute(e,n,r,i,!0);return this.attributes[e]=s,this._attributeList.push(e),s},removeAttribute:function(e){var t=this._attributeList.indexOf(e);return t>=0?(this._attributeList.splice(t,1),delete this.attributes[e],!0):!1},getEnabledAttributes:function(){if(this._enabledAttributes)return this._enabledAttributes;var e={},t=this.getVertexNumber();for(var n=0;n<this._attributeList.length;n++){var r=this._attributeList[n],i=this.attributes[r];i.value.length&&i.value.length===t&&(e[r]=i)}return this._enabledAttributes=e,e},_getDirtyAttributes:function(){var e=this.getEnabledAttributes();if(this._cache.miss("chunks"))return e;var t={},n=!0;for(var r in e){var i=e[r];this._cache.isDirty(r)&&(t[r]=e[r],n=!1)}if(!n)return t},getChunkNumber:function(){return this._arrayChunks.length},getBufferChunks:function(e){this._cache.use(e.__GLID__);if(this._cache.isDirty()){var t=this._getDirtyAttributes(),n=this._cache.isDirty("indices");n=n&&this.isUseFace();if(t){this._updateAttributesAndIndicesArrays(t,n),this._updateBuffer(e,t,n);for(var r in t)this._cache.fresh(r);this._cache.fresh("indices"),this._cache.fresh()}}return this._cache.get("chunks")},_updateAttributesAndIndicesArrays:function(e,t){var n=this,r=this.getVertexNumber(),i=[],s=[],o={};for(var u in e)switch(P){case"byte":o[u]=Int8Array;break;case"ubyte":o[u]=Uint8Array;break;case"short":o[u]=Int16Array;break;case"ushort":o[u]=Uint16Array;break;default:o[u]=Float32Array}var a=function(t){if(n._arrayChunks[t])return n._arrayChunks[t];var s={attributeArrays:{},indicesArray:null};for(var o in e)s.attributeArrays[o]=null;for(var u=0;u<r;u++)i[u]=-1;return n._arrayChunks.push(s),s},f=Object.keys(e);if(r>this.chunkSize&&this.isUseFace()){var l=0,c=0,h,p=[0],d=[];for(m=0;m<r;m++)d[m]=-1,i[m]=-1;if(t)for(m=0;m<this.faces.length;m++)s[m]=[0,0,0];h=a(c);var v=0;for(var m=0;m<this.faces.length;m++){var g=this.faces[m],y=s[m];v+3>this.chunkSize&&(c++,p[c]=m,v=0,h=a(c));for(var b=0;b<3;b++){var w=g[b],E=i[w]===-1;for(var S=0;S<f.length;S++){var u=f[S],x=h.attributeArrays[u],T=e[u].value,N=e[u].size;x||(x=h.attributeArrays[u]=[]);if(E){N===1&&(x[v]=T[w]);for(var C=0;C<N;C++)x[v*N+C]=T[w][C]}}E?(i[w]=v,y[b]=v,v++):y[b]=i[w]}}for(var k=0;k<this._arrayChunks.length;k++){var L=this._arrayChunks[k];for(var u in L.attributeArrays){var A=L.attributeArrays[u];A instanceof Array&&(L.attributeArrays[u]=new o[u](A))}}if(t){var O,M,_,L;for(var k=0;k<this._arrayChunks.length;k++){O=p[k],M=p[k+1]||this.faces.length,_=0,L=this._arrayChunks[k];var D=L.indicesArray;D||(D=L.indicesArray=new Uint16Array((M-O)*3));for(var m=O;m<M;m++)D[_++]=s[m][0],D[_++]=s[m][1],D[_++]=s[m][2]}}}else{var L=a(0);if(t){var D=L.indicesArray;D||(D=L.indicesArray=new Uint16Array(this.faces.length*3));var _=0;for(var m=0;m<this.faces.length;m++)D[_++]=this.faces[m][0],D[_++]=this.faces[m][1],D[_++]=this.faces[m][2]}for(var u in e){var T=e[u].value,P=e[u].type,N=e[u].size,x=L.attributeArrays[u],H=r*N;if(!x||x.length!==H)x=new o[u](H),L.attributeArrays[u]=x;if(N===1)for(var m=0;m<T.length;m++)x[m]=T[m];else{var _=0;for(var m=0;m<T.length;m++)for(var C=0;C<N;C++)x[_++]=T[m][C]}}}},_updateBuffer:function(e,n,r){var i=this._cache.get("chunks"),s=!1;if(!i){i=[];for(var o=0;o<this._arrayChunks.length;o++)i[o]={attributeBuffers:[],indicesBuffer:null};this._cache.put("chunks",i),s=!0}for(var u=0;u<this._arrayChunks.length;u++){var a=i[u];a||(a=i[u]={attributeBuffers:[],indicesBuffer:null});var f=a.attributeBuffers,l=a.indicesBuffer,c=this._arrayChunks[u],h=c.attributeArrays,p=c.indicesArray,d=0,v=0;for(var m in n){var g=n[m],y=g.type,b=g.semantic,w=g.size,E;if(!s){for(var o=v;o<f.length;o++)if(f[o].name===m){E=f[o],v=o+1;break}if(!E)for(var o=v-1;o>=0;o--)if(f[o].name===m){E=f[o],v=o;break}}var S;E?S=E.buffer:S=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,S),e.bufferData(e.ARRAY_BUFFER,h[m],this.hint),f[d++]=new t.AttributeBuffer(m,y,S,w,b)}f.length=d,r&&(l||(l=new t.IndicesBuffer(e.createBuffer(),p.length),a.indicesBuffer=l),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,p,this.hint))}},generateVertexNormals:function(){var e=this.faces,t=e.length,n=this.attributes.position.value,r=this.attributes.normal.value,i=u.create(),s=u.create(),o=u.create();for(var a=0;a<r.length;a++)u.set(r[a],0,0,0);for(var a=r.length;a<n.length;a++)r[a]=[0,0,0];for(var f=0;f<t;f++){var l=e[f],c=l[0],h=l[1],p=l[2],d=n[c],v=n[h],m=n[p];u.sub(s,d,v),u.sub(o,v,m),u.cross(i,s,o),u.add(r[c],r[c],i),u.add(r[h],r[h],i),u.add(r[p],r[p],i)}for(var a=0;a<r.length;a++)u.normalize(r[a],r[a])},generateFaceNormals:function(){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.faces,t=e.length,n=this.attributes.position.value,r=this.attributes.normal.value,i=u.create(),s=u.create(),o=u.create(),a=r.length===n.length;for(var f=0;f<t;f++){var l=e[f],h=l[0],p=l[1],d=l[2],v=n[h],m=n[p],g=n[d];u.sub(s,v,m),u.sub(o,m,g),u.cross(i,s,o),a?(u.copy(r[h],i),u.copy(r[p],i),u.copy(r[d],i)):r[h]=r[p]=r[d]=c.call(i)}},generateTangents:function(){var e=this.attributes.texcoord0.value,t=this.attributes.position.value,n=this.attributes.tangent.value,r=this.attributes.normal.value,i=[],s=[],o=this.getVertexNumber();for(var a=0;a<o;a++)i[a]=[0,0,0],s[a]=[0,0,0];var f=[0,0,0],l=[0,0,0];for(var a=0;a<this.faces.length;a++){var c=this.faces[a],h=c[0],p=c[1],d=c[2],v=e[h],m=e[p],g=e[d],y=t[h],b=t[p],w=t[d],E=b[0]-y[0],S=w[0]-y[0],x=b[1]-y[1],T=w[1]-y[1],N=b[2]-y[2],C=w[2]-y[2],k=m[0]-v[0],L=g[0]-v[0],A=m[1]-v[1],O=g[1]-v[1],M=1/(k*O-A*L);f[0]=(O*E-A*S)*M,f[1]=(O*x-A*T)*M,f[2]=(O*N-A*C)*M,l[0]=(k*S-L*E)*M,l[1]=(k*T-L*x)*M,l[2]=(k*C-L*N)*M,u.add(i[h],i[h],f),u.add(i[p],i[p],f),u.add(i[d],i[d],f),u.add(s[h],s[h],l),u.add(s[p],s[p],l),u.add(s[d],s[d],l)}var _=[0,0,0,0],D=[0,0,0];for(var a=0;a<o;a++){var P=r[a],H=i[a];u.scale(_,P,u.dot(P,H)),u.sub(_,H,_),u.normalize(_,_),u.cross(D,P,H),_[3]=u.dot(D,s[a])<0?-1:1,n[a]=_.slice()}},isUniqueVertex:function(){return this.isUseFace()?this.getVertexNumber()===this.faces.length*3:!0},generateUniqueVertex:function(){var e=[];for(var t=0;t<this.getVertexNumber();t++)e[t]=0;var n=this.getVertexNumber(),r=this.getEnabledAttributes(),i=this.faces,s=Object.keys(r);for(var t=0;t<i.length;t++){var o=i[t];for(var u=0;u<3;u++){var a=o[u];if(e[a]>0){for(var f=0;f<s.length;f++){var l=s[f],h=r[l].value,p=r[l].size;p===1?h.push(h[a]):h.push(c.call(h[a]))}o[u]=n,n++}e[a]++}}this.dirty()},generateBarycentric:function(){var e=[1,0,0],t=[0,0,1],n=[0,1,0];return function(){this.isUniqueVertex()||this.generateUniqueVertex();var r=this.attributes.barycentric.value;if(r.length==this.faces.length*3)return;var i,s,o,u;for(var a=0;a<this.faces.length;a++)u=this.faces[a],i=u[0],s=u[1],o=u[2],r[i]=e,r[s]=t,r[o]=n}}(),convertToStatic:function(e){this._updateAttributesAndIndicesArrays(this.getEnabledAttributes(),!0);if(this._arrayChunks.length>1)console.warn("Large geometry will discard chunks when convert to StaticGeometry");else if(this._arrayChunks.length===0)return e;var t=this._arrayChunks[0],n=this.getEnabledAttributes();for(var r in n){var s=n[r],o=e.attributes[r];o||(o=e.attributes[r]={type:s.type,size:s.size,value:null},s.semantic&&(o.semantic=s.semantic)),o.value=t.attributeArrays[r]}return e.faces=t.indicesArray,this.boundingBox&&(e.boundingBox=new i,e.boundingBox.min.copy(this.boundingBox.min),e.boundingBox.max.copy(this.boundingBox.max)),e},applyTransform:function(e){this.boundingBox&&this.boundingBox.applyTransform(e);var t=this.attributes.position.value,n=this.attributes.normal.value,r=this.attributes.tangent.value;e=e._array;for(var i=0;i<t.length;i++)u.transformMat4(t[i],t[i],e);var s=l.create();l.invert(s,e),l.transpose(s,s);for(var i=0;i<n.length;i++)u.transformMat4(n[i],n[i],s);for(var i=0;i<r.length;i++)u.transformMat4(r[i],r[i],s)},dispose:function(e){this._cache.use(e.__GLID__);var t=this._cache.get("chunks");if(t)for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<r.attributeBuffers.length;i++){var s=r.attributeBuffers[i];e.deleteBuffer(s.buffer)}}this._cache.deleteContext(e.__GLID__)}});return h}),define("qtek/geometry/Plane",["require","../DynamicGeometry","../math/BoundingBox"],function(e){var t=e("../DynamicGeometry"),n=e("../math/BoundingBox"),r=t.derive({widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){var e=this.heightSegments,t=this.widthSegments,r=this.attributes.position.value,i=this.attributes.texcoord0.value,s=this.attributes.normal.value,o=this.faces;r.length=0,i.length=0,s.length=0,o.length=0;for(var u=0;u<=e;u++){var a=u/e;for(var f=0;f<=t;f++){var l=f/t;r.push([2*l-1,2*a-1,0]),i&&i.push([l,a]),s&&s.push([0,0,1]);if(f<t&&u<e){var c=f+u*(t+1);o.push([c,c+1,c+t+1]),o.push([c+t+1,c+1,c+t+2])}}}this.boundingBox=new n,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});return r}),define("qtek/Mesh",["require","./Renderable","./core/glenum"],function(e){var t=e("./Renderable"),n=e("./core/glenum"),r=t.derive({mode:n.TRIANGLES,skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{render:function(e,n){var r=n||this.material;if(this.skeleton){var i=this.skeleton.getSubSkinMatrices(this.__GUID__,this.joints);r.shader.setUniformBySemantic(e,"SKIN_MATRIX",i)}return t.prototype.render.call(this,e,n)}});return r.POINTS=n.POINTS,r.LINES=n.LINES,r.LINE_LOOP=n.LINE_LOOP,r.LINE_STRIP=n.LINE_STRIP,r.TRIANGLES=n.TRIANGLES,r.TRIANGLE_STRIP=n.TRIANGLE_STRIP,r.TRIANGLE_FAN=n.TRIANGLE_FAN,r.BACK=n.BACK,r.FRONT=n.FRONT,r.FRONT_AND_BACK=n.FRONT_AND_BACK,r.CW=n.CW,r.CCW=n.CCW,r}),define("qtek/compositor/Pass",["require","../core/Base","../camera/Orthographic","../geometry/Plane","../Shader","../Material","../Mesh","../core/glinfo","../core/glenum"],function(e){var t=e("../core/Base"),n=e("../camera/Orthographic"),r=e("../geometry/Plane"),i=e("../Shader"),s=e("../Material"),o=e("../Mesh"),u=e("../core/glinfo"),a=e("../core/glenum"),f=new r,l=new o({geometry:f}),c=new n,h=t.derive(function(){return{fragment:"",outputs:null,material:null}},function(){var e=new i({vertex:i.source("buildin.compositor.vertex"),fragment:this.fragment}),t=new s({shader:e});e.enableTexturesAll(),this.material=t},{setUniform:function(e,t){var n=this.material.uniforms[e];n&&(n.value=t)},getUniform:function(e){var t=this.material.uniforms[e];if(t)return t.value},attachOutput:function(e,t){this.outputs||(this.outputs={}),t=t||a.COLOR_ATTACHMENT0,this.outputs[t]=e},detachOutput:function(e){for(var t in this.outputs)this.outputs[t]===e&&(this.outputs[t]=null)},bind:function(e,t){if(this.outputs)for(var n in this.outputs){var r=this.outputs[n];r&&t.attach(e.gl,r,n)}t&&t.bind(e)},unbind:function(e,t){t.unbind(e)},render:function(e,t){var n=e.gl;l.material=this.material;if(t){this.bind(e,t);var r=u.getExtension(n,"EXT_draw_buffers");if(r&&this.outputs){var i=[];for(var s in this.outputs)s=+s,s>=n.COLOR_ATTACHMENT0&&s<=n.COLOR_ATTACHMENT0+8&&i.push(s);r.drawBuffersEXT(i)}}this.trigger("beforerender",this,e),n.disable(n.BLEND),n.clear(n.DEPTH_BUFFER_BIT),e.renderQueue([l],c),this.trigger("afterrender",this,e),t&&this.unbind(e,t)}});return h}),define("qtek/texture/TextureCube",["require","../Texture","../core/glinfo","../core/glenum","../core/util"],function(e){function u(e){return e.nodeName==="CANVAS"||e.complete}var t=e("../Texture"),n=e("../core/glinfo"),r=e("../core/glenum"),i=e("../core/util"),s={px:"TEXTURE_CUBE_MAP_POSITIVE_X",py:"TEXTURE_CUBE_MAP_POSITIVE_Y",pz:"TEXTURE_CUBE_MAP_POSITIVE_Z",nx:"TEXTURE_CUBE_MAP_NEGATIVE_X",ny:"TEXTURE_CUBE_MAP_NEGATIVE_Y",nz:"TEXTURE_CUBE_MAP_NEGATIVE_Z"},o=t.derive(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null}}},{update:function(e){e.bindTexture(e.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.beforeUpdate(e);var t=this.format,i=this.type;e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,this.wrapT),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,this.magFilter),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,this.minFilter);var o=n.getExtension(e,"EXT_texture_filter_anisotropic");o&&this.anisotropic>1&&e.texParameterf(e.TEXTURE_CUBE_MAP,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic);if(i===36193){var u=n.getExtension(e,"OES_texture_half_float");u||(i=r.FLOAT)}for(var a in this.image){var f=this.image[a];f?e.texImage2D(e[s[a]],0,t,t,i,f):e.texImage2D(e[s[a]],0,t,this.width,this.height,0,t,i,this.pixels[a])}!this.NPOT&&this.useMipmap&&e.generateMipmap(e.TEXTURE_CUBE_MAP),e.bindTexture(e.TEXTURE_CUBE_MAP,null)},generateMipmap:function(e){e.bindTexture(e.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),e.generateMipmap(e.TEXTURE_CUBE_MAP)},bind:function(e){e.bindTexture(e.TEXTURE_CUBE_MAP,this.getWebGLTexture(e))},unbind:function(e){e.bindTexture(e.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){function e(e){return e&e-1===0}return this.image.px?e(this.image.px.width)&&e(this.image.px.height):e(this.width)&&e(this.height)},isRenderable:function(){return this.image.px?u(this.image.px)&&u(this.image.nx)&&u(this.image.py)&&u(this.image.ny)&&u(this.image.pz)&&u(this.image.nz):this.width&&this.height},load:function(e){var t=0,n=this;return i.each(e,function(e,r){var i=new Image;i.onload=function(){t--,t===0&&(n.dirty(),n.trigger("success",n)),i.onload=null},i.onerror=function(){t--,i.onerror=null},t++,i.src=e,n.image[r]=i}),this}});return o}),define("qtek/FrameBuffer",["require","./core/Base","./texture/TextureCube","./core/glinfo","./core/glenum","./core/Cache"],function(e){var t=e("./core/Base"),n=e("./texture/TextureCube"),r=e("./core/glinfo"),i=e("./core/glenum"),s=e("./core/Cache"),o=t.derive({depthBuffer:!0,_attachedTextures:null,_width:0,_height:0,_depthTextureAttached:!1,_renderBufferWidth:0,_renderBufferHeight:0,_binded:!1},function(){this._cache=new s,this._attachedTextures={}},{resize:function(e,t){this._width=e,this._height=t},bind:function(e){var t=e.gl;this._binded||(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer(t)),this._binded=!0),this._cache.put("viewport",e.viewport),e.setViewport(0,0,this._width,this._height),this._cache.miss("renderbuffer")&&this.depthBuffer&&!this._depthTextureAttached&&this._cache.put("renderbuffer",t.createRenderbuffer());if(!this._depthTextureAttached&&this.depthBuffer){var n=this._width,r=this._height,i=this._cache.get("renderbuffer");if(n!==this._renderBufferWidth||r!==this._renderBufferHeight)t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,r),this._renderBufferWidth=n,this._renderBufferHeight=r,t.bindRenderbuffer(t.RENDERBUFFER,null);this._cache.get("renderbuffer_attached")||(t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),this._cache.put("renderbuffer_attached",!0))}},unbind:function(e){var t=e.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),this._binded=!1,this._cache.use(t.__GLID__);var r=this._cache.get("viewport");r&&e.setViewport(r.x,r.y,r.width,r.height);for(var i in this._attachedTextures){var s=this._attachedTextures[i];if(!s.NPOT&&s.useMipmap){var o=s instanceof n?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D;t.bindTexture(o,s.getWebGLTexture(t)),t.generateMipmap(o),t.bindTexture(o,null)}}},getFrameBuffer:function(e){return this._cache.use(e.__GLID__),this._cache.miss("framebuffer")&&this._cache.put("framebuffer",e.createFramebuffer()),this._cache.get("framebuffer")},attach:function(e,t,n,s,o){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");this._binded||(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer(e)),this._binded=!0),this._width=t.width,this._height=t.height,n=n||e.COLOR_ATTACHMENT0,s=s||e.TEXTURE_2D,o=o||0;if(n===e.DEPTH_ATTACHMENT){var u=r.getExtension(e,"WEBGL_depth_texture");if(!u){console.error(" Depth texture is not supported by the browser ");return}if(t.format!==i.DEPTH_COMPONENT){console.error("The texture attached to depth buffer is not a valid.");return}this._cache.put("renderbuffer_attached",!1),this._depthTextureAttached=!0}this._attachedTextures[n]=t,e.framebufferTexture2D(e.FRAMEBUFFER,n,s,t.getWebGLTexture(e),o)},detach:function(){},dispose:function(e){this._cache.use(e.__GLID__);var t=this._cache.get("renderbuffer");t&&e.deleteRenderbuffer(t);var n=this._cache.get("framebuffer");n&&e.deleteFramebuffer(n),this._cache.deleteContext(e.__GLID__)}});return o.COLOR_ATTACHMENT0=i.COLOR_ATTACHMENT0,o.DEPTH_ATTACHMENT=i.DEPTH_ATTACHMENT,o.STENCIL_ATTACHMENT=i.STENCIL_ATTACHMENT,o.DEPTH_STENCIL_ATTACHMENT=i.DEPTH_STENCIL_ATTACHMENT,o}),define("qtek/compositor/texturePool",["require","../texture/Texture2D","../core/glenum","../core/util"],function(e){function f(e){r.defaultsWithPropList(e,u,a),l(e);var t="";for(var n=0;n<a.length;n++){var i=a[n],s=e[i].toString();t+=s}return t}function l(e){var t=c(e.width,e.height);e.format===n.DEPTH_COMPONENT&&(e.useMipmap=!1);if(!t||!e.useMipmap){if(e.minFilter==n.NEAREST_MIPMAP_NEAREST||e.minFilter==n.NEAREST_MIPMAP_LINEAR)e.minFilter=n.NEAREST;else if(e.minFilter==n.LINEAR_MIPMAP_LINEAR||e.minFilter==n.LINEAR_MIPMAP_NEAREST)e.minFilter=n.LINEAR;e.wrapS=n.CLAMP_TO_EDGE,e.wrapT=n.CLAMP_TO_EDGE}}function c(e,t){return(e&e-1)===0&&(t&t-1)===0}var t=e("../texture/Texture2D"),n=e("../core/glenum"),r=e("../core/util"),i={},s=[],o={get:function(e){var n=f(e);i.hasOwnProperty(n)||(i[n]=[]);var r=i[n];if(!r.length){var o=new t(e);return s.push(o),o}return r.pop()},put:function(e){var t=f(e);i.hasOwnProperty(t)||(i[t]=[]);var n=i[t];n.push(e)},clear:function(e){for(var t=0;t<s.length;t++)s[t].dispose(e);i={},s=[]}},u={width:512,height:512,type:n.UNSIGNED_BYTE,format:n.RGBA,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,minFilter:n.LINEAR_MIPMAP_LINEAR,magFilter:n.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},a=Object.keys(u);return o}),define("qtek/compositor/Node",["require","../core/Base","./Pass","../FrameBuffer","./texturePool"],function(e){var t=e("../core/Base"),n=e("./Pass"),r=e("../FrameBuffer"),i=e("./texturePool"),s=t.derive(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1}},function(){var e=new n({fragment:this.shader});this.pass=e,this.outputs&&(this.frameBuffer=new r({depthBuffer:!1}))},{render:function(e,t){this._rendering=!0;var n=e.gl;for(var r in this.inputLinks){var s=this.inputLinks[r],o=s.node.getOutput(e,s.pin);this.pass.setUniform(r,o)}if(!this.outputs)this.pass.outputs=null,this.pass.render(e,t);else{this.pass.outputs={};for(var u in this.outputs){var a=this.updateParameter(u,e),f=this.outputs[u],l=i.get(a);this._outputTextures[u]=l;var c=f.attachment||n.COLOR_ATTACHMENT0;typeof c=="string"&&(c=n[c]),this.pass.outputs[c]=l}this.pass.render(e,this.frameBuffer)}for(var r in this.inputLinks){var s=this.inputLinks[r];s.node.removeReference(s.pin)}this._rendering=!1,this._rendered=!0},updateParameter:function(e,t){var n=this.outputs[e],r=n.parameters,i=n._parametersCopy;i||(i=n._parametersCopy={});if(r)for(var s in r)s!=="width"&&s!=="height"&&(i[s]=r[s]);var o,u;return r.width instanceof Function?o=r.width(t):o=r.width,r.height instanceof Function?u=r.height(t):u=r.height,(i.width!==o||i.height!==u)&&this._outputTextures[e]&&this._outputTextures[e].dispose(t.gl),i.width=o,i.height=u,i},setParameter:function(e,t){this.pass.setUniform(e,t)},getParameter:function(e){return this.pass.getUniform(e)},setParameters:function(e){for(var t in e)this.setParameter(t,e[t])},setShader:function(e){var t=this.pass.material;t.shader.setFragment(e),t.attachShader(t.shader,!0)},getOutput:function(e,t){if(t===undefined)return t=e,this._outputTextures[t];var n=this.outputs[t];if(!n)return;return this._rendered?n.outputLastFrame?this._prevOutputTextures[t]:this._outputTextures[t]:this._rendering?(this._prevOutputTextures[t]||(this._prevOutputTextures[t]=i.get(n.parameters||{})),this._prevOutputTextures[t]):(this.render(e),this._outputTextures[t])},removeReference:function(e){this._outputReferences[e]--;if(this._outputReferences[e]===0){var t=this.outputs[e];t.keepLastFrame?(this._prevOutputTextures[e]&&i.put(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):i.put(this._outputTextures[e])}},link:function(e,t,n){this.inputLinks[e]={node:t,pin:n},t.outputLinks[n]||(t.outputLinks[n]=[]),t.outputLinks[n].push({node:this,pin:e});var r=this.pass.material.shader;r.enableTexture(e)},clear:function(){this.inputLinks={},this.outputLinks={};var e=this.pass.material.shader;e.disableTexturesAll()},updateReference:function(e){if(!this._rendering){this._rendering=!0;for(var t in this.inputLinks){var n=this.inputLinks[t];n.node.updateReference(n.pin)}this._rendering=!1}e&&this._outputReferences[e]++},beforeFrame:function(){this._rendered=!1;for(var e in this.outputLinks)this._outputReferences[e]=0},afterFrame:function(){for(var e in this.outputLinks)if(this._outputReferences[e]>0){var t=this.outputs[e];t.keepLastFrame?(this._prevOutputTextures[e]&&i.put(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):i.put(this._outputTextures[e])}}});return s}),define("qtek/compositor/SceneNode",["require","./Node","./texturePool","../core/glinfo"],function(e){var t=e("./Node"),n=e("./texturePool"),r=e("../core/glinfo"),i=t.derive({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer&&(this.frameBuffer.depthBuffer=!0)},{render:function(e){this._rendering=!0;var t=e.gl;this.trigger("beforerender");var i;if(!this.outputs)i=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var s=this.frameBuffer;for(var o in this.outputs){var u=this.updateParameter(o,e),a=this.outputs[o],f=n.get(u);this._outputTextures[o]=f;var l=a.attachment||t.COLOR_ATTACHMENT0;typeof l=="string"&&(l=t[l]),s.attach(e.gl,f,l)}s.bind(e);var c=r.getExtension(t,"EXT_draw_buffers");if(c){var h=[];for(var l in this.outputs)l=parseInt(l),l>=t.COLOR_ATTACHMENT0&&l<=t.COLOR_ATTACHMENT0+8&&h.push(l);c.drawBuffersEXT(h)}i=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),s.unbind(e)}this.trigger("afterrender",i),this._rendering=!1,this._rendered=!0}});return i}),define("js/BlurFilter",["require","qtek/core/Base","qtek/Renderer","qtek/compositor/Compositor","qtek/compositor/Node","qtek/compositor/SceneNode","qtek/texture/Texture2D","qtek/Texture","qtek/Scene","qtek/camera/Orthographic","qtek/geometry/Plane","qtek/Shader","qtek/Material","qtek/Mesh","qtek/Shader","qtek/FrameBuffer","qtek/shader/library"],function(e){var t=e("qtek/core/Base"),n=e("qtek/Renderer"),r=e("qtek/compositor/Compositor"),i=e("qtek/compositor/Node"),s=e("qtek/compositor/SceneNode"),o=e("qtek/texture/Texture2D"),u=e("qtek/Texture"),a=e("qtek/Scene"),f=e("qtek/camera/Orthographic"),l=e("qtek/geometry/Plane"),c=e("qtek/Shader"),h=e("qtek/Material"),p=e("qtek/Mesh"),c=e("qtek/Shader"),d=e("qtek/FrameBuffer"),v=e("qtek/shader/library"),m=new l,g=new c({vertex:c.source("buildin.basic.vertex"),fragment:c.source("buildin.basic.fragment")});g.enableTexture("diffuseMap"),g.define("fragment","DIFFUSEMAP_ALPHA_ALPHA");var y=t.derive(function(){return{_textureStack:[],_rttStack:[],canvas:null,scale:1,scaleRatio:.8,blurSize:3,blurRepeat:5,_sceneNode:null,_compositor:null,_renderer:null,_blurNodes:[],_meshBack:null,_meshFront:null,_frameBuffer:new d,notSupportWebGL:!1}},function(){var e=new n({canvas:this.canvas,devicePixelRatio:1});this._renderer=e;var t=new r;this._compositor=t;var o=new a,u=new f;u.position.z=2,u.far=100,this._meshBack=new p({name:"BACK",geometry:m,material:new h({shader:g,transparent:!0,depthMask:!1})}),this._meshBack.position.z=-1,this._meshFront=new p({name:"FRONT",geometry:m,material:new h({shader:g,transparent:!0,depthMask:!1})}),this._meshFront.position.z=0,o.add(this._meshBack),o.add(this._meshFront);var l=new s({name:"scene",scene:o,camera:u,outputs:{color:{parameters:{width:function(e){return e.width},height:function(e){return e.height}}}}});this._sceneNode=l;var d,v;for(var y=0;y<this.blurRepeat;y++)d=new i({name:"blur_h_"+y,shader:c.source("buildin.compositor.gaussian_blur_h"),inputs:{texture:{node:y==0?"scene":"blur_v_"+(y-1),pin:"color"}},outputs:{color:{parameters:{width:function(e){return e.width},height:function(e){return e.height}}}}}),v=new i({name:"blur_v_"+y,shader:c.source("buildin.compositor.gaussian_blur_v"),inputs:{texture:{node:"blur_h_"+y,pin:"color"}},outputs:{color:{parameters:{width:function(e){return e.width},height:function(e){return e.height}}}}}),this._blurNodes.push(d),this._blurNodes.push(v);v&&(v.outputs=null),t.addNode(l);for(var y=0;y<this._blurNodes.length;y++)t.addNode(this._blurNodes[y])},{addImage:function(e){var t=new o({image:e});t.getWebGLTexture(this._renderer.gl),this._textureStack.length>0,this._meshFront.material.set("diffuseMap",t),this._textureStack.push(t)},popImage:function(){var e=this._textureStack.pop(),t=this._rttStack.pop();e&&this._renderer.disposeTexture(e),t&&this._renderer.disposeTexture(t),this._meshBack.material.set("diffuseMap",this._rttStack[this._rttStack.length-1]||null),this._meshFront.material.set("diffuseMap",this._textureStack[this._textureStack.length-1]||null)},render:function(e){var t=this._renderer;for(var n=0;n<this._blurNodes.length;n++)this._blurNodes[n].setParameter("blurSize",this.blurSize),this._blurNodes[n].setParameter("textureWidth",t.width),this._blurNodes[n].setParameter("textureHeight",t.height);var r=this.scale;this._meshFront.visible=!!this._meshFront.material.get("diffuseMap"),this._meshFront.scale.set(r,r,r),r*=this.scaleRatio,this._meshBack.visible=!!this._meshBack.material.get("diffuseMap"),this._meshBack.scale.set(r,r,r),this._compositor.render(t,e)},resize:function(){var e=this._renderer.canvas;this._renderer.resize(window.innerWidth,window.innerHeight),this.render()},clear:function(){var e=this._renderer.gl;e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT)}});return y}),define("js/particlesCanvas",["require","glmatrix"],function(e){function s(e){e[0]*=2,e[1]*=2,e[2]*=2;var t=16,n=document.createElement("canvas");n.width=t,n.height=t;var r=n.getContext("2d");r.beginPath(),r.arc(t/2,t/2,60,0,Math.PI*2,!1),r.closePath();var i=r.createRadialGradient(t/2,t/2,0,t/2,t/2,t/2),s="rgba("+e.join(",");return i.addColorStop(0,s+",1)"),i.addColorStop(.3,s+",1)"),i.addColorStop(.8,s+",0.51)"),i.addColorStop(1,s+",0.0)"),r.fillStyle=i,r.fill(),n}function f(){this.p=r.create(),this.v=r.create(),this.size=1,this.life=0,this.opacity=1,this.age=0,this.sprite=null}function l(){t.width=window.innerWidth,t.height=window.innerHeight,i=t.getContext("2d");for(var e=0;e<2e3;e++)u.push(new f);for(var e=0;e<50;e++)c()}function c(){if(u.length>2)for(var e=0;e<2;e++){var t=u.pop();t.init(),o.push(t)}}function h(e){c();var n=o.length;for(var r=0;r<n;){var s=o[r];s.update(e),s.age>s.life?(o[r]=o[n-1],o.pop(),u.push(s),n--):r++}i.clearRect(0,0,t.width,t.height);for(var r=0;r<n;r++){var s=o[r];i.globalAlpha=s.opacity,i.drawImage(s.sprite,s.p[0],s.p[1],s.size,s.size)}}function p(){t.width=window.innerWidth,t.height=window.innerHeight}var t=document.getElementById("bg-particles"),n=e("glmatrix"),r=n.vec2,i,o=[],u=[],a=[s([46,95,208]),s([221,71,5])];return f.prototype.init=function(){this.size=Math.random()*12,this.p[0]=Math.random()*t.width,this.p[1]=Math.random()*t.height,this.v[0]=(Math.random()*2-1)*2,this.v[1]=(-Math.random()-1)*2,this.life=3e3*Math.random()+3e3,this.age=0,this.sprite=a[Math.random()<.5?1:0]},f.prototype.update=function(e){r.scaleAndAdd(this.p,this.p,this.v,e*.01);var t=this.age/this.life;t<.3?this.opacity=t:this.opacity=1-t,this.age+=e},{start:l,frame:h,resize:p}}),define("js/BlurFilterCanvas",["require","qtek/core/Base"],function(e){var t=e("qtek/core/Base"),n=t.derive({},{addImage:function(){},popImage:function(){},render:function(){},resize:function(){},clear:function(){}});return n}),define("js/perlin",["require"],function(e){function n(e,t,n){this.x=e,this.y=t,this.z=n}function c(e){return e*e*e*(e*(e*6-15)+10)}function h(e,t,n){return(1-n)*e+n*t}var t={};n.prototype.dot2=function(e,t){return this.x*e+this.y*t},n.prototype.dot3=function(e,t,n){return this.x*e+this.y*t+this.z*n};var r=[new n(1,1,0),new n(-1,1,0),new n(1,-1,0),new n(-1,-1,0),new n(1,0,1),new n(-1,0,1),new n(1,0,-1),new n(-1,0,-1),new n(0,1,1),new n(0,-1,1),new n(0,1,-1),new n(0,-1,-1)],i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),o=new Array(512);t.seed=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=i[t]^e&255:n=i[t]^e>>8&255,s[t]=s[t+256]=n,o[t]=o[t+256]=r[n%12]}},t.seed(0);var u=.5*(Math.sqrt(3)-1),a=(3-Math.sqrt(3))/6,f=1/3,l=1/6;return t.simplex2=function(e,t){var n,r,i,f=(e+t)*u,l=Math.floor(e+f),c=Math.floor(t+f),h=(l+c)*a,p=e-l+h,d=t-c+h,v,m;p>d?(v=1,m=0):(v=0,m=1);var g=p-v+a,y=d-m+a,b=p-1+2*a,w=d-1+2*a;l&=255,c&=255;var E=o[l+s[c]],S=o[l+v+s[c+m]],x=o[l+1+s[c+1]],T=.5-p*p-d*d;T<0?n=0:(T*=T,n=T*T*E.dot2(p,d));var N=.5-g*g-y*y;N<0?r=0:(N*=N,r=N*N*S.dot2(g,y));var C=.5-b*b-w*w;return C<0?i=0:(C*=C,i=C*C*x.dot2(b,w)),70*(n+r+i)},t.simplex3=function(e,t,n){var r,i,u,a,c=(e+t+n)*f,h=Math.floor(e+c),p=Math.floor(t+c),d=Math.floor(n+c),v=(h+p+d)*l,m=e-h+v,g=t-p+v,y=n-d+v,b,w,E,S,x,T;m>=g?g>=y?(b=1,w=0,E=0,S=1,x=1,T=0):m>=y?(b=1,w=0,E=0,S=1,x=0,T=1):(b=0,w=0,E=1,S=1,x=0,T=1):g<y?(b=0,w=0,E=1,S=0,x=1,T=1):m<y?(b=0,w=1,E=0,S=0,x=1,T=1):(b=0,w=1,E=0,S=1,x=1,T=0);var N=m-b+l,C=g-w+l,k=y-E+l,L=m-S+2*l,A=g-x+2*l,O=y-T+2*l,M=m-1+3*l,_=g-1+3*l,D=y-1+3*l;h&=255,p&=255,d&=255;var P=o[h+s[p+s[d]]],H=o[h+b+s[p+w+s[d+E]]],B=o[h+S+s[p+x+s[d+T]]],j=o[h+1+s[p+1+s[d+1]]],F=.6-m*m-g*g-y*y;F<0?r=0:(F*=F,r=F*F*P.dot3(m,g,y));var I=.6-N*N-C*C-k*k;I<0?i=0:(I*=I,i=I*I*H.dot3(N,C,k));var q=.6-L*L-A*A-O*O;q<0?u=0:(q*=q,u=q*q*B.dot3(L,A,O));var R=.6-M*M-_*_-D*D;return R<0?a=0:(R*=R,a=R*R*j.dot3(M,_,D)),32*(r+i+u+a)},t.perlin2=function(e,t){var n=Math.floor(e),r=Math.floor(t);e-=n,t-=r,n&=255,r&=255;var i=o[n+s[r]].dot2(e,t),u=o[n+s[r+1]].dot2(e,t-1),a=o[n+1+s[r]].dot2(e-1,t),f=o[n+1+s[r+1]].dot2(e-1,t-1),l=c(e);return h(h(i,a,l),h(u,f,l),c(t))},t.perlin3=function(e,t,n){var r=Math.floor(e),i=Math.floor(t),u=Math.floor(n);e-=r,t-=i,n-=u,r&=255,i&=255,u&=255;var a=o[r+s[i+s[u]]].dot3(e,t,n),f=o[r+s[i+s[u+1]]].dot3(e,t,n-1),l=o[r+s[i+1+s[u]]].dot3(e,t-1,n),p=o[r+s[i+1+s[u+1]]].dot3(e,t-1,n-1),d=o[r+1+s[i+s[u]]].dot3(e-1,t,n),v=o[r+1+s[i+s[u+1]]].dot3(e-1,t,n-1),m=o[r+1+s[i+1+s[u]]].dot3(e-1,t-1,n),g=o[r+1+s[i+1+s[u+1]]].dot3(e-1,t-1,n-1),y=c(e),b=c(t),w=c(n);return h(h(h(a,d,y),h(f,v,y),w),h(h(l,m,y),h(p,g,y),w),b)},t}),define("js/particles2",["require","zrender","zrender/shape/Circle","zrender/tool/vector","./perlin"],function(e){var t=e("zrender"),n=e("zrender/shape/Circle"),r=e("zrender/tool/vector"),i=e("./perlin");i.seed(Math.random());var s=[];for(var o=0;o<32;o++)for(var u=0;u<32;u++){var a=i.perlin2(o/16,u/16),f=i.perlin2(o/8,u/8);s[u*32+o]=[a,f]}var l,c,h=function(e){var t=(Math.random()-.5)*l/1.4+l/2,r=(Math.random()-.5)*c/1.4+c/2;this.shape=new n({style:{x:0,y:0,r:e,lineWidth:e,brushType:"both",color:"#8c72d4",strokeColor:"rgba(140, 114, 212, 0.5)",opacity:.3},highlightStyle:{opacity:0},position:[t,r],zlevel:-1}),this.step=Math.round(s.length*Math.random())};h.prototype.update=function(e,t){var n=s[Math.round(this.step)%s.length];r.scaleAndAdd(this.shape.position,this.shape.position,n,t/40),e.modShape(this.shape.id),this.step+=.1};var p=[],d=function(e){zr=e,l=window.innerWidth,c=window.innerHeight;for(var t=0;t<8;t++){var n=new h(Math.random()*20+10);p.push(n),zr.addShape(n.shape)}},v=function(e,t){for(var n=0;n<p.length;n++)p[n].update(e,t);e.refreshNextFrame()};return{start:d,frame:v,resize:function(){var e=window.innerWidth,t=window.innerHeight;for(var n=0;n<p.length;n++)p[n].shape.position[0]*=e/l,p[n].shape.position[1]*=t/c;l=e,c=t}}}),define("js/index",["require","./asciiLogo.txt","../data/relation1.json","../data/relation2","../data/relation3","qtek/core/util","qtek/Renderer","zrender","./Graph","./Level","./detail","./log","./particles","./BlurFilter","./particlesCanvas","./BlurFilterCanvas","./particles2"],function(e){function A(e,t){if(!e||L)return;l("zhishitupuclick",e);var s,o;if(e.indexOf("role/")==0){var o=new u,a=e.slice("role/".length),s=n.get(a,t);if(!s)return}else if(e.indexOf("actor/")==0){var o=new u,a=e.slice("actor/".length),s=r.get(a,t,C.mainNode);if(!s)return}else e.indexOf("detail/")==0?D(e.slice("detail/".length),t,C.mainNode):e=="back"?_(!c):e=="back/back"&&(_(!0),_(!c));if(s&&o){var f;i.each(s.nodes,function(e){var t=o.addNode(e.name,e);e.name==a&&(f=t)}),i.each(s.edges,function(e){o.addEdge(e.source,e.target,e)}),M(o,T,f,t)}}function O(){var e=k.length-2;for(var t=0;t<e;t++)_(!0);k.length>1&&_(!c)}function M(e,t,n,r){var i=new a(e,t);i.level=k.length,i.disableHover=!0,i.mainNode=n,n.position=Array.prototype.slice.call(r.position),n.fixed=!0,i.init(),i.layout._layout.center=Array.prototype.slice.call(r.position),i.layout._layout.scaling=.6,i.layout._layout.width/=1.2,i.layout._layout.height*=1.2,i.layout.steps=20,i.doLayout(),i.layout._layout.center=[t.getWidth()/2,t.getHeight()/2],t.animation.animate(n).when(300,{position:[t.getWidth()/2,t.getHeight()/2]}).start("CubicOut"),t.animation.animate(n.entity).when(0,{radius:r.radius}).when(300,{radius:n.radius}).during(function(){n.entity.update(t),i.layout.isCoolDown()&&i.layout.warmUp(.3)}).start("CubicOut"),i.layout._layout.maxSpeedIncrease=1e3,i.layout._layout.scaling=1.2,i.layout.steps=5,i.layout.warmUp(.9),i.startLayouting(),i.highlightAll(),B(),j(i),k.push(i)}function _(e){var t=k.pop();T.delGroup(t.root),T.storage.updateShapeList(),j(k[k.length-1]),C.needsResize&&(C.resize(),C.needsResize=!1),e?(T.addGroup(C.root),T.refreshNextFrame(),g.popImage()):(L=!0,H()),T.refreshNextFrame()}function D(e,t,n){e=e.split("/");var i=e[0],s=e[1];i=r.actorRoleMap[i]||i;var o={path:{type:s,name:i,extra:e[2]}};switch(s){case"角色":case"微博热议":o.image=n.image;break;case"作品":case"人脉":o.image=t.image}var u=f(o);u.haveData()&&(B(),u.show().close(P))}function P(){c?H():(T.addGroup(C.root),T.refreshNextFrame())}function H(e){T.animation.animate(g).when(0,{scale:.95,blurSize:5}).when(500,{scale:1,blurSize:0}).during(function(){g.render()}).done(function(){T.addGroup(C.root),T.refreshNextFrame(),g.popImage(),k.length>1?(g.blurSize=5,g.scale=.95,g.render()):g.clear(),L=!1,e&&e()}).start(),L=!0}function B(e){g.addImage(C.getDom()),T.animation.animate(g).when(0,{blurSize:0,scale:1}).when(500,{scale:.95,blurSize:5}).during(function(){g.render()}).done(function(){L=!1,e&&e()}).start(),T.delGroup(C.root),T.storage.updateShapeList(),T.refreshNextFrame(),L=!0}function j(e){C.off("action"),e.on("action",A),C=e}typeof console!="undefined"&&console.log&&(console.log(e("./asciiLogo.txt")),console.log("\n\n\n%chttp://echarts.baidu.com","font-size:14px;")),window.stopLoading&&window.stopLoading();var t=JSON.parse(e("../data/relation1.json")),n=e("../data/relation2"),r=e("../data/relation3"),i=e("qtek/core/util"),s=e("qtek/Renderer"),o=e("zrender"),u=e("./Graph"),a=e("./Level"),f=e("./detail"),l=e("./log"),c=!0;try{new s}catch(h){c=!1}if(c)var p=e("./particles"),d=e("./BlurFilter");else var p=e("./particlesCanvas"),d=e("./BlurFilterCanvas");var v=e("./particles2"),m=document.getElementById("out-of-focus");m.width=window.innerWidth,m.height=window.innerHeight;var g=new d({canvas:m}),y=new u,b;for(var w=0;w<t.nodes.length;w++){var E=y.addNode(t.nodes[w].name,t.nodes[w]);E.name=="林萧"&&(b=E,E.position=[window.innerWidth/2,window.innerHeight/2])}for(var w=0;w<t.edges.length;w++)var h=t.edges[w],S=y.addEdge(h.source,h.target,{weight:h.weight||1,label:h.label});var x=document.getElementById("main"),T=o.init(x),N=T.animation,C=new a(y,T);C.init(),C.layout.steps=10,C.startLayouting(),C.highlightNode(b);var k=[C];C.on("action",A);var L=!1;p.start(),v.start(T),N.bind("frame",function(e){p.frame(Math.min(e,100)),v.frame(T,Math.min(e,100))}),window.onresize=function(){T.resize(),p.resize(),v.resize(),g.resize(),C&&C.resize();for(var e=0;e<k.length-1;e++)k[e].needsResize=!0},document.getElementById("logo").addEventListener("click",O),l("zhishitupuse","")});